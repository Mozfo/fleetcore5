-- V6.2.3-2: Add email_verification_code template to dir_notification_templates
-- Required for Book Demo Wizard Step 1 email verification
-- This template was only in seed.ts and not deployed to production

INSERT INTO dir_notification_templates (
  id,
  template_code,
  template_name,
  channel,
  supported_countries,
  supported_locales,
  subject_translations,
  body_translations,
  variables,
  status,
  created_at,
  updated_at
) VALUES (
  gen_random_uuid(),
  'email_verification_code',
  'Email Verification Code',
  'email',
  ARRAY['FR', 'AE', 'SA', 'BE', 'MA', 'TN', 'DZ', 'QA'],
  ARRAY['en', 'fr', 'ar'],
  '{"en": "Your FleetCore verification code", "fr": "Votre code de vérification FleetCore", "ar": "رمز التحقق من FleetCore"}'::jsonb,
  '{
    "en": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"><html dir=\"ltr\" lang=\"en\"><head><link rel=\"preload\" as=\"image\" href=\"https://res.cloudinary.com/dillqmyh7/image/upload/v1763024908/fleetcore-logo_ljrtyn.jpg\"/><meta content=\"text/html; charset=UTF-8\" http-equiv=\"Content-Type\"/><meta name=\"x-apple-disable-message-reformatting\"/><style>@media only screen and (max-width: 600px) {.container { width: 100% !important; }.content-wrapper { padding: 0 20px !important; }img { max-width: 100% !important; height: auto !important; }.code-box { font-size: 28px !important; padding: 16px 24px !important; }}</style></head><body style=\"background-color:#f6f9fc\"><!--$--><div style=\"display:none;overflow:hidden;line-height:1px;opacity:0;max-height:0;max-width:0\" data-skip-in-text=\"true\">Your FleetCore verification code</div><table border=\"0\" width=\"100%\" cellPadding=\"0\" cellSpacing=\"0\" role=\"presentation\" align=\"center\"><tbody><tr><td style=\"background-color:#f6f9fc;font-family:-apple-system,BlinkMacSystemFont,&quot;Segoe UI&quot;,Roboto,&quot;Helvetica Neue&quot;,Ubuntu,sans-serif;direction:ltr\"><table align=\"center\" width=\"100%\" class=\"container\" border=\"0\" cellPadding=\"0\" cellSpacing=\"0\" role=\"presentation\" style=\"max-width:680px;background-color:#ffffff;margin:0 auto;padding:20px 0 48px;margin-bottom:64px;width:100%\"><tbody><tr style=\"width:100%\"><td><table align=\"center\" width=\"100%\" border=\"0\" cellPadding=\"0\" cellSpacing=\"0\" role=\"presentation\" class=\"content-wrapper\" style=\"padding:0 40px\"><tbody><tr><td><a href=\"https://fleetcore.io\" style=\"color:#067df7;text-decoration-line:none;display:inline-block;text-decoration:none\" target=\"_blank\"><img alt=\"FleetCore\" height=\"auto\" src=\"https://res.cloudinary.com/dillqmyh7/image/upload/v1763024908/fleetcore-logo_ljrtyn.jpg\" style=\"display:block;outline:none;border:none;text-decoration:none;max-width:100%;height:auto\" width=\"200\"/></a><hr style=\"width:100%;border:none;border-top:1px solid #eaeaea;border-color:#e6ebf1;margin:20px 0\"/><p style=\"font-size:24px;line-height:32px;color:#1a1a1a;font-weight:600;text-align:left;margin:0 0 16px 0\">Your verification code</p><p style=\"font-size:16px;line-height:24px;color:#525f7f;text-align:left\">Enter this code to continue booking your demo:</p><table align=\"center\" width=\"100%\" border=\"0\" cellPadding=\"0\" cellSpacing=\"0\" role=\"presentation\" style=\"text-align:center;margin:32px 0\"><tbody><tr><td><p class=\"code-box\" style=\"background-color:#f4f6f8;border-radius:8px;color:#1a1a1a;display:inline-block;font-family:&quot;SF Mono&quot;,Monaco,Inconsolata,&quot;Roboto Mono&quot;,monospace;font-size:36px;font-weight:700;letter-spacing:8px;padding:20px 32px;margin:0 auto\">{{verification_code}}</p></td></tr></tbody></table><p style=\"font-size:14px;line-height:20px;color:#666666;text-align:left;margin:16px 0\">⏱️ This code expires in {{expires_in_minutes}} minutes</p><p style=\"font-size:13px;line-height:20px;color:#8898aa;text-align:left;font-style:italic;margin:24px 0 0 0\">If you didn''t request this code, you can safely ignore this email.</p><hr style=\"width:100%;border:none;border-top:1px solid #eaeaea;border-color:#e6ebf1;margin:20px 0\"/><p style=\"font-size:16px;line-height:24px;color:#525f7f;text-align:left\">Best regards,<br/>The FleetCore Team</p><p style=\"font-size:12px;line-height:16px;color:#8898aa;text-align:left\">© 2025 FleetCore. All rights reserved.</p></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table><!--/$--></body></html>",
    "fr": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"><html dir=\"ltr\" lang=\"fr\"><head><link rel=\"preload\" as=\"image\" href=\"https://res.cloudinary.com/dillqmyh7/image/upload/v1763024908/fleetcore-logo_ljrtyn.jpg\"/><meta content=\"text/html; charset=UTF-8\" http-equiv=\"Content-Type\"/><meta name=\"x-apple-disable-message-reformatting\"/><style>@media only screen and (max-width: 600px) {.container { width: 100% !important; }.content-wrapper { padding: 0 20px !important; }img { max-width: 100% !important; height: auto !important; }.code-box { font-size: 28px !important; padding: 16px 24px !important; }}</style></head><body style=\"background-color:#f6f9fc\"><!--$--><div style=\"display:none;overflow:hidden;line-height:1px;opacity:0;max-height:0;max-width:0\" data-skip-in-text=\"true\">Votre code de vérification FleetCore</div><table border=\"0\" width=\"100%\" cellPadding=\"0\" cellSpacing=\"0\" role=\"presentation\" align=\"center\"><tbody><tr><td style=\"background-color:#f6f9fc;font-family:-apple-system,BlinkMacSystemFont,&quot;Segoe UI&quot;,Roboto,&quot;Helvetica Neue&quot;,Ubuntu,sans-serif;direction:ltr\"><table align=\"center\" width=\"100%\" class=\"container\" border=\"0\" cellPadding=\"0\" cellSpacing=\"0\" role=\"presentation\" style=\"max-width:680px;background-color:#ffffff;margin:0 auto;padding:20px 0 48px;margin-bottom:64px;width:100%\"><tbody><tr style=\"width:100%\"><td><table align=\"center\" width=\"100%\" border=\"0\" cellPadding=\"0\" cellSpacing=\"0\" role=\"presentation\" class=\"content-wrapper\" style=\"padding:0 40px\"><tbody><tr><td><a href=\"https://fleetcore.io\" style=\"color:#067df7;text-decoration-line:none;display:inline-block;text-decoration:none\" target=\"_blank\"><img alt=\"FleetCore\" height=\"auto\" src=\"https://res.cloudinary.com/dillqmyh7/image/upload/v1763024908/fleetcore-logo_ljrtyn.jpg\" style=\"display:block;outline:none;border:none;text-decoration:none;max-width:100%;height:auto\" width=\"200\"/></a><hr style=\"width:100%;border:none;border-top:1px solid #eaeaea;border-color:#e6ebf1;margin:20px 0\"/><p style=\"font-size:24px;line-height:32px;color:#1a1a1a;font-weight:600;text-align:left;margin:0 0 16px 0\">Votre code de vérification</p><p style=\"font-size:16px;line-height:24px;color:#525f7f;text-align:left\">Entrez ce code pour continuer votre réservation de démo :</p><table align=\"center\" width=\"100%\" border=\"0\" cellPadding=\"0\" cellSpacing=\"0\" role=\"presentation\" style=\"text-align:center;margin:32px 0\"><tbody><tr><td><p class=\"code-box\" style=\"background-color:#f4f6f8;border-radius:8px;color:#1a1a1a;display:inline-block;font-family:&quot;SF Mono&quot;,Monaco,Inconsolata,&quot;Roboto Mono&quot;,monospace;font-size:36px;font-weight:700;letter-spacing:8px;padding:20px 32px;margin:0 auto\">{{verification_code}}</p></td></tr></tbody></table><p style=\"font-size:14px;line-height:20px;color:#666666;text-align:left;margin:16px 0\">⏱️ Ce code expire dans {{expires_in_minutes}} minutes</p><p style=\"font-size:13px;line-height:20px;color:#8898aa;text-align:left;font-style:italic;margin:24px 0 0 0\">Si vous n''avez pas demandé ce code, vous pouvez ignorer cet email.</p><hr style=\"width:100%;border:none;border-top:1px solid #eaeaea;border-color:#e6ebf1;margin:20px 0\"/><p style=\"font-size:16px;line-height:24px;color:#525f7f;text-align:left\">Cordialement,<br/>L''équipe FleetCore</p><p style=\"font-size:12px;line-height:16px;color:#8898aa;text-align:left\">© 2025 FleetCore. Tous droits réservés.</p></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table><!--/$--></body></html>",
    "ar": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"><html dir=\"rtl\" lang=\"ar\"><head><link rel=\"preload\" as=\"image\" href=\"https://res.cloudinary.com/dillqmyh7/image/upload/v1763024908/fleetcore-logo_ljrtyn.jpg\"/><meta content=\"text/html; charset=UTF-8\" http-equiv=\"Content-Type\"/><meta name=\"x-apple-disable-message-reformatting\"/><style>@media only screen and (max-width: 600px) {.container { width: 100% !important; }.content-wrapper { padding: 0 20px !important; }img { max-width: 100% !important; height: auto !important; }.code-box { font-size: 28px !important; padding: 16px 24px !important; }}</style></head><body style=\"background-color:#f6f9fc\"><!--$--><div style=\"display:none;overflow:hidden;line-height:1px;opacity:0;max-height:0;max-width:0\" data-skip-in-text=\"true\">رمز التحقق من FleetCore</div><table border=\"0\" width=\"100%\" cellPadding=\"0\" cellSpacing=\"0\" role=\"presentation\" align=\"center\"><tbody><tr><td style=\"background-color:#f6f9fc;font-family:-apple-system,BlinkMacSystemFont,&quot;Segoe UI&quot;,Roboto,&quot;Helvetica Neue&quot;,Ubuntu,sans-serif;direction:rtl\"><table align=\"center\" width=\"100%\" class=\"container\" border=\"0\" cellPadding=\"0\" cellSpacing=\"0\" role=\"presentation\" style=\"max-width:680px;background-color:#ffffff;margin:0 auto;padding:20px 0 48px;margin-bottom:64px;width:100%\"><tbody><tr style=\"width:100%\"><td><table align=\"center\" width=\"100%\" border=\"0\" cellPadding=\"0\" cellSpacing=\"0\" role=\"presentation\" class=\"content-wrapper\" style=\"padding:0 40px\"><tbody><tr><td><a href=\"https://fleetcore.io\" style=\"color:#067df7;text-decoration-line:none;display:block;text-align:center;text-decoration:none\" target=\"_blank\"><img alt=\"FleetCore\" height=\"auto\" src=\"https://res.cloudinary.com/dillqmyh7/image/upload/v1763024908/fleetcore-logo_ljrtyn.jpg\" style=\"display:inline-block;outline:none;border:none;text-decoration:none;max-width:100%;height:auto\" width=\"200\"/></a><hr style=\"width:100%;border:none;border-top:1px solid #eaeaea;border-color:#e6ebf1;margin:20px 0\"/><p style=\"font-size:24px;line-height:32px;color:#1a1a1a;font-weight:600;text-align:right;margin:0 0 16px 0\">رمز التحقق الخاص بك</p><p style=\"font-size:16px;line-height:24px;color:#525f7f;text-align:right\">أدخل هذا الرمز لمتابعة حجز العرض التوضيحي:</p><table align=\"center\" width=\"100%\" border=\"0\" cellPadding=\"0\" cellSpacing=\"0\" role=\"presentation\" style=\"text-align:center;margin:32px 0\"><tbody><tr><td><p class=\"code-box\" style=\"background-color:#f4f6f8;border-radius:8px;color:#1a1a1a;display:inline-block;font-family:&quot;SF Mono&quot;,Monaco,Inconsolata,&quot;Roboto Mono&quot;,monospace;font-size:36px;font-weight:700;letter-spacing:8px;padding:20px 32px;margin:0 auto\">{{verification_code}}</p></td></tr></tbody></table><p style=\"font-size:14px;line-height:20px;color:#666666;text-align:right;margin:16px 0\">⏱️ ينتهي هذا الرمز خلال {{expires_in_minutes}} دقيقة</p><p style=\"font-size:13px;line-height:20px;color:#8898aa;text-align:right;font-style:italic;margin:24px 0 0 0\">إذا لم تطلب هذا الرمز، يمكنك تجاهل هذا البريد الإلكتروني.</p><hr style=\"width:100%;border:none;border-top:1px solid #eaeaea;border-color:#e6ebf1;margin:20px 0\"/><p style=\"font-size:16px;line-height:24px;color:#525f7f;text-align:right\">مع أطيب التحيات،<br/>فريق FleetCore</p><p style=\"font-size:12px;line-height:16px;color:#8898aa;text-align:right\">© 2025 FleetCore. جميع الحقوق محفوظة.</p></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table><!--/$--></body></html>"
  }'::jsonb,
  '["verification_code", "expires_in_minutes"]'::jsonb,
  'active',
  NOW(),
  NOW()
)
ON CONFLICT (template_code, channel) DO UPDATE SET
  template_name = EXCLUDED.template_name,
  supported_countries = EXCLUDED.supported_countries,
  supported_locales = EXCLUDED.supported_locales,
  subject_translations = EXCLUDED.subject_translations,
  body_translations = EXCLUDED.body_translations,
  variables = EXCLUDED.variables,
  status = EXCLUDED.status,
  updated_at = NOW();
