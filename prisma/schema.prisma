generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider          = "postgresql"
  url               = env("DATABASE_URL")
  directUrl         = env("DIRECT_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
}

model adm_audit_logs {
  id          String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id   String       @db.Uuid
  member_id   String?      @db.Uuid
  entity      String       @db.VarChar(50)
  entity_id   String       @db.Uuid
  action      String       @db.VarChar(50)
  changes     Json?
  ip_address  String?      @db.VarChar(45)
  user_agent  String?
  timestamp   DateTime     @default(now()) @db.Timestamptz(6)
  adm_members adm_members? @relation(fields: [member_id], references: [id])
  adm_tenants adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)

  @@index([changes], map: "adm_audit_logs_changes_gin", type: Gin)
  @@index([changes], type: Gin)
  @@index([tenant_id, entity, entity_id], map: "adm_audit_logs_tenant_entity_entity_id_idx")
  @@index([tenant_id])
  @@index([timestamp(sort: Desc)])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model adm_member_roles {
  id                                                   String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                            String       @db.Uuid
  member_id                                            String       @db.Uuid
  role_id                                              String       @db.Uuid
  assigned_at                                          DateTime     @default(now()) @db.Timestamptz(6)
  created_at                                           DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                           String?      @db.Uuid
  updated_at                                           DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                           String?      @db.Uuid
  deleted_at                                           DateTime?    @db.Timestamptz(6)
  deleted_by                                           String?      @db.Uuid
  deletion_reason                                      String?
  adm_members_adm_member_roles_created_byToadm_members adm_members? @relation("adm_member_roles_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_adm_member_roles_deleted_byToadm_members adm_members? @relation("adm_member_roles_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_members_adm_member_roles_member_idToadm_members  adm_members  @relation("adm_member_roles_member_idToadm_members", fields: [member_id], references: [id], onDelete: Cascade)
  adm_roles                                            adm_roles    @relation(fields: [role_id], references: [id], onDelete: Cascade)
  adm_tenants                                          adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_adm_member_roles_updated_byToadm_members adm_members? @relation("adm_member_roles_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([member_id])
  @@index([role_id])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model adm_members {
  id                                                                                String                         @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                                         String                         @db.Uuid
  email                                                                             String                         @db.Citext
  clerk_user_id                                                                     String                         @db.VarChar(255)
  first_name                                                                        String?                        @db.VarChar(100)
  last_name                                                                         String?                        @db.VarChar(100)
  phone                                                                             String?                        @db.VarChar(50)
  role                                                                              String                         @default("member") @db.VarChar(50)
  last_login_at                                                                     DateTime?                      @db.Timestamptz(6)
  metadata                                                                          Json                           @default("{}")
  status                                                                            String                         @default("active") @db.VarChar(50)
  created_at                                                                        DateTime                       @default(now()) @db.Timestamptz(6)
  created_by                                                                        String?                        @db.Uuid
  updated_at                                                                        DateTime                       @default(now()) @db.Timestamptz(6)
  updated_by                                                                        String?                        @db.Uuid
  deleted_at                                                                        DateTime?                      @db.Timestamptz(6)
  deleted_by                                                                        String?                        @db.Uuid
  deletion_reason                                                                   String?
  adm_audit_logs                                                                    adm_audit_logs[]
  adm_member_roles_adm_member_roles_created_byToadm_members                         adm_member_roles[]             @relation("adm_member_roles_created_byToadm_members")
  adm_member_roles_adm_member_roles_deleted_byToadm_members                         adm_member_roles[]             @relation("adm_member_roles_deleted_byToadm_members")
  adm_member_roles_adm_member_roles_member_idToadm_members                          adm_member_roles[]             @relation("adm_member_roles_member_idToadm_members")
  adm_member_roles_adm_member_roles_updated_byToadm_members                         adm_member_roles[]             @relation("adm_member_roles_updated_byToadm_members")
  adm_members_adm_members_created_byToadm_members                                   adm_members?                   @relation("adm_members_created_byToadm_members", fields: [created_by], references: [id])
  other_adm_members_adm_members_created_byToadm_members                             adm_members[]                  @relation("adm_members_created_byToadm_members")
  adm_members_adm_members_deleted_byToadm_members                                   adm_members?                   @relation("adm_members_deleted_byToadm_members", fields: [deleted_by], references: [id])
  other_adm_members_adm_members_deleted_byToadm_members                             adm_members[]                  @relation("adm_members_deleted_byToadm_members")
  adm_tenants                                                                       adm_tenants                    @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_adm_members_updated_byToadm_members                                   adm_members?                   @relation("adm_members_updated_byToadm_members", fields: [updated_by], references: [id])
  other_adm_members_adm_members_updated_byToadm_members                             adm_members[]                  @relation("adm_members_updated_byToadm_members")
  adm_roles_adm_roles_created_byToadm_members                                       adm_roles[]                    @relation("adm_roles_created_byToadm_members")
  adm_roles_adm_roles_deleted_byToadm_members                                       adm_roles[]                    @relation("adm_roles_deleted_byToadm_members")
  adm_roles_adm_roles_updated_byToadm_members                                       adm_roles[]                    @relation("adm_roles_updated_byToadm_members")
  crm_contracts_crm_contracts_created_byToadm_members                               crm_contracts[]                @relation("crm_contracts_created_byToadm_members")
  crm_contracts_crm_contracts_deleted_byToadm_members                               crm_contracts[]                @relation("crm_contracts_deleted_byToadm_members")
  crm_contracts_crm_contracts_updated_byToadm_members                               crm_contracts[]                @relation("crm_contracts_updated_byToadm_members")
  crm_opportunities_crm_opportunities_assigned_toToadm_members                      crm_opportunities[]            @relation("crm_opportunities_assigned_toToadm_members")
  crm_opportunities_crm_opportunities_created_byToadm_members                       crm_opportunities[]            @relation("crm_opportunities_created_byToadm_members")
  crm_opportunities_crm_opportunities_deleted_byToadm_members                       crm_opportunities[]            @relation("crm_opportunities_deleted_byToadm_members")
  crm_opportunities_crm_opportunities_updated_byToadm_members                       crm_opportunities[]            @relation("crm_opportunities_updated_byToadm_members")
  fin_accounts_fin_accounts_created_byToadm_members                                 fin_accounts[]                 @relation("fin_accounts_created_byToadm_members")
  fin_accounts_fin_accounts_deleted_byToadm_members                                 fin_accounts[]                 @relation("fin_accounts_deleted_byToadm_members")
  fin_accounts_fin_accounts_updated_byToadm_members                                 fin_accounts[]                 @relation("fin_accounts_updated_byToadm_members")
  fin_driver_payment_batches_fin_driver_payment_batches_created_byToadm_members     fin_driver_payment_batches[]   @relation("fin_driver_payment_batches_created_byToadm_members")
  fin_driver_payment_batches_fin_driver_payment_batches_deleted_byToadm_members     fin_driver_payment_batches[]   @relation("fin_driver_payment_batches_deleted_byToadm_members")
  fin_driver_payment_batches_fin_driver_payment_batches_updated_byToadm_members     fin_driver_payment_batches[]   @relation("fin_driver_payment_batches_updated_byToadm_members")
  fin_driver_payments_fin_driver_payments_created_byToadm_members                   fin_driver_payments[]          @relation("fin_driver_payments_created_byToadm_members")
  fin_driver_payments_fin_driver_payments_deleted_byToadm_members                   fin_driver_payments[]          @relation("fin_driver_payments_deleted_byToadm_members")
  fin_driver_payments_fin_driver_payments_updated_byToadm_members                   fin_driver_payments[]          @relation("fin_driver_payments_updated_byToadm_members")
  fin_toll_transactions_fin_toll_transactions_created_byToadm_members               fin_toll_transactions[]        @relation("fin_toll_transactions_created_byToadm_members")
  fin_toll_transactions_fin_toll_transactions_deleted_byToadm_members               fin_toll_transactions[]        @relation("fin_toll_transactions_deleted_byToadm_members")
  fin_toll_transactions_fin_toll_transactions_updated_byToadm_members               fin_toll_transactions[]        @relation("fin_toll_transactions_updated_byToadm_members")
  fin_traffic_fines_fin_traffic_fines_created_byToadm_members                       fin_traffic_fines[]            @relation("fin_traffic_fines_created_byToadm_members")
  fin_traffic_fines_fin_traffic_fines_deleted_byToadm_members                       fin_traffic_fines[]            @relation("fin_traffic_fines_deleted_byToadm_members")
  fin_traffic_fines_fin_traffic_fines_updated_byToadm_members                       fin_traffic_fines[]            @relation("fin_traffic_fines_updated_byToadm_members")
  fin_transactions_fin_transactions_created_byToadm_members                         fin_transactions[]             @relation("fin_transactions_created_byToadm_members")
  fin_transactions_fin_transactions_deleted_byToadm_members                         fin_transactions[]             @relation("fin_transactions_deleted_byToadm_members")
  fin_transactions_fin_transactions_updated_byToadm_members                         fin_transactions[]             @relation("fin_transactions_updated_byToadm_members")
  flt_vehicle_assignments_flt_vehicle_assignments_created_byToadm_members           flt_vehicle_assignments[]      @relation("flt_vehicle_assignments_created_byToadm_members")
  flt_vehicle_assignments_flt_vehicle_assignments_deleted_byToadm_members           flt_vehicle_assignments[]      @relation("flt_vehicle_assignments_deleted_byToadm_members")
  flt_vehicle_assignments_flt_vehicle_assignments_updated_byToadm_members           flt_vehicle_assignments[]      @relation("flt_vehicle_assignments_updated_byToadm_members")
  flt_vehicle_events_flt_vehicle_events_created_byToadm_members                     flt_vehicle_events[]           @relation("flt_vehicle_events_created_byToadm_members")
  flt_vehicle_events_flt_vehicle_events_deleted_byToadm_members                     flt_vehicle_events[]           @relation("flt_vehicle_events_deleted_byToadm_members")
  flt_vehicle_events_flt_vehicle_events_updated_byToadm_members                     flt_vehicle_events[]           @relation("flt_vehicle_events_updated_byToadm_members")
  flt_vehicle_expenses_flt_vehicle_expenses_created_byToadm_members                 flt_vehicle_expenses[]         @relation("flt_vehicle_expenses_created_byToadm_members")
  flt_vehicle_expenses_flt_vehicle_expenses_deleted_byToadm_members                 flt_vehicle_expenses[]         @relation("flt_vehicle_expenses_deleted_byToadm_members")
  flt_vehicle_expenses_flt_vehicle_expenses_updated_byToadm_members                 flt_vehicle_expenses[]         @relation("flt_vehicle_expenses_updated_byToadm_members")
  flt_vehicle_insurances_flt_vehicle_insurances_created_byToadm_members             flt_vehicle_insurances[]       @relation("flt_vehicle_insurances_created_byToadm_members")
  flt_vehicle_insurances_flt_vehicle_insurances_deleted_byToadm_members             flt_vehicle_insurances[]       @relation("flt_vehicle_insurances_deleted_byToadm_members")
  flt_vehicle_insurances_flt_vehicle_insurances_updated_byToadm_members             flt_vehicle_insurances[]       @relation("flt_vehicle_insurances_updated_byToadm_members")
  flt_vehicle_maintenance_flt_vehicle_maintenance_created_byToadm_members           flt_vehicle_maintenance[]      @relation("flt_vehicle_maintenance_created_byToadm_members")
  flt_vehicle_maintenance_flt_vehicle_maintenance_updated_byToadm_members           flt_vehicle_maintenance[]      @relation("flt_vehicle_maintenance_updated_byToadm_members")
  flt_vehicles_flt_vehicles_created_byToadm_members                                 flt_vehicles[]                 @relation("flt_vehicles_created_byToadm_members")
  flt_vehicles_flt_vehicles_deleted_byToadm_members                                 flt_vehicles[]                 @relation("flt_vehicles_deleted_byToadm_members")
  flt_vehicles_flt_vehicles_updated_byToadm_members                                 flt_vehicles[]                 @relation("flt_vehicles_updated_byToadm_members")
  rev_driver_revenues_rev_driver_revenues_created_byToadm_members                   rev_driver_revenues[]          @relation("rev_driver_revenues_created_byToadm_members")
  rev_driver_revenues_rev_driver_revenues_deleted_byToadm_members                   rev_driver_revenues[]          @relation("rev_driver_revenues_deleted_byToadm_members")
  rev_driver_revenues_rev_driver_revenues_updated_byToadm_members                   rev_driver_revenues[]          @relation("rev_driver_revenues_updated_byToadm_members")
  rev_reconciliations_rev_reconciliations_created_byToadm_members                   rev_reconciliations[]          @relation("rev_reconciliations_created_byToadm_members")
  rev_reconciliations_rev_reconciliations_deleted_byToadm_members                   rev_reconciliations[]          @relation("rev_reconciliations_deleted_byToadm_members")
  rev_reconciliations_rev_reconciliations_updated_byToadm_members                   rev_reconciliations[]          @relation("rev_reconciliations_updated_byToadm_members")
  rev_revenue_imports_rev_revenue_imports_created_byToadm_members                   rev_revenue_imports[]          @relation("rev_revenue_imports_created_byToadm_members")
  rev_revenue_imports_rev_revenue_imports_deleted_byToadm_members                   rev_revenue_imports[]          @relation("rev_revenue_imports_deleted_byToadm_members")
  rev_revenue_imports_rev_revenue_imports_updated_byToadm_members                   rev_revenue_imports[]          @relation("rev_revenue_imports_updated_byToadm_members")
  rid_driver_blacklists_rid_driver_blacklists_created_byToadm_members               rid_driver_blacklists[]        @relation("rid_driver_blacklists_created_byToadm_members")
  rid_driver_blacklists_rid_driver_blacklists_deleted_byToadm_members               rid_driver_blacklists[]        @relation("rid_driver_blacklists_deleted_byToadm_members")
  rid_driver_blacklists_rid_driver_blacklists_updated_byToadm_members               rid_driver_blacklists[]        @relation("rid_driver_blacklists_updated_byToadm_members")
  rid_driver_cooperation_terms_rid_driver_cooperation_terms_created_byToadm_members rid_driver_cooperation_terms[] @relation("rid_driver_cooperation_terms_created_byToadm_members")
  rid_driver_cooperation_terms_rid_driver_cooperation_terms_deleted_byToadm_members rid_driver_cooperation_terms[] @relation("rid_driver_cooperation_terms_deleted_byToadm_members")
  rid_driver_cooperation_terms_rid_driver_cooperation_terms_updated_byToadm_members rid_driver_cooperation_terms[] @relation("rid_driver_cooperation_terms_updated_byToadm_members")
  rid_driver_documents_rid_driver_documents_created_byToadm_members                 rid_driver_documents[]         @relation("rid_driver_documents_created_byToadm_members")
  rid_driver_documents_rid_driver_documents_deleted_byToadm_members                 rid_driver_documents[]         @relation("rid_driver_documents_deleted_byToadm_members")
  rid_driver_documents_rid_driver_documents_updated_byToadm_members                 rid_driver_documents[]         @relation("rid_driver_documents_updated_byToadm_members")
  rid_driver_documents_rid_driver_documents_verified_byToadm_members                rid_driver_documents[]         @relation("rid_driver_documents_verified_byToadm_members")
  rid_driver_languages_rid_driver_languages_created_byToadm_members                 rid_driver_languages[]         @relation("rid_driver_languages_created_byToadm_members")
  rid_driver_languages_rid_driver_languages_deleted_byToadm_members                 rid_driver_languages[]         @relation("rid_driver_languages_deleted_byToadm_members")
  rid_driver_languages_rid_driver_languages_updated_byToadm_members                 rid_driver_languages[]         @relation("rid_driver_languages_updated_byToadm_members")
  rid_driver_performances_rid_driver_performances_created_byToadm_members           rid_driver_performances[]      @relation("rid_driver_performances_created_byToadm_members")
  rid_driver_performances_rid_driver_performances_deleted_byToadm_members           rid_driver_performances[]      @relation("rid_driver_performances_deleted_byToadm_members")
  rid_driver_performances_rid_driver_performances_updated_byToadm_members           rid_driver_performances[]      @relation("rid_driver_performances_updated_byToadm_members")
  rid_driver_requests_rid_driver_requests_created_byToadm_members                   rid_driver_requests[]          @relation("rid_driver_requests_created_byToadm_members")
  rid_driver_requests_rid_driver_requests_deleted_byToadm_members                   rid_driver_requests[]          @relation("rid_driver_requests_deleted_byToadm_members")
  rid_driver_requests_rid_driver_requests_updated_byToadm_members                   rid_driver_requests[]          @relation("rid_driver_requests_updated_byToadm_members")
  rid_driver_training_rid_driver_training_created_byToadm_members                   rid_driver_training[]          @relation("rid_driver_training_created_byToadm_members")
  rid_driver_training_rid_driver_training_deleted_byToadm_members                   rid_driver_training[]          @relation("rid_driver_training_deleted_byToadm_members")
  rid_driver_training_rid_driver_training_updated_byToadm_members                   rid_driver_training[]          @relation("rid_driver_training_updated_byToadm_members")
  sch_goals_sch_goals_created_byToadm_members                                       sch_goals[]                    @relation("sch_goals_created_byToadm_members")
  sch_goals_sch_goals_deleted_byToadm_members                                       sch_goals[]                    @relation("sch_goals_deleted_byToadm_members")
  sch_goals_sch_goals_updated_byToadm_members                                       sch_goals[]                    @relation("sch_goals_updated_byToadm_members")
  sch_maintenance_schedules_sch_maintenance_schedules_created_byToadm_members       sch_maintenance_schedules[]    @relation("sch_maintenance_schedules_created_byToadm_members")
  sch_maintenance_schedules_sch_maintenance_schedules_deleted_byToadm_members       sch_maintenance_schedules[]    @relation("sch_maintenance_schedules_deleted_byToadm_members")
  sch_maintenance_schedules_sch_maintenance_schedules_updated_byToadm_members       sch_maintenance_schedules[]    @relation("sch_maintenance_schedules_updated_byToadm_members")
  sch_shifts_sch_shifts_created_byToadm_members                                     sch_shifts[]                   @relation("sch_shifts_created_byToadm_members")
  sch_shifts_sch_shifts_deleted_byToadm_members                                     sch_shifts[]                   @relation("sch_shifts_deleted_byToadm_members")
  sch_shifts_sch_shifts_updated_byToadm_members                                     sch_shifts[]                   @relation("sch_shifts_updated_byToadm_members")
  sch_tasks_sch_tasks_created_byToadm_members                                       sch_tasks[]                    @relation("sch_tasks_created_byToadm_members")
  sch_tasks_sch_tasks_deleted_byToadm_members                                       sch_tasks[]                    @relation("sch_tasks_deleted_byToadm_members")
  sch_tasks_sch_tasks_updated_byToadm_members                                       sch_tasks[]                    @relation("sch_tasks_updated_byToadm_members")
  sup_ticket_messages_sup_ticket_messages_created_byToadm_members                   sup_ticket_messages[]          @relation("sup_ticket_messages_created_byToadm_members")
  sup_ticket_messages_sup_ticket_messages_deleted_byToadm_members                   sup_ticket_messages[]          @relation("sup_ticket_messages_deleted_byToadm_members")
  sup_ticket_messages_sup_ticket_messages_updated_byToadm_members                   sup_ticket_messages[]          @relation("sup_ticket_messages_updated_byToadm_members")
  sup_tickets_sup_tickets_created_byToadm_members                                   sup_tickets[]                  @relation("sup_tickets_created_byToadm_members")
  sup_tickets_sup_tickets_deleted_byToadm_members                                   sup_tickets[]                  @relation("sup_tickets_deleted_byToadm_members")
  sup_tickets_sup_tickets_updated_byToadm_members                                   sup_tickets[]                  @relation("sup_tickets_updated_byToadm_members")
  trp_client_invoices_trp_client_invoices_created_byToadm_members                   trp_client_invoices[]          @relation("trp_client_invoices_created_byToadm_members")
  trp_client_invoices_trp_client_invoices_deleted_byToadm_members                   trp_client_invoices[]          @relation("trp_client_invoices_deleted_byToadm_members")
  trp_client_invoices_trp_client_invoices_updated_byToadm_members                   trp_client_invoices[]          @relation("trp_client_invoices_updated_byToadm_members")
  trp_platform_accounts_trp_platform_accounts_created_byToadm_members               trp_platform_accounts[]        @relation("trp_platform_accounts_created_byToadm_members")
  trp_platform_accounts_trp_platform_accounts_deleted_byToadm_members               trp_platform_accounts[]        @relation("trp_platform_accounts_deleted_byToadm_members")
  trp_platform_accounts_trp_platform_accounts_updated_byToadm_members               trp_platform_accounts[]        @relation("trp_platform_accounts_updated_byToadm_members")
  trp_settlements_trp_settlements_created_byToadm_members                           trp_settlements[]              @relation("trp_settlements_created_byToadm_members")
  trp_settlements_trp_settlements_deleted_byToadm_members                           trp_settlements[]              @relation("trp_settlements_deleted_byToadm_members")
  trp_settlements_trp_settlements_updated_byToadm_members                           trp_settlements[]              @relation("trp_settlements_updated_byToadm_members")

  @@index([clerk_user_id])
  @@index([created_by])
  @@index([deleted_at])
  @@index([email])
  @@index([last_login_at])
  @@index([metadata], map: "adm_members_metadata_gin", type: Gin)
  @@index([metadata], type: Gin)
  @@index([tenant_id])
  @@index([updated_by])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model adm_provider_employees {
  id                                                                                     String                        @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  clerk_user_id                                                                          String                        @db.VarChar(255)
  name                                                                                   String                        @db.VarChar(100)
  email                                                                                  String                        @db.VarChar(255)
  department                                                                             String?                       @db.VarChar(50)
  title                                                                                  String?                       @db.VarChar(50)
  permissions                                                                            Json?
  status                                                                                 String                        @default("active") @db.VarChar(50)
  created_at                                                                             DateTime                      @default(now()) @db.Timestamptz(6)
  created_by                                                                             String?                       @db.Uuid
  updated_at                                                                             DateTime                      @default(now()) @db.Timestamptz(6)
  updated_by                                                                             String?                       @db.Uuid
  deleted_at                                                                             DateTime?                     @db.Timestamptz(6)
  deleted_by                                                                             String?                       @db.Uuid
  deletion_reason                                                                        String?
  adm_provider_employees_adm_provider_employees_created_byToadm_provider_employees       adm_provider_employees?       @relation("adm_provider_employees_created_byToadm_provider_employees", fields: [created_by], references: [id])
  other_adm_provider_employees_adm_provider_employees_created_byToadm_provider_employees adm_provider_employees[]      @relation("adm_provider_employees_created_byToadm_provider_employees")
  adm_provider_employees_adm_provider_employees_deleted_byToadm_provider_employees       adm_provider_employees?       @relation("adm_provider_employees_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id])
  other_adm_provider_employees_adm_provider_employees_deleted_byToadm_provider_employees adm_provider_employees[]      @relation("adm_provider_employees_deleted_byToadm_provider_employees")
  adm_provider_employees_adm_provider_employees_updated_byToadm_provider_employees       adm_provider_employees?       @relation("adm_provider_employees_updated_byToadm_provider_employees", fields: [updated_by], references: [id])
  other_adm_provider_employees_adm_provider_employees_updated_byToadm_provider_employees adm_provider_employees[]      @relation("adm_provider_employees_updated_byToadm_provider_employees")
  adm_tenant_lifecycle_events                                                            adm_tenant_lifecycle_events[]
  bil_billing_plans_bil_billing_plans_created_byToadm_provider_employees                 bil_billing_plans[]           @relation("bil_billing_plans_created_byToadm_provider_employees")
  bil_billing_plans_bil_billing_plans_deleted_byToadm_provider_employees                 bil_billing_plans[]           @relation("bil_billing_plans_deleted_byToadm_provider_employees")
  bil_billing_plans_bil_billing_plans_updated_byToadm_provider_employees                 bil_billing_plans[]           @relation("bil_billing_plans_updated_byToadm_provider_employees")
  bil_payment_methods_bil_payment_methods_created_byToadm_provider_employees             bil_payment_methods[]         @relation("bil_payment_methods_created_byToadm_provider_employees")
  bil_payment_methods_bil_payment_methods_deleted_byToadm_provider_employees             bil_payment_methods[]         @relation("bil_payment_methods_deleted_byToadm_provider_employees")
  bil_payment_methods_bil_payment_methods_updated_byToadm_provider_employees             bil_payment_methods[]         @relation("bil_payment_methods_updated_byToadm_provider_employees")
  bil_tenant_invoice_lines_bil_tenant_invoice_lines_created_byToadm_provider_employees   bil_tenant_invoice_lines[]    @relation("bil_tenant_invoice_lines_created_byToadm_provider_employees")
  bil_tenant_invoice_lines_bil_tenant_invoice_lines_deleted_byToadm_provider_employees   bil_tenant_invoice_lines[]    @relation("bil_tenant_invoice_lines_deleted_byToadm_provider_employees")
  bil_tenant_invoice_lines_bil_tenant_invoice_lines_updated_byToadm_provider_employees   bil_tenant_invoice_lines[]    @relation("bil_tenant_invoice_lines_updated_byToadm_provider_employees")
  bil_tenant_invoices_bil_tenant_invoices_created_byToadm_provider_employees             bil_tenant_invoices[]         @relation("bil_tenant_invoices_created_byToadm_provider_employees")
  bil_tenant_invoices_bil_tenant_invoices_deleted_byToadm_provider_employees             bil_tenant_invoices[]         @relation("bil_tenant_invoices_deleted_byToadm_provider_employees")
  bil_tenant_invoices_bil_tenant_invoices_updated_byToadm_provider_employees             bil_tenant_invoices[]         @relation("bil_tenant_invoices_updated_byToadm_provider_employees")
  bil_tenant_subscriptions_bil_tenant_subscriptions_created_byToadm_provider_employees   bil_tenant_subscriptions[]    @relation("bil_tenant_subscriptions_created_byToadm_provider_employees")
  bil_tenant_subscriptions_bil_tenant_subscriptions_deleted_byToadm_provider_employees   bil_tenant_subscriptions[]    @relation("bil_tenant_subscriptions_deleted_byToadm_provider_employees")
  bil_tenant_subscriptions_bil_tenant_subscriptions_updated_byToadm_provider_employees   bil_tenant_subscriptions[]    @relation("bil_tenant_subscriptions_updated_byToadm_provider_employees")
  bil_tenant_usage_metrics_bil_tenant_usage_metrics_created_byToadm_provider_employees   bil_tenant_usage_metrics[]    @relation("bil_tenant_usage_metrics_created_byToadm_provider_employees")
  bil_tenant_usage_metrics_bil_tenant_usage_metrics_deleted_byToadm_provider_employees   bil_tenant_usage_metrics[]    @relation("bil_tenant_usage_metrics_deleted_byToadm_provider_employees")
  bil_tenant_usage_metrics_bil_tenant_usage_metrics_updated_byToadm_provider_employees   bil_tenant_usage_metrics[]    @relation("bil_tenant_usage_metrics_updated_byToadm_provider_employees")
  dir_car_makes_created_by                                                               dir_car_makes[]               @relation("dir_car_makes_created_by")
  dir_car_makes_updated_by                                                               dir_car_makes[]               @relation("dir_car_makes_updated_by")
  dir_car_makes_deleted_by                                                               dir_car_makes[]               @relation("dir_car_makes_deleted_by")
  sup_tickets                                                                            sup_tickets[]

  @@index([created_by])
  @@index([deleted_at])
  @@index([permissions], map: "adm_provider_employees_permissions_gin", type: Gin)
  @@index([updated_by])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model adm_roles {
  id                                            String             @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                     String             @db.Uuid
  name                                          String             @db.VarChar(100)
  description                                   String?
  permissions                                   Json               @default("{}")
  status                                        String             @default("active") @db.VarChar(50)
  created_at                                    DateTime           @default(now()) @db.Timestamptz(6)
  created_by                                    String?            @db.Uuid
  updated_at                                    DateTime           @default(now()) @db.Timestamptz(6)
  updated_by                                    String?            @db.Uuid
  deleted_at                                    DateTime?          @db.Timestamptz(6)
  deleted_by                                    String?            @db.Uuid
  deletion_reason                               String?
  adm_member_roles                              adm_member_roles[]
  adm_members_adm_roles_created_byToadm_members adm_members?       @relation("adm_roles_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_adm_roles_deleted_byToadm_members adm_members?       @relation("adm_roles_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_tenants                                   adm_tenants        @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_adm_roles_updated_byToadm_members adm_members?       @relation("adm_roles_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([permissions], map: "adm_roles_permissions_gin", type: Gin)
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model adm_tenant_lifecycle_events {
  id                     String                  @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id              String                  @db.Uuid
  event_type             String                  @db.VarChar(50)
  performed_by           String?                 @db.Uuid
  effective_date         DateTime?               @db.Date
  description            String?
  created_at             DateTime                @default(now()) @db.Timestamptz(6)
  adm_provider_employees adm_provider_employees? @relation(fields: [performed_by], references: [id])
  adm_tenants            adm_tenants             @relation(fields: [tenant_id], references: [id], onDelete: Cascade)

  @@index([effective_date(sort: Desc)])
  @@index([event_type])
  @@index([tenant_id, event_type], map: "adm_tenant_lifecycle_events_tenant_event_idx")
  @@index([tenant_id])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model adm_tenants {
  id                           String                         @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  name                         String
  country_code                 String                         @db.VarChar(2)
  clerk_organization_id        String?                        @unique(map: "adm_tenants_clerk_org_unique")
  vat_rate                     Decimal?                       @db.Decimal(5, 2)
  default_currency             String                         @default("EUR") @db.Char(3)
  timezone                     String                         @default("Europe/Paris")
  created_at                   DateTime                       @default(now()) @db.Timestamptz(6)
  updated_at                   DateTime                       @default(now()) @db.Timestamptz(6)
  deleted_at                   DateTime?                      @db.Timestamptz(6)
  subdomain                    String?                        @unique @db.VarChar(100)
  adm_audit_logs               adm_audit_logs[]
  adm_member_roles             adm_member_roles[]
  adm_members                  adm_members[]
  adm_roles                    adm_roles[]
  adm_tenant_lifecycle_events  adm_tenant_lifecycle_events[]
  bil_payment_methods          bil_payment_methods[]
  bil_tenant_invoices          bil_tenant_invoices[]
  bil_tenant_subscriptions     bil_tenant_subscriptions[]
  bil_tenant_usage_metrics     bil_tenant_usage_metrics[]
  dir_car_makes                dir_car_makes[]
  dir_car_models               dir_car_models[]
  doc_documents                doc_documents[]
  fin_accounts                 fin_accounts[]
  fin_driver_payment_batches   fin_driver_payment_batches[]
  fin_driver_payments          fin_driver_payments[]
  fin_toll_transactions        fin_toll_transactions[]
  fin_traffic_fines            fin_traffic_fines[]
  fin_transactions             fin_transactions[]
  flt_vehicle_assignments      flt_vehicle_assignments[]
  flt_vehicle_events           flt_vehicle_events[]
  flt_vehicle_expenses         flt_vehicle_expenses[]
  flt_vehicle_insurances       flt_vehicle_insurances[]
  flt_vehicle_maintenance      flt_vehicle_maintenance[]
  flt_vehicles                 flt_vehicles[]
  rev_driver_revenues          rev_driver_revenues[]
  rev_reconciliations          rev_reconciliations[]
  rev_revenue_imports          rev_revenue_imports[]
  rid_driver_blacklists        rid_driver_blacklists[]
  rid_driver_cooperation_terms rid_driver_cooperation_terms[]
  rid_driver_documents         rid_driver_documents[]
  rid_driver_languages         rid_driver_languages[]
  rid_driver_performances      rid_driver_performances[]
  rid_driver_requests          rid_driver_requests[]
  rid_driver_training          rid_driver_training[]
  rid_drivers                  rid_drivers[]
  sch_goals                    sch_goals[]
  sch_maintenance_schedules    sch_maintenance_schedules[]
  sch_shifts                   sch_shifts[]
  sch_tasks                    sch_tasks[]
  sup_customer_feedback        sup_customer_feedback[]
  sup_tickets                  sup_tickets[]
  trp_client_invoices          trp_client_invoices[]
  trp_platform_accounts        trp_platform_accounts[]
  trp_settlements              trp_settlements[]
  trp_trips                    trp_trips[]

  @@index([clerk_organization_id])
  @@index([country_code])
  @@index([default_currency])
  @@index([deleted_at])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model bil_billing_plans {
  id                                                                          String                     @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  plan_name                                                                   String
  description                                                                 String?
  monthly_fee                                                                 Decimal                    @default(0) @db.Decimal(14, 2)
  annual_fee                                                                  Decimal                    @default(0) @db.Decimal(14, 2)
  currency                                                                    String                     @db.VarChar(3)
  features                                                                    Json                       @default("{}")
  status                                                                      String                     @default("active")
  metadata                                                                    Json                       @default("{}")
  created_at                                                                  DateTime                   @default(now()) @db.Timestamptz(6)
  created_by                                                                  String?                    @db.Uuid
  updated_at                                                                  DateTime                   @default(now()) @db.Timestamptz(6)
  updated_by                                                                  String?                    @db.Uuid
  deleted_at                                                                  DateTime?                  @db.Timestamptz(6)
  deleted_by                                                                  String?                    @db.Uuid
  deletion_reason                                                             String?
  adm_provider_employees_bil_billing_plans_created_byToadm_provider_employees adm_provider_employees?    @relation("bil_billing_plans_created_byToadm_provider_employees", fields: [created_by], references: [id])
  adm_provider_employees_bil_billing_plans_deleted_byToadm_provider_employees adm_provider_employees?    @relation("bil_billing_plans_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id])
  adm_provider_employees_bil_billing_plans_updated_byToadm_provider_employees adm_provider_employees?    @relation("bil_billing_plans_updated_byToadm_provider_employees", fields: [updated_by], references: [id])
  bil_tenant_subscriptions                                                    bil_tenant_subscriptions[]

  @@index([created_by])
  @@index([deleted_at])
  @@index([features], type: Gin)
  @@index([metadata], type: Gin)
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model bil_payment_methods {
  id                                                                            String                  @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                                     String                  @db.Uuid
  payment_type                                                                  String
  provider_token                                                                String
  expires_at                                                                    DateTime?               @db.Date
  status                                                                        String                  @default("active")
  metadata                                                                      Json                    @default("{}")
  created_at                                                                    DateTime                @default(now()) @db.Timestamptz(6)
  created_by                                                                    String?                 @db.Uuid
  updated_at                                                                    DateTime                @default(now()) @db.Timestamptz(6)
  updated_by                                                                    String?                 @db.Uuid
  deleted_at                                                                    DateTime?               @db.Timestamptz(6)
  deleted_by                                                                    String?                 @db.Uuid
  deletion_reason                                                               String?
  adm_provider_employees_bil_payment_methods_created_byToadm_provider_employees adm_provider_employees? @relation("bil_payment_methods_created_byToadm_provider_employees", fields: [created_by], references: [id])
  adm_provider_employees_bil_payment_methods_deleted_byToadm_provider_employees adm_provider_employees? @relation("bil_payment_methods_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id])
  adm_tenants                                                                   adm_tenants             @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_provider_employees_bil_payment_methods_updated_byToadm_provider_employees adm_provider_employees? @relation("bil_payment_methods_updated_byToadm_provider_employees", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([expires_at])
  @@index([metadata], type: Gin)
  @@index([payment_type])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model bil_tenant_invoice_lines {
  id                                                                                 String                  @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  invoice_id                                                                         String                  @db.Uuid
  description                                                                        String
  amount                                                                             Decimal                 @default(0) @db.Decimal(18, 2)
  quantity                                                                           Decimal                 @default(1) @db.Decimal(10, 2)
  metadata                                                                           Json                    @default("{}")
  created_at                                                                         DateTime                @default(now()) @db.Timestamptz(6)
  created_by                                                                         String?                 @db.Uuid
  updated_at                                                                         DateTime                @default(now()) @db.Timestamptz(6)
  updated_by                                                                         String?                 @db.Uuid
  deleted_at                                                                         DateTime?               @db.Timestamptz(6)
  deleted_by                                                                         String?                 @db.Uuid
  deletion_reason                                                                    String?
  adm_provider_employees_bil_tenant_invoice_lines_created_byToadm_provider_employees adm_provider_employees? @relation("bil_tenant_invoice_lines_created_byToadm_provider_employees", fields: [created_by], references: [id])
  adm_provider_employees_bil_tenant_invoice_lines_deleted_byToadm_provider_employees adm_provider_employees? @relation("bil_tenant_invoice_lines_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id])
  bil_tenant_invoices                                                                bil_tenant_invoices     @relation(fields: [invoice_id], references: [id], onDelete: Cascade)
  adm_provider_employees_bil_tenant_invoice_lines_updated_byToadm_provider_employees adm_provider_employees? @relation("bil_tenant_invoice_lines_updated_byToadm_provider_employees", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([description])
  @@index([invoice_id])
  @@index([metadata], type: Gin)
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model bil_tenant_invoices {
  id                                                                            String                     @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                                     String                     @db.Uuid
  invoice_number                                                                String
  invoice_date                                                                  DateTime                   @db.Date
  due_date                                                                      DateTime                   @db.Date
  total_amount                                                                  Decimal                    @default(0) @db.Decimal(18, 2)
  currency                                                                      String                     @db.VarChar(3)
  status                                                                        String                     @default("draft")
  metadata                                                                      Json                       @default("{}")
  created_at                                                                    DateTime                   @default(now()) @db.Timestamptz(6)
  created_by                                                                    String?                    @db.Uuid
  updated_at                                                                    DateTime                   @default(now()) @db.Timestamptz(6)
  updated_by                                                                    String?                    @db.Uuid
  deleted_at                                                                    DateTime?                  @db.Timestamptz(6)
  deleted_by                                                                    String?                    @db.Uuid
  deletion_reason                                                               String?
  bil_tenant_invoice_lines                                                      bil_tenant_invoice_lines[]
  adm_provider_employees_bil_tenant_invoices_created_byToadm_provider_employees adm_provider_employees?    @relation("bil_tenant_invoices_created_byToadm_provider_employees", fields: [created_by], references: [id])
  adm_provider_employees_bil_tenant_invoices_deleted_byToadm_provider_employees adm_provider_employees?    @relation("bil_tenant_invoices_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id])
  adm_tenants                                                                   adm_tenants                @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_provider_employees_bil_tenant_invoices_updated_byToadm_provider_employees adm_provider_employees?    @relation("bil_tenant_invoices_updated_byToadm_provider_employees", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([due_date])
  @@index([invoice_date])
  @@index([invoice_number])
  @@index([metadata], type: Gin)
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model bil_tenant_subscriptions {
  id                                                                                 String                  @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                                          String                  @db.Uuid
  plan_id                                                                            String                  @db.Uuid
  subscription_start                                                                 DateTime                @db.Date
  subscription_end                                                                   DateTime?               @db.Date
  status                                                                             String                  @default("active")
  metadata                                                                           Json                    @default("{}")
  created_at                                                                         DateTime                @default(now()) @db.Timestamptz(6)
  created_by                                                                         String?                 @db.Uuid
  updated_at                                                                         DateTime                @default(now()) @db.Timestamptz(6)
  updated_by                                                                         String?                 @db.Uuid
  deleted_at                                                                         DateTime?               @db.Timestamptz(6)
  deleted_by                                                                         String?                 @db.Uuid
  deletion_reason                                                                    String?
  adm_provider_employees_bil_tenant_subscriptions_created_byToadm_provider_employees adm_provider_employees? @relation("bil_tenant_subscriptions_created_byToadm_provider_employees", fields: [created_by], references: [id])
  adm_provider_employees_bil_tenant_subscriptions_deleted_byToadm_provider_employees adm_provider_employees? @relation("bil_tenant_subscriptions_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id])
  bil_billing_plans                                                                  bil_billing_plans       @relation(fields: [plan_id], references: [id], onDelete: Cascade)
  adm_tenants                                                                        adm_tenants             @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_provider_employees_bil_tenant_subscriptions_updated_byToadm_provider_employees adm_provider_employees? @relation("bil_tenant_subscriptions_updated_byToadm_provider_employees", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([metadata], type: Gin)
  @@index([plan_id])
  @@index([subscription_end])
  @@index([subscription_start])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model bil_tenant_usage_metrics {
  id                                                                                 String                  @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                                          String                  @db.Uuid
  metric_name                                                                        String                  @db.VarChar(50)
  metric_value                                                                       Decimal                 @default(0) @db.Decimal(18, 2)
  period_start                                                                       DateTime                @db.Date
  period_end                                                                         DateTime                @db.Date
  metadata                                                                           Json                    @default("{}")
  created_at                                                                         DateTime                @default(now()) @db.Timestamptz(6)
  created_by                                                                         String?                 @db.Uuid
  updated_at                                                                         DateTime                @default(now()) @db.Timestamptz(6)
  updated_by                                                                         String?                 @db.Uuid
  deleted_at                                                                         DateTime?               @db.Timestamptz(6)
  deleted_by                                                                         String?                 @db.Uuid
  deletion_reason                                                                    String?
  adm_provider_employees_bil_tenant_usage_metrics_created_byToadm_provider_employees adm_provider_employees? @relation("bil_tenant_usage_metrics_created_byToadm_provider_employees", fields: [created_by], references: [id])
  adm_provider_employees_bil_tenant_usage_metrics_deleted_byToadm_provider_employees adm_provider_employees? @relation("bil_tenant_usage_metrics_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id])
  adm_tenants                                                                        adm_tenants             @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_provider_employees_bil_tenant_usage_metrics_updated_byToadm_provider_employees adm_provider_employees? @relation("bil_tenant_usage_metrics_updated_byToadm_provider_employees", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([metadata], type: Gin)
  @@index([metric_name])
  @@index([period_end])
  @@index([period_start])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model crm_contracts {
  id                                                String             @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  lead_id                                           String             @db.Uuid
  contract_reference                                String
  contract_date                                     DateTime           @db.Date
  effective_date                                    DateTime           @db.Date
  expiry_date                                       DateTime?          @db.Date
  total_value                                       Decimal            @db.Decimal(18, 2)
  currency                                          String             @db.VarChar(3)
  status                                            String             @default("active")
  metadata                                          Json               @default("{}")
  created_at                                        DateTime           @default(now()) @db.Timestamptz(6)
  created_by                                        String?            @db.Uuid
  updated_at                                        DateTime           @default(now()) @db.Timestamptz(6)
  updated_by                                        String?            @db.Uuid
  deleted_at                                        DateTime?          @db.Timestamptz(6)
  deleted_by                                        String?            @db.Uuid
  deletion_reason                                   String?
  opportunity_id                                    String?            @db.Uuid
  adm_members_crm_contracts_created_byToadm_members adm_members?       @relation("crm_contracts_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_crm_contracts_deleted_byToadm_members adm_members?       @relation("crm_contracts_deleted_byToadm_members", fields: [deleted_by], references: [id])
  crm_opportunities                                 crm_opportunities? @relation(fields: [opportunity_id], references: [id], onUpdate: NoAction)
  adm_members_crm_contracts_updated_byToadm_members adm_members?       @relation("crm_contracts_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([lead_id], map: "crm_contracts_client_id_idx")
  @@index([contract_date])
  @@index([created_by])
  @@index([deleted_at])
  @@index([effective_date])
  @@index([expiry_date])
  @@index([metadata], type: Gin)
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model crm_leads {
  id                  String              @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  full_name           String
  email               String
  phone               String?
  demo_company_name   String?
  source              String?
  status              String              @default("new")
  message             String?
  created_at          DateTime            @default(now()) @db.Timestamptz(6)
  updated_at          DateTime            @default(now()) @db.Timestamptz(6)
  country_code        String?             @db.VarChar(2)
  fleet_size          String?             @db.VarChar(50)
  current_software    String?             @db.VarChar(255)
  assigned_to         String?             @db.Uuid
  qualification_score Int?
  qualification_notes String?
  qualified_date      DateTime?           @db.Timestamptz(6)
  converted_date      DateTime?           @db.Timestamptz(6)
  utm_source          String?             @db.VarChar(255)
  utm_medium          String?             @db.VarChar(255)
  utm_campaign        String?             @db.VarChar(255)
  metadata            Json?               @default("{}")
  created_by          String?             @db.Uuid
  updated_by          String?             @db.Uuid
  deleted_at          DateTime?           @db.Timestamptz(6)
  deleted_by          String?             @db.Uuid
  deletion_reason     String?
  crm_opportunities   crm_opportunities[]

  @@index([created_at(sort: Desc)])
  @@index([deleted_at])
  @@index([status])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model crm_opportunities {
  id                                                     String          @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  lead_id                                                String          @db.Uuid
  stage                                                  String          @default("prospect")
  expected_value                                         Decimal?        @db.Decimal(18, 2)
  close_date                                             DateTime?       @db.Date
  assigned_to                                            String?         @db.Uuid
  metadata                                               Json            @default("{}")
  created_at                                             DateTime        @default(now()) @db.Timestamptz(6)
  created_by                                             String?         @db.Uuid
  updated_at                                             DateTime        @default(now()) @db.Timestamptz(6)
  updated_by                                             String?         @db.Uuid
  deleted_at                                             DateTime?       @db.Timestamptz(6)
  deleted_by                                             String?         @db.Uuid
  deletion_reason                                        String?
  probability                                            Int?
  crm_contracts                                          crm_contracts[]
  adm_members_crm_opportunities_assigned_toToadm_members adm_members?    @relation("crm_opportunities_assigned_toToadm_members", fields: [assigned_to], references: [id])
  adm_members_crm_opportunities_created_byToadm_members  adm_members?    @relation("crm_opportunities_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_crm_opportunities_deleted_byToadm_members  adm_members?    @relation("crm_opportunities_deleted_byToadm_members", fields: [deleted_by], references: [id])
  crm_leads                                              crm_leads       @relation(fields: [lead_id], references: [id], onDelete: Cascade)
  adm_members_crm_opportunities_updated_byToadm_members  adm_members?    @relation("crm_opportunities_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([assigned_to])
  @@index([close_date])
  @@index([created_by])
  @@index([deleted_at])
  @@index([lead_id])
  @@index([metadata], type: Gin)
  @@index([updated_by])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model dir_car_makes {
  // V1 columns (existing)
  id             String           @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id      String?          @db.Uuid
  name           String
  created_at     DateTime         @default(now()) @db.Timestamptz(6)
  updated_at     DateTime         @default(now()) @db.Timestamptz(6)

  // V2 columns (new) - Business data
  code              String?   @db.VarChar(50)
  country_of_origin String?   @db.Char(2)
  parent_company    String?   @db.VarChar(100)
  founded_year      Int?
  logo_url          String?
  status            String    @default("active") @db.VarChar(50)
  metadata          Json      @default("{}")

  // V2 columns (new) - Audit trail
  created_by        String?   @db.Uuid
  updated_by        String?   @db.Uuid

  // V2 columns (new) - Soft delete
  deleted_at        DateTime? @db.Timestamptz(6)
  deleted_by        String?   @db.Uuid
  deletion_reason   String?

  // V1 relations (existing)
  adm_tenants    adm_tenants?     @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  dir_car_models dir_car_models[]
  flt_vehicles   flt_vehicles[]

  // V2 relations (new) - Audit FK to adm_provider_employees
  adm_provider_employees_created_by adm_provider_employees? @relation("dir_car_makes_created_by", fields: [created_by], references: [id])
  adm_provider_employees_updated_by adm_provider_employees? @relation("dir_car_makes_updated_by", fields: [updated_by], references: [id])
  adm_provider_employees_deleted_by adm_provider_employees? @relation("dir_car_makes_deleted_by", fields: [deleted_by], references: [id])

  // V1 indexes (existing)
  @@index([created_at])
  @@index([tenant_id])
  @@index([updated_at])

  // V2 indexes (new)
  @@index([status])
  @@index([country_of_origin])
  @@index([deleted_at])
  @@index([metadata], type: Gin)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model dir_car_models {
  id                  String               @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id           String?              @db.Uuid
  make_id             String               @db.Uuid
  name                String
  created_at          DateTime             @default(now()) @db.Timestamptz(6)
  updated_at          DateTime             @default(now()) @db.Timestamptz(6)
  vehicle_class_id    String?              @db.Uuid
  dir_car_makes       dir_car_makes        @relation(fields: [make_id], references: [id], onDelete: Cascade)
  adm_tenants         adm_tenants?         @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  dir_vehicle_classes dir_vehicle_classes? @relation(fields: [vehicle_class_id], references: [id])
  flt_vehicles        flt_vehicles[]

  @@unique([tenant_id, make_id, name], map: "dir_car_models_tenant_make_name_uq")
  @@index([created_at])
  @@index([make_id])
  @@index([tenant_id])
  @@index([updated_at])
  @@index([vehicle_class_id])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model dir_country_regulations {
  country_code        String                @id @db.Char(2)
  vehicle_max_age     Int?
  min_vehicle_class   String?
  min_fare_per_trip   Decimal?              @db.Decimal(10, 2)
  min_fare_per_km     Decimal?              @db.Decimal(10, 2)
  min_fare_per_hour   Decimal?              @db.Decimal(10, 2)
  vat_rate            Decimal?              @db.Decimal(5, 2)
  currency            String                @db.Char(3)
  timezone            String
  created_at          DateTime              @default(now()) @db.Timestamptz(6)
  updated_at          DateTime              @default(now()) @db.Timestamptz(6)
  requires_vtc_card   Boolean               @default(false)
  dir_vehicle_classes dir_vehicle_classes[]

  @@index([currency])
  @@index([timezone])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model dir_platforms {
  id                    String                  @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  name                  String                  @unique(map: "dir_platforms_name_uq")
  api_config            Json?
  created_at            DateTime                @default(now()) @db.Timestamptz(6)
  updated_at            DateTime                @default(now()) @db.Timestamptz(6)
  trp_platform_accounts trp_platform_accounts[]
  trp_trips             trp_trips[]

  @@index([api_config], map: "dir_platforms_api_config_gin", type: Gin)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model dir_vehicle_classes {
  id                      String                  @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  country_code            String                  @db.Char(2)
  name                    String
  description             String?
  max_age                 Int?
  created_at              DateTime                @default(now()) @db.Timestamptz(6)
  updated_at              DateTime                @default(now()) @db.Timestamptz(6)
  dir_car_models          dir_car_models[]
  dir_country_regulations dir_country_regulations @relation(fields: [country_code], references: [country_code], onDelete: Cascade)

  @@unique([country_code, name], map: "dir_vehicle_classes_country_name_uq")
  @@index([country_code])
  @@index([created_at])
  @@index([updated_at])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model doc_documents {
  id                   String                 @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id            String                 @db.Uuid
  entity_type          String
  entity_id            String                 @db.Uuid
  document_type        String
  file_url             String
  issue_date           DateTime?              @db.Date
  expiry_date          DateTime?              @db.Date
  verified             Boolean                @default(false)
  created_at           DateTime               @default(now()) @db.Timestamptz(6)
  updated_at           DateTime               @default(now()) @db.Timestamptz(6)
  adm_tenants          adm_tenants            @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  rid_driver_documents rid_driver_documents[]

  @@index([created_at])
  @@index([document_type])
  @@index([entity_id])
  @@index([entity_type])
  @@index([expiry_date])
  @@index([tenant_id, document_type], map: "doc_documents_tenant_document_type_idx")
  @@index([tenant_id, entity_type, entity_id], map: "doc_documents_tenant_entity_idx")
  @@index([tenant_id])
  @@index([updated_at])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model fin_accounts {
  id                                               String             @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                        String             @db.Uuid
  account_name                                     String
  account_type                                     String
  currency                                         String             @db.VarChar(3)
  balance                                          Decimal            @default(0) @db.Decimal(18, 2)
  metadata                                         Json               @default("{}")
  created_at                                       DateTime           @default(now()) @db.Timestamptz(6)
  created_by                                       String?            @db.Uuid
  updated_at                                       DateTime           @default(now()) @db.Timestamptz(6)
  updated_by                                       String?            @db.Uuid
  deleted_at                                       DateTime?          @db.Timestamptz(6)
  deleted_by                                       String?            @db.Uuid
  deletion_reason                                  String?
  adm_members_fin_accounts_created_byToadm_members adm_members?       @relation("fin_accounts_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_fin_accounts_deleted_byToadm_members adm_members?       @relation("fin_accounts_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_tenants                                      adm_tenants        @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_fin_accounts_updated_byToadm_members adm_members?       @relation("fin_accounts_updated_byToadm_members", fields: [updated_by], references: [id])
  fin_transactions                                 fin_transactions[]

  @@index([account_name], map: "idx_fin_accounts_account_name")
  @@index([account_type], map: "idx_fin_accounts_account_type")
  @@index([created_by], map: "idx_fin_accounts_created_by")
  @@index([currency], map: "idx_fin_accounts_currency")
  @@index([deleted_at], map: "idx_fin_accounts_deleted_at")
  @@index([metadata], map: "idx_fin_accounts_metadata", type: Gin)
  @@index([tenant_id], map: "idx_fin_accounts_tenant_id")
  @@index([updated_by], map: "idx_fin_accounts_updated_by")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model fin_driver_payment_batches {
  id                                                             String                @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                      String                @db.Uuid
  batch_reference                                                String
  payment_date                                                   DateTime              @db.Date
  total_amount                                                   Decimal               @db.Decimal(18, 2)
  currency                                                       String                @db.VarChar(3)
  status                                                         String                @default("pending")
  metadata                                                       Json                  @default("{}")
  created_at                                                     DateTime              @default(now()) @db.Timestamptz(6)
  created_by                                                     String?               @db.Uuid
  updated_at                                                     DateTime              @default(now()) @db.Timestamptz(6)
  updated_by                                                     String?               @db.Uuid
  deleted_at                                                     DateTime?             @db.Timestamptz(6)
  deleted_by                                                     String?               @db.Uuid
  deletion_reason                                                String?
  adm_members_fin_driver_payment_batches_created_byToadm_members adm_members?          @relation("fin_driver_payment_batches_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_fin_driver_payment_batches_deleted_byToadm_members adm_members?          @relation("fin_driver_payment_batches_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_tenants                                                    adm_tenants           @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_fin_driver_payment_batches_updated_byToadm_members adm_members?          @relation("fin_driver_payment_batches_updated_byToadm_members", fields: [updated_by], references: [id])
  fin_driver_payments                                            fin_driver_payments[]

  @@index([batch_reference])
  @@index([created_by])
  @@index([deleted_at])
  @@index([metadata], type: Gin)
  @@index([payment_date(sort: Desc)])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model fin_driver_payments {
  id                                                      String                     @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                               String                     @db.Uuid
  driver_id                                               String                     @db.Uuid
  payment_batch_id                                        String                     @db.Uuid
  amount                                                  Decimal                    @db.Decimal(18, 2)
  currency                                                String                     @db.VarChar(3)
  payment_date                                            DateTime                   @db.Date
  status                                                  String                     @default("pending")
  metadata                                                Json                       @default("{}")
  created_at                                              DateTime                   @default(now()) @db.Timestamptz(6)
  created_by                                              String?                    @db.Uuid
  updated_at                                              DateTime                   @default(now()) @db.Timestamptz(6)
  updated_by                                              String?                    @db.Uuid
  deleted_at                                              DateTime?                  @db.Timestamptz(6)
  deleted_by                                              String?                    @db.Uuid
  deletion_reason                                         String?
  adm_members_fin_driver_payments_created_byToadm_members adm_members?               @relation("fin_driver_payments_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_fin_driver_payments_deleted_byToadm_members adm_members?               @relation("fin_driver_payments_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                             rid_drivers                @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  fin_driver_payment_batches                              fin_driver_payment_batches @relation(fields: [payment_batch_id], references: [id], onDelete: Cascade)
  adm_tenants                                             adm_tenants                @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_fin_driver_payments_updated_byToadm_members adm_members?               @relation("fin_driver_payments_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([metadata], type: Gin)
  @@index([payment_batch_id])
  @@index([payment_date(sort: Desc)])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model fin_toll_transactions {
  id                                                        String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                 String       @db.Uuid
  driver_id                                                 String       @db.Uuid
  vehicle_id                                                String       @db.Uuid
  toll_gate                                                 String
  toll_date                                                 DateTime     @db.Date
  amount                                                    Decimal      @db.Decimal(14, 2)
  currency                                                  String       @db.VarChar(3)
  metadata                                                  Json         @default("{}")
  created_at                                                DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                                String?      @db.Uuid
  updated_at                                                DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                                String?      @db.Uuid
  deleted_at                                                DateTime?    @db.Timestamptz(6)
  deleted_by                                                String?      @db.Uuid
  deletion_reason                                           String?
  adm_members_fin_toll_transactions_created_byToadm_members adm_members? @relation("fin_toll_transactions_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_fin_toll_transactions_deleted_byToadm_members adm_members? @relation("fin_toll_transactions_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                               rid_drivers  @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  adm_tenants                                               adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_fin_toll_transactions_updated_byToadm_members adm_members? @relation("fin_toll_transactions_updated_byToadm_members", fields: [updated_by], references: [id])
  flt_vehicles                                              flt_vehicles @relation(fields: [vehicle_id], references: [id], onDelete: Cascade)

  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([metadata], type: Gin)
  @@index([tenant_id])
  @@index([toll_date(sort: Desc)])
  @@index([updated_by])
  @@index([vehicle_id])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model fin_traffic_fines {
  id                                                    String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                             String       @db.Uuid
  driver_id                                             String       @db.Uuid
  vehicle_id                                            String       @db.Uuid
  fine_reference                                        String
  fine_date                                             DateTime     @db.Date
  fine_type                                             String
  amount                                                Decimal      @db.Decimal(14, 2)
  currency                                              String       @db.VarChar(3)
  status                                                String       @default("pending")
  metadata                                              Json         @default("{}")
  created_at                                            DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                            String?      @db.Uuid
  updated_at                                            DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                            String?      @db.Uuid
  deleted_at                                            DateTime?    @db.Timestamptz(6)
  deleted_by                                            String?      @db.Uuid
  deletion_reason                                       String?
  adm_members_fin_traffic_fines_created_byToadm_members adm_members? @relation("fin_traffic_fines_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_fin_traffic_fines_deleted_byToadm_members adm_members? @relation("fin_traffic_fines_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                           rid_drivers  @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  adm_tenants                                           adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_fin_traffic_fines_updated_byToadm_members adm_members? @relation("fin_traffic_fines_updated_byToadm_members", fields: [updated_by], references: [id])
  flt_vehicles                                          flt_vehicles @relation(fields: [vehicle_id], references: [id], onDelete: Cascade)

  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([fine_date(sort: Desc)])
  @@index([metadata], type: Gin)
  @@index([tenant_id])
  @@index([updated_by])
  @@index([vehicle_id])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model fin_transactions {
  id                                                   String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                            String       @db.Uuid
  account_id                                           String       @db.Uuid
  transaction_type                                     String
  amount                                               Decimal      @db.Decimal(18, 2)
  currency                                             String       @db.VarChar(3)
  reference                                            String
  description                                          String?
  transaction_date                                     DateTime     @db.Timestamptz(6)
  status                                               String       @default("pending")
  metadata                                             Json         @default("{}")
  created_at                                           DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                           String?      @db.Uuid
  updated_at                                           DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                           String?      @db.Uuid
  deleted_at                                           DateTime?    @db.Timestamptz(6)
  deleted_by                                           String?      @db.Uuid
  deletion_reason                                      String?
  fin_accounts                                         fin_accounts @relation(fields: [account_id], references: [id], onDelete: Cascade)
  adm_members_fin_transactions_created_byToadm_members adm_members? @relation("fin_transactions_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_fin_transactions_deleted_byToadm_members adm_members? @relation("fin_transactions_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_tenants                                          adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_fin_transactions_updated_byToadm_members adm_members? @relation("fin_transactions_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([account_id])
  @@index([created_by])
  @@index([deleted_at])
  @@index([metadata], type: Gin)
  @@index([tenant_id])
  @@index([transaction_date(sort: Desc)])
  @@index([updated_by])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model flt_vehicle_assignments {
  id                                                          String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                   String       @db.Uuid
  driver_id                                                   String       @db.Uuid
  vehicle_id                                                  String       @db.Uuid
  start_date                                                  DateTime     @db.Date
  end_date                                                    DateTime?    @db.Date
  assignment_type                                             String       @default("permanent") @db.VarChar(50)
  metadata                                                    Json         @default("{}")
  status                                                      String       @default("active") @db.VarChar(50)
  created_at                                                  DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                                  String?      @db.Uuid
  updated_at                                                  DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                                  String?      @db.Uuid
  deleted_at                                                  DateTime?    @db.Timestamptz(6)
  deleted_by                                                  String?      @db.Uuid
  deletion_reason                                             String?
  adm_members_flt_vehicle_assignments_created_byToadm_members adm_members? @relation("flt_vehicle_assignments_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_flt_vehicle_assignments_deleted_byToadm_members adm_members? @relation("flt_vehicle_assignments_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                                 rid_drivers  @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  adm_tenants                                                 adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_flt_vehicle_assignments_updated_byToadm_members adm_members? @relation("flt_vehicle_assignments_updated_byToadm_members", fields: [updated_by], references: [id])
  flt_vehicles                                                flt_vehicles @relation(fields: [vehicle_id], references: [id], onDelete: Cascade)

  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([end_date])
  @@index([metadata], type: Gin)
  @@index([start_date])
  @@index([tenant_id])
  @@index([updated_by])
  @@index([vehicle_id])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model flt_vehicle_events {
  id                                                     String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                              String       @db.Uuid
  vehicle_id                                             String       @db.Uuid
  event_type                                             String
  event_date                                             DateTime     @db.Timestamptz(6)
  severity                                               String?
  downtime_hours                                         Int?
  cost_amount                                            Decimal?     @db.Decimal(10, 2)
  currency                                               String       @default("EUR") @db.Char(3)
  details                                                Json         @default("{}")
  notes                                                  String?
  created_at                                             DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                             String?      @db.Uuid
  updated_at                                             DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                             String?      @db.Uuid
  deleted_at                                             DateTime?    @db.Timestamptz(6)
  deleted_by                                             String?      @db.Uuid
  deletion_reason                                        String?
  adm_members_flt_vehicle_events_created_byToadm_members adm_members? @relation("flt_vehicle_events_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_flt_vehicle_events_deleted_byToadm_members adm_members? @relation("flt_vehicle_events_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_tenants                                            adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_flt_vehicle_events_updated_byToadm_members adm_members? @relation("flt_vehicle_events_updated_byToadm_members", fields: [updated_by], references: [id])
  flt_vehicles                                           flt_vehicles @relation(fields: [vehicle_id], references: [id], onDelete: Cascade)

  @@index([created_at(sort: Desc)])
  @@index([created_by])
  @@index([deleted_at])
  @@index([details], type: Gin)
  @@index([event_date])
  @@index([event_type])
  @@index([tenant_id])
  @@index([updated_by])
  @@index([vehicle_id])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model flt_vehicle_expenses {
  id                                                       String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                String       @db.Uuid
  vehicle_id                                               String       @db.Uuid
  driver_id                                                String?      @db.Uuid
  ride_id                                                  String?      @db.Uuid
  expense_date                                             DateTime     @db.Date
  expense_category                                         String
  amount                                                   Decimal      @db.Decimal(10, 2)
  currency                                                 String       @default("EUR") @db.Char(3)
  payment_method                                           String?
  receipt_url                                              String?
  odometer_reading                                         Int?
  quantity                                                 Decimal?     @db.Decimal(10, 2)
  unit_price                                               Decimal?     @db.Decimal(10, 2)
  location                                                 String?
  vendor                                                   String?
  description                                              String?
  reimbursed                                               Boolean      @default(false)
  reimbursed_at                                            DateTime?    @db.Timestamptz(6)
  reimbursed_in_batch_id                                   String?      @db.Uuid
  notes                                                    String?
  metadata                                                 Json         @default("{}")
  created_at                                               DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                               String?      @db.Uuid
  updated_at                                               DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                               String?      @db.Uuid
  deleted_at                                               DateTime?    @db.Timestamptz(6)
  deleted_by                                               String?      @db.Uuid
  deletion_reason                                          String?
  adm_members_flt_vehicle_expenses_created_byToadm_members adm_members? @relation("flt_vehicle_expenses_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_flt_vehicle_expenses_deleted_byToadm_members adm_members? @relation("flt_vehicle_expenses_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                              rid_drivers? @relation(fields: [driver_id], references: [id], onUpdate: NoAction)
  trp_trips                                                trp_trips?   @relation(fields: [ride_id], references: [id], onUpdate: NoAction)
  adm_tenants                                              adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_flt_vehicle_expenses_updated_byToadm_members adm_members? @relation("flt_vehicle_expenses_updated_byToadm_members", fields: [updated_by], references: [id])
  flt_vehicles                                             flt_vehicles @relation(fields: [vehicle_id], references: [id], onDelete: Cascade)

  @@index([created_at(sort: Desc)])
  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([expense_category])
  @@index([expense_date])
  @@index([metadata], type: Gin)
  @@index([ride_id])
  @@index([tenant_id])
  @@index([updated_by])
  @@index([vehicle_id])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model flt_vehicle_insurances {
  id                                                         String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                  String       @db.Uuid
  vehicle_id                                                 String       @db.Uuid
  provider_name                                              String
  policy_number                                              String
  policy_type                                                String
  coverage_amount                                            Decimal?     @db.Decimal(12, 2)
  currency                                                   String       @default("EUR") @db.Char(3)
  deductible_amount                                          Decimal?     @db.Decimal(10, 2)
  premium_amount                                             Decimal      @db.Decimal(10, 2)
  premium_frequency                                          String       @default("annual")
  start_date                                                 DateTime     @db.Date
  end_date                                                   DateTime     @db.Date
  is_active                                                  Boolean      @default(true)
  auto_renew                                                 Boolean      @default(false)
  contact_name                                               String?
  contact_phone                                              String?
  contact_email                                              String?
  document_url                                               String?
  claim_count                                                Int          @default(0)
  last_claim_date                                            DateTime?    @db.Date
  notes                                                      String?
  metadata                                                   Json         @default("{}")
  created_at                                                 DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                                 String?      @db.Uuid
  updated_at                                                 DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                                 String?      @db.Uuid
  deleted_at                                                 DateTime?    @db.Timestamptz(6)
  deleted_by                                                 String?      @db.Uuid
  deletion_reason                                            String?
  adm_members_flt_vehicle_insurances_created_byToadm_members adm_members? @relation("flt_vehicle_insurances_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_flt_vehicle_insurances_deleted_byToadm_members adm_members? @relation("flt_vehicle_insurances_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_tenants                                                adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_flt_vehicle_insurances_updated_byToadm_members adm_members? @relation("flt_vehicle_insurances_updated_byToadm_members", fields: [updated_by], references: [id])
  flt_vehicles                                               flt_vehicles @relation(fields: [vehicle_id], references: [id], onDelete: Cascade)

  @@index([created_at(sort: Desc)])
  @@index([metadata], type: Gin)
  @@index([policy_number])
  @@index([policy_type])
  @@index([tenant_id])
  @@index([vehicle_id])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model flt_vehicle_maintenance {
  id                                                          String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                   String       @db.Uuid
  vehicle_id                                                  String       @db.Uuid
  maintenance_type                                            String
  scheduled_date                                              DateTime     @db.Date
  completed_date                                              DateTime?    @db.Date
  odometer_reading                                            Int?
  next_service_km                                             Int?
  next_service_date                                           DateTime?    @db.Date
  provider_name                                               String?
  provider_contact                                            String?
  cost_amount                                                 Decimal?     @db.Decimal(10, 2)
  currency                                                    String       @default("EUR") @db.Char(3)
  invoice_reference                                           String?
  parts_replaced                                              String?
  notes                                                       String?
  status                                                      String       @default("scheduled")
  metadata                                                    Json         @default("{}")
  created_at                                                  DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                                  String?      @db.Uuid
  updated_at                                                  DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                                  String?      @db.Uuid
  adm_members_flt_vehicle_maintenance_created_byToadm_members adm_members? @relation("flt_vehicle_maintenance_created_byToadm_members", fields: [created_by], references: [id])
  adm_tenants                                                 adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_flt_vehicle_maintenance_updated_byToadm_members adm_members? @relation("flt_vehicle_maintenance_updated_byToadm_members", fields: [updated_by], references: [id])
  flt_vehicles                                                flt_vehicles @relation(fields: [vehicle_id], references: [id], onDelete: Cascade)

  @@index([created_at(sort: Desc)])
  @@index([created_by])
  @@index([maintenance_type])
  @@index([metadata], type: Gin)
  @@index([scheduled_date], map: "flt_vehicle_maintenance_scheduled_date_active_idx")
  @@index([status], map: "flt_vehicle_maintenance_status_active_idx")
  @@index([tenant_id])
  @@index([updated_by])
  @@index([vehicle_id])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model flt_vehicles {
  id                                               String                      @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                        String                      @db.Uuid
  make_id                                          String                      @db.Uuid
  model_id                                         String                      @db.Uuid
  license_plate                                    String
  vin                                              String?
  year                                             Int
  color                                            String?
  seats                                            Int                         @default(4)
  vehicle_class                                    String?
  fuel_type                                        String?
  transmission                                     String?
  registration_date                                DateTime?                   @db.Date
  insurance_number                                 String?
  insurance_expiry                                 DateTime?                   @db.Date
  last_inspection                                  DateTime?                   @db.Date
  next_inspection                                  DateTime?                   @db.Date
  odometer                                         Int?
  ownership_type                                   String                      @default("owned")
  metadata                                         Json                        @default("{}")
  status                                           String                      @default("pending")
  created_at                                       DateTime                    @default(now()) @db.Timestamptz(6)
  created_by                                       String?                     @db.Uuid
  updated_at                                       DateTime                    @default(now()) @db.Timestamptz(6)
  updated_by                                       String?                     @db.Uuid
  deleted_at                                       DateTime?                   @db.Timestamptz(6)
  deleted_by                                       String?                     @db.Uuid
  deletion_reason                                  String?
  fin_toll_transactions                            fin_toll_transactions[]
  fin_traffic_fines                                fin_traffic_fines[]
  flt_vehicle_assignments                          flt_vehicle_assignments[]
  flt_vehicle_events                               flt_vehicle_events[]
  flt_vehicle_expenses                             flt_vehicle_expenses[]
  flt_vehicle_insurances                           flt_vehicle_insurances[]
  flt_vehicle_maintenance                          flt_vehicle_maintenance[]
  adm_members_flt_vehicles_created_byToadm_members adm_members?                @relation("flt_vehicles_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_flt_vehicles_deleted_byToadm_members adm_members?                @relation("flt_vehicles_deleted_byToadm_members", fields: [deleted_by], references: [id])
  dir_car_makes                                    dir_car_makes               @relation(fields: [make_id], references: [id])
  dir_car_models                                   dir_car_models              @relation(fields: [model_id], references: [id])
  adm_tenants                                      adm_tenants                 @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_flt_vehicles_updated_byToadm_members adm_members?                @relation("flt_vehicles_updated_byToadm_members", fields: [updated_by], references: [id])
  sch_maintenance_schedules                        sch_maintenance_schedules[]
  trp_trips                                        trp_trips[]

  @@index([created_by])
  @@index([deleted_at])
  @@index([license_plate])
  @@index([make_id])
  @@index([metadata], type: Gin)
  @@index([model_id])
  @@index([next_inspection])
  @@index([tenant_id])
  @@index([updated_by])
  @@index([vin])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model rev_driver_revenues {
  id                                                      String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                               String       @db.Uuid
  driver_id                                               String       @db.Uuid
  period_start                                            DateTime     @db.Date
  period_end                                              DateTime     @db.Date
  total_revenue                                           Decimal      @default(0) @db.Decimal(18, 2)
  commission_amount                                       Decimal      @default(0) @db.Decimal(18, 2)
  net_revenue                                             Decimal      @default(0) @db.Decimal(18, 2)
  metadata                                                Json         @default("{}")
  created_at                                              DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                              String?      @db.Uuid
  updated_at                                              DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                              String?      @db.Uuid
  deleted_at                                              DateTime?    @db.Timestamptz(6)
  deleted_by                                              String?      @db.Uuid
  deletion_reason                                         String?
  adm_members_rev_driver_revenues_created_byToadm_members adm_members? @relation("rev_driver_revenues_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_rev_driver_revenues_deleted_byToadm_members adm_members? @relation("rev_driver_revenues_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                             rid_drivers  @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  adm_tenants                                             adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_rev_driver_revenues_updated_byToadm_members adm_members? @relation("rev_driver_revenues_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([metadata], type: Gin)
  @@index([period_end(sort: Desc)])
  @@index([period_start(sort: Desc)])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model rev_reconciliations {
  id                                                      String              @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                               String              @db.Uuid
  import_id                                               String              @db.Uuid
  reconciliation_date                                     DateTime            @db.Date
  status                                                  String              @default("pending")
  notes                                                   String?
  metadata                                                Json                @default("{}")
  created_at                                              DateTime            @default(now()) @db.Timestamptz(6)
  created_by                                              String?             @db.Uuid
  updated_at                                              DateTime            @default(now()) @db.Timestamptz(6)
  updated_by                                              String?             @db.Uuid
  deleted_at                                              DateTime?           @db.Timestamptz(6)
  deleted_by                                              String?             @db.Uuid
  deletion_reason                                         String?
  adm_members_rev_reconciliations_created_byToadm_members adm_members?        @relation("rev_reconciliations_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_rev_reconciliations_deleted_byToadm_members adm_members?        @relation("rev_reconciliations_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rev_revenue_imports                                     rev_revenue_imports @relation(fields: [import_id], references: [id], onDelete: Cascade)
  adm_tenants                                             adm_tenants         @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_rev_reconciliations_updated_byToadm_members adm_members?        @relation("rev_reconciliations_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([import_id])
  @@index([metadata], type: Gin)
  @@index([reconciliation_date(sort: Desc)])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model rev_revenue_imports {
  id                                                      String                @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                               String                @db.Uuid
  import_reference                                        String
  import_date                                             DateTime              @db.Date
  status                                                  String                @default("pending")
  total_revenue                                           Decimal               @default(0) @db.Decimal(18, 2)
  currency                                                String                @db.VarChar(3)
  metadata                                                Json                  @default("{}")
  created_at                                              DateTime              @default(now()) @db.Timestamptz(6)
  created_by                                              String?               @db.Uuid
  updated_at                                              DateTime              @default(now()) @db.Timestamptz(6)
  updated_by                                              String?               @db.Uuid
  deleted_at                                              DateTime?             @db.Timestamptz(6)
  deleted_by                                              String?               @db.Uuid
  deletion_reason                                         String?
  rev_reconciliations                                     rev_reconciliations[]
  adm_members_rev_revenue_imports_created_byToadm_members adm_members?          @relation("rev_revenue_imports_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_rev_revenue_imports_deleted_byToadm_members adm_members?          @relation("rev_revenue_imports_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_tenants                                             adm_tenants           @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_rev_revenue_imports_updated_byToadm_members adm_members?          @relation("rev_revenue_imports_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([import_date(sort: Desc)])
  @@index([metadata], type: Gin)
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model rid_driver_blacklists {
  id                                                        String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                 String       @db.Uuid
  driver_id                                                 String       @db.Uuid
  reason                                                    String
  start_date                                                DateTime     @db.Timestamptz(6)
  end_date                                                  DateTime?    @db.Timestamptz(6)
  status                                                    String       @default("active")
  metadata                                                  Json         @default("{}")
  created_at                                                DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                                String?      @db.Uuid
  updated_at                                                DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                                String?      @db.Uuid
  deleted_at                                                DateTime?    @db.Timestamptz(6)
  deleted_by                                                String?      @db.Uuid
  deletion_reason                                           String?
  adm_members_rid_driver_blacklists_created_byToadm_members adm_members? @relation("rid_driver_blacklists_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_rid_driver_blacklists_deleted_byToadm_members adm_members? @relation("rid_driver_blacklists_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                               rid_drivers  @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  adm_tenants                                               adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_rid_driver_blacklists_updated_byToadm_members adm_members? @relation("rid_driver_blacklists_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([end_date])
  @@index([metadata], map: "rid_driver_blacklists_metadata_gin", type: Gin)
  @@index([start_date])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model rid_driver_cooperation_terms {
  id                                                               String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                        String       @db.Uuid
  driver_id                                                        String       @db.Uuid
  terms_version                                                    String
  accepted_at                                                      DateTime?    @db.Timestamptz(6)
  effective_date                                                   DateTime?    @db.Date
  expiry_date                                                      DateTime?    @db.Date
  status                                                           String       @default("pending")
  metadata                                                         Json         @default("{}")
  created_at                                                       DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                                       String?      @db.Uuid
  updated_at                                                       DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                                       String?      @db.Uuid
  deleted_at                                                       DateTime?    @db.Timestamptz(6)
  deleted_by                                                       String?      @db.Uuid
  deletion_reason                                                  String?
  adm_members_rid_driver_cooperation_terms_created_byToadm_members adm_members? @relation("rid_driver_cooperation_terms_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_rid_driver_cooperation_terms_deleted_byToadm_members adm_members? @relation("rid_driver_cooperation_terms_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                                      rid_drivers  @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  adm_tenants                                                      adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_rid_driver_cooperation_terms_updated_byToadm_members adm_members? @relation("rid_driver_cooperation_terms_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([accepted_at])
  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([effective_date])
  @@index([expiry_date])
  @@index([metadata], map: "rid_driver_cooperation_terms_metadata_gin", type: Gin)
  @@index([tenant_id])
  @@index([terms_version])
  @@index([updated_by])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model rid_driver_documents {
  id                                                        String        @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                 String        @db.Uuid
  driver_id                                                 String        @db.Uuid
  document_id                                               String        @db.Uuid
  document_type                                             String
  expiry_date                                               DateTime?     @db.Date
  verified                                                  Boolean       @default(false)
  verified_by                                               String?       @db.Uuid
  verified_at                                               DateTime?     @db.Timestamptz(6)
  created_at                                                DateTime      @default(now()) @db.Timestamptz(6)
  created_by                                                String?       @db.Uuid
  updated_at                                                DateTime      @default(now()) @db.Timestamptz(6)
  updated_by                                                String?       @db.Uuid
  deleted_at                                                DateTime?     @db.Timestamptz(6)
  deleted_by                                                String?       @db.Uuid
  deletion_reason                                           String?
  adm_members_rid_driver_documents_created_byToadm_members  adm_members?  @relation("rid_driver_documents_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_rid_driver_documents_deleted_byToadm_members  adm_members?  @relation("rid_driver_documents_deleted_byToadm_members", fields: [deleted_by], references: [id])
  doc_documents                                             doc_documents @relation(fields: [document_id], references: [id], onDelete: Cascade)
  rid_drivers                                               rid_drivers   @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  adm_tenants                                               adm_tenants   @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_rid_driver_documents_updated_byToadm_members  adm_members?  @relation("rid_driver_documents_updated_byToadm_members", fields: [updated_by], references: [id])
  adm_members_rid_driver_documents_verified_byToadm_members adm_members?  @relation("rid_driver_documents_verified_byToadm_members", fields: [verified_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([document_id])
  @@index([document_type])
  @@index([driver_id])
  @@index([expiry_date])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model rid_driver_performances {
  id                                                          String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                   String       @db.Uuid
  driver_id                                                   String       @db.Uuid
  period_start                                                DateTime     @db.Date
  period_end                                                  DateTime     @db.Date
  trips_completed                                             Int          @default(0)
  trips_cancelled                                             Int          @default(0)
  on_time_rate                                                Decimal?     @db.Decimal(5, 2)
  avg_rating                                                  Decimal?     @db.Decimal(3, 2)
  incidents_count                                             Int          @default(0)
  earnings_total                                              Decimal      @default(0) @db.Decimal(12, 2)
  hours_online                                                Decimal?     @db.Decimal(7, 2)
  metadata                                                    Json         @default("{}")
  created_at                                                  DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                                  String?      @db.Uuid
  updated_at                                                  DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                                  String?      @db.Uuid
  deleted_at                                                  DateTime?    @db.Timestamptz(6)
  deleted_by                                                  String?      @db.Uuid
  deletion_reason                                             String?
  adm_members_rid_driver_performances_created_byToadm_members adm_members? @relation("rid_driver_performances_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_rid_driver_performances_deleted_byToadm_members adm_members? @relation("rid_driver_performances_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                                 rid_drivers  @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  adm_tenants                                                 adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_rid_driver_performances_updated_byToadm_members adm_members? @relation("rid_driver_performances_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([metadata], map: "rid_driver_performances_metadata_gin", type: Gin)
  @@index([period_end])
  @@index([period_start])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model rid_driver_requests {
  id                                                      String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                               String       @db.Uuid
  driver_id                                               String       @db.Uuid
  request_type                                            String
  request_date                                            DateTime     @db.Date
  details                                                 Json         @default("{}")
  status                                                  String       @default("pending")
  resolution_notes                                        String?
  created_at                                              DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                              String?      @db.Uuid
  updated_at                                              DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                              String?      @db.Uuid
  deleted_at                                              DateTime?    @db.Timestamptz(6)
  deleted_by                                              String?      @db.Uuid
  deletion_reason                                         String?
  adm_members_rid_driver_requests_created_byToadm_members adm_members? @relation("rid_driver_requests_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_rid_driver_requests_deleted_byToadm_members adm_members? @relation("rid_driver_requests_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                             rid_drivers  @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  adm_tenants                                             adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_rid_driver_requests_updated_byToadm_members adm_members? @relation("rid_driver_requests_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([details], map: "rid_driver_requests_details_gin", type: Gin)
  @@index([driver_id])
  @@index([request_date])
  @@index([request_type])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model rid_driver_training {
  id                                                      String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                               String       @db.Uuid
  driver_id                                               String       @db.Uuid
  training_name                                           String
  provider                                                String?
  status                                                  String       @default("planned")
  assigned_at                                             DateTime?    @db.Timestamptz(6)
  due_at                                                  DateTime?    @db.Timestamptz(6)
  completed_at                                            DateTime?    @db.Timestamptz(6)
  score                                                   Decimal?     @db.Decimal(5, 2)
  certificate_url                                         String?
  metadata                                                Json         @default("{}")
  created_at                                              DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                              String?      @db.Uuid
  updated_at                                              DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                              String?      @db.Uuid
  deleted_at                                              DateTime?    @db.Timestamptz(6)
  deleted_by                                              String?      @db.Uuid
  deletion_reason                                         String?
  adm_members_rid_driver_training_created_byToadm_members adm_members? @relation("rid_driver_training_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_rid_driver_training_deleted_byToadm_members adm_members? @relation("rid_driver_training_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                             rid_drivers  @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  adm_tenants                                             adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_rid_driver_training_updated_byToadm_members adm_members? @relation("rid_driver_training_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([due_at])
  @@index([metadata], map: "rid_driver_training_metadata_gin", type: Gin)
  @@index([tenant_id])
  @@index([training_name])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model rid_drivers {
  id                           String                         @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                    String                         @db.Uuid
  first_name                   String
  last_name                    String
  email                        String
  phone                        String
  license_number               String
  license_issue_date           DateTime?                      @db.Date
  license_expiry_date          DateTime?                      @db.Date
  professional_card_no         String?
  professional_expiry          DateTime?                      @db.Date
  driver_status                String                         @default("active") @db.VarChar(50)
  created_at                   DateTime                       @default(now()) @db.Timestamptz(6)
  updated_at                   DateTime                       @default(now()) @db.Timestamptz(6)
  deleted_at                   DateTime?                      @db.Timestamptz(6)
  rating                       Decimal?                       @db.Decimal
  notes                        String?
  date_of_birth                DateTime?                      @db.Date
  gender                       String?
  nationality                  String?                        @db.Char(2)
  hire_date                    DateTime?                      @db.Date
  employment_status            String                         @default("active")
  cooperation_type             String?
  emergency_contact_name       String?
  emergency_contact_phone      String?
  fin_driver_payments          fin_driver_payments[]
  fin_toll_transactions        fin_toll_transactions[]
  fin_traffic_fines            fin_traffic_fines[]
  flt_vehicle_assignments      flt_vehicle_assignments[]
  flt_vehicle_expenses         flt_vehicle_expenses[]
  rev_driver_revenues          rev_driver_revenues[]
  rid_driver_blacklists        rid_driver_blacklists[]
  rid_driver_cooperation_terms rid_driver_cooperation_terms[]
  rid_driver_documents         rid_driver_documents[]
  rid_driver_languages         rid_driver_languages[]
  rid_driver_performances      rid_driver_performances[]
  rid_driver_requests          rid_driver_requests[]
  rid_driver_training          rid_driver_training[]
  adm_tenants                  adm_tenants                    @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  sch_shifts                   sch_shifts[]
  trp_trips                    trp_trips[]

  @@index([created_at(sort: Desc)])
  @@index([deleted_at])
  @@index([driver_status])
  @@index([email])
  @@index([first_name])
  @@index([last_name])
  @@index([license_number])
  @@index([phone])
  @@index([tenant_id])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sch_goals {
  id                                            String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                     String       @db.Uuid
  goal_type                                     String
  target_value                                  Decimal      @db.Decimal
  period_start                                  DateTime     @db.Date
  period_end                                    DateTime     @db.Date
  assigned_to                                   String       @db.Uuid
  status                                        String       @default("active")
  metadata                                      Json         @default("{}")
  created_at                                    DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                    String?      @db.Uuid
  updated_at                                    DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                    String?      @db.Uuid
  deleted_at                                    DateTime?    @db.Timestamptz(6)
  deleted_by                                    String?      @db.Uuid
  deletion_reason                               String?
  adm_members_sch_goals_created_byToadm_members adm_members? @relation("sch_goals_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_sch_goals_deleted_byToadm_members adm_members? @relation("sch_goals_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_tenants                                   adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_sch_goals_updated_byToadm_members adm_members? @relation("sch_goals_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([assigned_to])
  @@index([created_by])
  @@index([deleted_at])
  @@index([goal_type])
  @@index([metadata], map: "sch_goals_metadata_gin", type: Gin)
  @@index([period_end])
  @@index([period_start])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sch_maintenance_schedules {
  id                                                            String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                     String       @db.Uuid
  vehicle_id                                                    String       @db.Uuid
  scheduled_date                                                DateTime     @db.Date
  maintenance_type                                              String
  status                                                        String       @default("scheduled")
  metadata                                                      Json         @default("{}")
  created_at                                                    DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                                    String?      @db.Uuid
  updated_at                                                    DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                                    String?      @db.Uuid
  deleted_at                                                    DateTime?    @db.Timestamptz(6)
  deleted_by                                                    String?      @db.Uuid
  deletion_reason                                               String?
  adm_members_sch_maintenance_schedules_created_byToadm_members adm_members? @relation("sch_maintenance_schedules_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_sch_maintenance_schedules_deleted_byToadm_members adm_members? @relation("sch_maintenance_schedules_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_tenants                                                   adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_sch_maintenance_schedules_updated_byToadm_members adm_members? @relation("sch_maintenance_schedules_updated_byToadm_members", fields: [updated_by], references: [id])
  flt_vehicles                                                  flt_vehicles @relation(fields: [vehicle_id], references: [id], onDelete: Cascade)

  @@index([created_by])
  @@index([deleted_at])
  @@index([maintenance_type])
  @@index([metadata], map: "sch_maintenance_schedules_metadata_gin", type: Gin)
  @@index([scheduled_date])
  @@index([tenant_id])
  @@index([updated_by])
  @@index([vehicle_id])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sch_shifts {
  id                                             String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                      String       @db.Uuid
  driver_id                                      String       @db.Uuid
  start_time                                     DateTime     @db.Timestamptz(6)
  end_time                                       DateTime     @db.Timestamptz(6)
  status                                         String       @default("scheduled")
  metadata                                       Json         @default("{}")
  created_at                                     DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                     String?      @db.Uuid
  updated_at                                     DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                     String?      @db.Uuid
  deleted_at                                     DateTime?    @db.Timestamptz(6)
  deleted_by                                     String?      @db.Uuid
  deletion_reason                                String?
  adm_members_sch_shifts_created_byToadm_members adm_members? @relation("sch_shifts_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_sch_shifts_deleted_byToadm_members adm_members? @relation("sch_shifts_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                    rid_drivers  @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  adm_tenants                                    adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_sch_shifts_updated_byToadm_members adm_members? @relation("sch_shifts_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([end_time])
  @@index([metadata], map: "sch_shifts_metadata_gin", type: Gin)
  @@index([start_time])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sch_tasks {
  id                                            String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                     String       @db.Uuid
  task_type                                     String
  description                                   String
  target_id                                     String       @db.Uuid
  due_at                                        DateTime?    @db.Timestamptz(6)
  status                                        String       @default("pending")
  metadata                                      Json         @default("{}")
  created_at                                    DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                    String?      @db.Uuid
  updated_at                                    DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                    String?      @db.Uuid
  deleted_at                                    DateTime?    @db.Timestamptz(6)
  deleted_by                                    String?      @db.Uuid
  deletion_reason                               String?
  adm_members_sch_tasks_created_byToadm_members adm_members? @relation("sch_tasks_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_sch_tasks_deleted_byToadm_members adm_members? @relation("sch_tasks_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_tenants                                   adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_sch_tasks_updated_byToadm_members adm_members? @relation("sch_tasks_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_by], map: "idx_sch_tasks_created_by")
  @@index([deleted_at], map: "idx_sch_tasks_deleted_at")
  @@index([due_at], map: "idx_sch_tasks_due_at")
  @@index([metadata], map: "idx_sch_tasks_metadata", type: Gin)
  @@index([target_id], map: "idx_sch_tasks_target_id")
  @@index([tenant_id], map: "idx_sch_tasks_tenant_id")
  @@index([updated_by], map: "idx_sch_tasks_updated_by")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sup_customer_feedback {
  id             String      @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id      String      @db.Uuid
  submitted_by   String      @db.Uuid
  submitter_type String      @db.VarChar(50)
  feedback_text  String
  rating         Int
  metadata       Json?       @default("{}")
  created_by     String?     @db.Uuid
  created_at     DateTime    @default(now()) @db.Timestamptz(6)
  updated_by     String?     @db.Uuid
  updated_at     DateTime    @default(now()) @db.Timestamptz(6)
  deleted_by     String?     @db.Uuid
  deleted_at     DateTime?   @db.Timestamptz(6)
  adm_tenants    adm_tenants @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([metadata], type: Gin)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sup_ticket_messages {
  id                                                      String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  ticket_id                                               String       @db.Uuid
  sender_id                                               String       @db.Uuid
  message_body                                            String
  sent_at                                                 DateTime     @default(now()) @db.Timestamptz(6)
  metadata                                                Json         @default("{}")
  created_at                                              DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                              String?      @db.Uuid
  updated_at                                              DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                              String?      @db.Uuid
  deleted_at                                              DateTime?    @db.Timestamptz(6)
  deleted_by                                              String?      @db.Uuid
  deletion_reason                                         String?
  adm_members_sup_ticket_messages_created_byToadm_members adm_members? @relation("sup_ticket_messages_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_sup_ticket_messages_deleted_byToadm_members adm_members? @relation("sup_ticket_messages_deleted_byToadm_members", fields: [deleted_by], references: [id])
  sup_tickets                                             sup_tickets  @relation(fields: [ticket_id], references: [id], onDelete: Cascade)
  adm_members_sup_ticket_messages_updated_byToadm_members adm_members? @relation("sup_ticket_messages_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([metadata], type: Gin)
  @@index([sent_at])
  @@index([ticket_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sup_tickets {
  id                                              String                  @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                       String                  @db.Uuid
  raised_by                                       String                  @db.Uuid
  subject                                         String
  description                                     String
  status                                          String                  @default("open")
  priority                                        String                  @default("medium")
  assigned_to                                     String?                 @db.Uuid
  metadata                                        Json                    @default("{}")
  created_at                                      DateTime                @default(now()) @db.Timestamptz(6)
  created_by                                      String?                 @db.Uuid
  updated_at                                      DateTime                @default(now()) @db.Timestamptz(6)
  updated_by                                      String?                 @db.Uuid
  deleted_at                                      DateTime?               @db.Timestamptz(6)
  deleted_by                                      String?                 @db.Uuid
  deletion_reason                                 String?
  sup_ticket_messages                             sup_ticket_messages[]
  adm_provider_employees                          adm_provider_employees? @relation(fields: [assigned_to], references: [id])
  adm_members_sup_tickets_created_byToadm_members adm_members?            @relation("sup_tickets_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_sup_tickets_deleted_byToadm_members adm_members?            @relation("sup_tickets_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_tenants                                     adm_tenants             @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_sup_tickets_updated_byToadm_members adm_members?            @relation("sup_tickets_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([assigned_to])
  @@index([created_at])
  @@index([created_by])
  @@index([deleted_at])
  @@index([metadata], type: Gin)
  @@index([raised_by])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model trp_client_invoices {
  id                                                      String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                               String       @db.Uuid
  client_id                                               String       @db.Uuid
  invoice_number                                          String
  invoice_date                                            DateTime     @db.Date
  due_date                                                DateTime     @db.Date
  total_amount                                            Decimal      @db.Decimal(14, 2)
  currency                                                String       @db.VarChar(3)
  status                                                  String       @default("draft")
  metadata                                                Json         @default("{}")
  created_at                                              DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                              String?      @db.Uuid
  updated_at                                              DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                              String?      @db.Uuid
  deleted_at                                              DateTime?    @db.Timestamptz(6)
  deleted_by                                              String?      @db.Uuid
  deletion_reason                                         String?
  adm_members_trp_client_invoices_created_byToadm_members adm_members? @relation("trp_client_invoices_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_trp_client_invoices_deleted_byToadm_members adm_members? @relation("trp_client_invoices_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_tenants                                             adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_trp_client_invoices_updated_byToadm_members adm_members? @relation("trp_client_invoices_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([client_id], map: "idx_trp_client_invoices_client_id")
  @@index([created_by], map: "idx_trp_client_invoices_created_by")
  @@index([deleted_at], map: "idx_trp_client_invoices_deleted_at")
  @@index([due_date], map: "idx_trp_client_invoices_due_date")
  @@index([invoice_date], map: "idx_trp_client_invoices_invoice_date")
  @@index([metadata], map: "idx_trp_client_invoices_metadata", type: Gin)
  @@index([tenant_id], map: "idx_trp_client_invoices_tenant_id")
  @@index([updated_by], map: "idx_trp_client_invoices_updated_by")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model trp_platform_accounts {
  id                                                        String        @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                 String        @db.Uuid
  platform_id                                               String        @db.Uuid
  account_identifier                                        String
  api_key                                                   String?
  metadata                                                  Json          @default("{}")
  created_at                                                DateTime      @default(now()) @db.Timestamptz(6)
  created_by                                                String?       @db.Uuid
  updated_at                                                DateTime      @default(now()) @db.Timestamptz(6)
  updated_by                                                String?       @db.Uuid
  deleted_at                                                DateTime?     @db.Timestamptz(6)
  deleted_by                                                String?       @db.Uuid
  deletion_reason                                           String?
  adm_members_trp_platform_accounts_created_byToadm_members adm_members?  @relation("trp_platform_accounts_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_trp_platform_accounts_deleted_byToadm_members adm_members?  @relation("trp_platform_accounts_deleted_byToadm_members", fields: [deleted_by], references: [id])
  dir_platforms                                             dir_platforms @relation(fields: [platform_id], references: [id], onDelete: Cascade)
  adm_tenants                                               adm_tenants   @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_trp_platform_accounts_updated_byToadm_members adm_members?  @relation("trp_platform_accounts_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([account_identifier], map: "idx_trp_platform_accounts_account_identifier")
  @@index([created_by], map: "idx_trp_platform_accounts_created_by")
  @@index([deleted_at], map: "idx_trp_platform_accounts_deleted_at")
  @@index([metadata], map: "idx_trp_platform_accounts_metadata", type: Gin)
  @@index([platform_id], map: "idx_trp_platform_accounts_platform_id")
  @@index([tenant_id], map: "idx_trp_platform_accounts_tenant_id")
  @@index([updated_by], map: "idx_trp_platform_accounts_updated_by")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model trp_settlements {
  id                                                  String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                           String       @db.Uuid
  trip_id                                             String       @db.Uuid
  settlement_reference                                String
  amount                                              Decimal      @db.Decimal(14, 2)
  currency                                            String       @db.VarChar(3)
  platform_commission                                 Decimal      @db.Decimal(14, 2)
  net_amount                                          Decimal      @db.Decimal(14, 2)
  settlement_date                                     DateTime     @db.Date
  status                                              String       @default("pending")
  metadata                                            Json         @default("{}")
  created_at                                          DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                          String?      @db.Uuid
  updated_at                                          DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                          String?      @db.Uuid
  deleted_at                                          DateTime?    @db.Timestamptz(6)
  deleted_by                                          String?      @db.Uuid
  deletion_reason                                     String?
  adm_members_trp_settlements_created_byToadm_members adm_members? @relation("trp_settlements_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_trp_settlements_deleted_byToadm_members adm_members? @relation("trp_settlements_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_tenants                                         adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  trp_trips                                           trp_trips    @relation(fields: [trip_id], references: [id], onDelete: Cascade)
  adm_members_trp_settlements_updated_byToadm_members adm_members? @relation("trp_settlements_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_by], map: "idx_trp_settlements_created_by")
  @@index([deleted_at], map: "idx_trp_settlements_deleted_at")
  @@index([metadata], map: "idx_trp_settlements_metadata", type: Gin)
  @@index([settlement_date], map: "idx_trp_settlements_settlement_date")
  @@index([tenant_id], map: "idx_trp_settlements_tenant_id")
  @@index([trip_id], map: "idx_trp_settlements_trip_id")
  @@index([updated_by], map: "idx_trp_settlements_updated_by")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model trp_trips {
  id                   String                 @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id            String                 @db.Uuid
  driver_id            String                 @db.Uuid
  vehicle_id           String?                @db.Uuid
  platform_id          String?                @db.Uuid
  pickup_latitude      Decimal?               @db.Decimal(10, 8)
  pickup_longitude     Decimal?               @db.Decimal(11, 8)
  start_time           DateTime?              @db.Timestamptz(6)
  dropoff_latitude     Decimal?               @db.Decimal(10, 8)
  dropoff_longitude    Decimal?               @db.Decimal(11, 8)
  end_time             DateTime?              @db.Timestamptz(6)
  distance_km          Decimal?               @db.Decimal(10, 2)
  duration_minutes     Decimal?               @db.Decimal
  payment_method       String?                @db.VarChar(50)
  platform_commission  Decimal?               @db.Decimal(10, 2)
  net_earnings         Decimal?               @db.Decimal(10, 2)
  status               String                 @db.VarChar(50)
  created_at           DateTime               @default(now()) @db.Timestamptz(6)
  updated_at           DateTime               @default(now()) @db.Timestamptz(6)
  deleted_at           DateTime?              @db.Timestamptz(6)
  client_id            String?                @db.Uuid
  trip_date            DateTime?              @db.Date
  fare_base            Decimal?               @db.Decimal
  fare_distance        Decimal?               @db.Decimal
  fare_time            Decimal?               @db.Decimal
  surge_multiplier     Decimal?               @db.Decimal
  tip_amount           Decimal?               @db.Decimal
  flt_vehicle_expenses flt_vehicle_expenses[]
  trp_settlements      trp_settlements[]
  rid_drivers          rid_drivers            @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  dir_platforms        dir_platforms?         @relation(fields: [platform_id], references: [id], onDelete: Restrict)
  adm_tenants          adm_tenants            @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  flt_vehicles         flt_vehicles?          @relation(fields: [vehicle_id], references: [id])

  @@index([client_id])
  @@index([created_at(sort: Desc)])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([end_time])
  @@index([platform_id])
  @@index([start_time])
  @@index([tenant_id])
  @@index([trip_date])
  @@index([vehicle_id])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model rid_driver_languages {
  id                                                       String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                String       @db.Uuid
  driver_id                                                String       @db.Uuid
  language_code                                            String       @db.Char(2)
  proficiency                                              String?
  created_at                                               DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                               String?      @db.Uuid
  updated_at                                               DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                               String?      @db.Uuid
  deleted_at                                               DateTime?    @db.Timestamptz(6)
  deleted_by                                               String?      @db.Uuid
  deletion_reason                                          String?
  adm_members_rid_driver_languages_created_byToadm_members adm_members? @relation("rid_driver_languages_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_rid_driver_languages_deleted_byToadm_members adm_members? @relation("rid_driver_languages_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                              rid_drivers  @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  adm_tenants                                              adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_rid_driver_languages_updated_byToadm_members adm_members? @relation("rid_driver_languages_updated_byToadm_members", fields: [updated_by], references: [id])
}
