generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model adm_audit_logs {
  id              String         @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id       String         @db.Uuid
  member_id       String?        @db.Uuid
  entity          String         @db.VarChar(50)
  entity_id       String         @db.Uuid
  action          String         @db.VarChar(50)
  changes         Json?
  ip_address      String?        @db.VarChar(45)
  user_agent      String?
  timestamp       DateTime       @default(now()) @db.Timestamptz(6)
  severity        audit_severity @default(info)
  category        audit_category @default(operational)
  session_id      String?        @db.Uuid
  request_id      String?        @db.Uuid
  old_values      Json?
  new_values      Json?
  retention_until DateTime?      @db.Timestamptz(6)
  tags            String[]       @default([])
  adm_members     adm_members?   @relation(fields: [member_id], references: [id])
  adm_tenants     adm_tenants    @relation(fields: [tenant_id], references: [id], onDelete: Cascade)

  @@index([changes], map: "adm_audit_logs_changes_gin", type: Gin)
  @@index([tenant_id, entity, entity_id], map: "adm_audit_logs_tenant_entity_entity_id_idx")
  @@index([tenant_id])
  @@index([timestamp(sort: Desc)])
}

model adm_invitations {
  id                     String                 @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_id              String                 @db.Uuid
  email                  String                 @db.Citext
  token                  String                 @unique @db.VarChar(255)
  role                   String                 @db.VarChar(100)
  expires_at             DateTime               @db.Timestamptz(6)
  status                 invitation_status      @default(pending)
  sent_at                DateTime               @db.Timestamptz(6)
  sent_count             Int                    @default(1)
  last_sent_at           DateTime               @db.Timestamptz(6)
  accepted_at            DateTime?              @db.Timestamptz(6)
  accepted_from_ip       String?                @db.Inet
  accepted_by_member_id  String?                @db.Uuid
  invitation_type        invitation_type
  custom_message         String?
  metadata               Json?
  sent_by                String                 @db.Uuid
  created_at             DateTime               @default(now()) @db.Timestamptz(6)
  updated_at             DateTime               @default(now()) @db.Timestamptz(6)
  adm_members            adm_members?           @relation(fields: [accepted_by_member_id], references: [id], map: "fk_adm_invitations_accepted_by")
  adm_provider_employees adm_provider_employees @relation(fields: [sent_by], references: [id], map: "fk_adm_invitations_sent_by")
  adm_tenants            adm_tenants            @relation(fields: [tenant_id], references: [id], onDelete: Cascade, map: "fk_adm_invitations_tenant")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model adm_member_roles {
  id                                                    String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                             String       @db.Uuid
  member_id                                             String       @db.Uuid
  role_id                                               String       @db.Uuid
  assigned_at                                           DateTime     @default(now()) @db.Timestamptz(6)
  created_at                                            DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                            String?      @db.Uuid
  updated_at                                            DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                            String?      @db.Uuid
  deleted_at                                            DateTime?    @db.Timestamptz(6)
  deleted_by                                            String?      @db.Uuid
  deletion_reason                                       String?
  assigned_by                                           String?      @db.Uuid
  assignment_reason                                     String?
  valid_from                                            DateTime?    @db.Timestamptz(6)
  valid_until                                           DateTime?    @db.Timestamptz(6)
  is_primary                                            Boolean      @default(false)
  scope_type                                            scope_type?
  scope_id                                              String?      @db.Uuid
  priority                                              Int?         @default(0)
  adm_members_adm_member_roles_created_byToadm_members  adm_members? @relation("adm_member_roles_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_adm_member_roles_deleted_byToadm_members  adm_members? @relation("adm_member_roles_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_members_adm_member_roles_member_idToadm_members   adm_members  @relation("adm_member_roles_member_idToadm_members", fields: [member_id], references: [id], onDelete: Cascade)
  adm_roles                                             adm_roles    @relation(fields: [role_id], references: [id], onDelete: Cascade)
  adm_tenants                                           adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_adm_member_roles_updated_byToadm_members  adm_members? @relation("adm_member_roles_updated_byToadm_members", fields: [updated_by], references: [id])
  adm_members_adm_member_roles_assigned_byToadm_members adm_members? @relation("adm_member_roles_assigned_byToadm_members", fields: [assigned_by], references: [id], map: "fk_adm_member_roles_assigned_by")

  @@index([created_by])
  @@index([deleted_at])
  @@index([member_id])
  @@index([role_id])
  @@index([tenant_id])
  @@index([updated_by])
}

model adm_member_sessions {
  id          String      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  member_id   String      @db.Uuid
  token_hash  String      @unique @db.VarChar(256)
  ip_address  String?     @db.Inet
  user_agent  String?
  expires_at  DateTime    @db.Timestamptz(6)
  revoked_at  DateTime?   @db.Timestamptz(6)
  created_at  DateTime    @default(now()) @db.Timestamptz(6)
  adm_members adm_members @relation(fields: [member_id], references: [id], onDelete: Cascade, map: "fk_adm_member_sessions_member")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model adm_members {
  id                                                                                              String                         @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                                                       String                         @db.Uuid
  email                                                                                           String                         @db.Citext
  clerk_user_id                                                                                   String                         @db.VarChar(255)
  first_name                                                                                      String?                        @db.VarChar(100)
  last_name                                                                                       String?                        @db.VarChar(100)
  phone                                                                                           String                         @db.VarChar(50)
  role                                                                                            String                         @default("member") @db.VarChar(50)
  last_login_at                                                                                   DateTime?                      @db.Timestamptz(6)
  metadata                                                                                        Json                           @default("{}")
  status                                                                                          String                         @default("active") @db.VarChar(50)
  created_at                                                                                      DateTime                       @default(now()) @db.Timestamptz(6)
  created_by                                                                                      String?                        @db.Uuid
  updated_at                                                                                      DateTime                       @default(now()) @db.Timestamptz(6)
  updated_by                                                                                      String?                        @db.Uuid
  deleted_at                                                                                      DateTime?                      @db.Timestamptz(6)
  deleted_by                                                                                      String?                        @db.Uuid
  deletion_reason                                                                                 String?
  email_verified_at                                                                               DateTime?                      @db.Timestamptz(6)
  two_factor_enabled                                                                              Boolean                        @default(false)
  two_factor_secret                                                                               String?
  password_changed_at                                                                             DateTime?                      @db.Timestamptz(6)
  failed_login_attempts                                                                           Int                            @default(0)
  locked_until                                                                                    DateTime?                      @db.Timestamptz(6)
  default_role_id                                                                                 String?                        @db.Uuid
  preferred_language                                                                              String?                        @db.VarChar(10)
  notification_preferences                                                                        Json?
  adm_audit_logs                                                                                  adm_audit_logs[]
  adm_invitations                                                                                 adm_invitations[]
  adm_member_roles_adm_member_roles_created_byToadm_members                                       adm_member_roles[]             @relation("adm_member_roles_created_byToadm_members")
  adm_member_roles_adm_member_roles_deleted_byToadm_members                                       adm_member_roles[]             @relation("adm_member_roles_deleted_byToadm_members")
  adm_member_roles_adm_member_roles_member_idToadm_members                                        adm_member_roles[]             @relation("adm_member_roles_member_idToadm_members")
  adm_member_roles_adm_member_roles_updated_byToadm_members                                       adm_member_roles[]             @relation("adm_member_roles_updated_byToadm_members")
  adm_member_roles_adm_member_roles_assigned_byToadm_members                                      adm_member_roles[]             @relation("adm_member_roles_assigned_byToadm_members")
  adm_member_sessions                                                                             adm_member_sessions[]
  adm_members_adm_members_created_byToadm_members                                                 adm_members?                   @relation("adm_members_created_byToadm_members", fields: [created_by], references: [id])
  other_adm_members_adm_members_created_byToadm_members                                           adm_members[]                  @relation("adm_members_created_byToadm_members")
  adm_members_adm_members_deleted_byToadm_members                                                 adm_members?                   @relation("adm_members_deleted_byToadm_members", fields: [deleted_by], references: [id])
  other_adm_members_adm_members_deleted_byToadm_members                                           adm_members[]                  @relation("adm_members_deleted_byToadm_members")
  adm_tenants                                                                                     adm_tenants                    @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_adm_members_updated_byToadm_members                                                 adm_members?                   @relation("adm_members_updated_byToadm_members", fields: [updated_by], references: [id])
  other_adm_members_adm_members_updated_byToadm_members                                           adm_members[]                  @relation("adm_members_updated_byToadm_members")
  adm_roles_adm_members_default_role_idToadm_roles                                                adm_roles?                     @relation("adm_members_default_role_idToadm_roles", fields: [default_role_id], references: [id], map: "fk_adm_members_default_role")
  adm_notification_logs_adm_notification_logs_created_byToadm_members                             adm_notification_logs[]        @relation("adm_notification_logs_created_byToadm_members")
  adm_notification_logs_adm_notification_logs_deleted_byToadm_members                             adm_notification_logs[]        @relation("adm_notification_logs_deleted_byToadm_members")
  adm_notification_logs_adm_notification_logs_recipient_idToadm_members                           adm_notification_logs[]        @relation("adm_notification_logs_recipient_idToadm_members")
  adm_notification_logs_adm_notification_logs_updated_byToadm_members                             adm_notification_logs[]        @relation("adm_notification_logs_updated_byToadm_members")
  adm_role_versions                                                                               adm_role_versions[]
  adm_roles_adm_roles_created_byToadm_members                                                     adm_roles[]                    @relation("adm_roles_created_byToadm_members")
  adm_roles_adm_roles_deleted_byToadm_members                                                     adm_roles[]                    @relation("adm_roles_deleted_byToadm_members")
  adm_roles_adm_roles_updated_byToadm_members                                                     adm_roles[]                    @relation("adm_roles_updated_byToadm_members")
  adm_tenant_vehicle_classes_adm_tenant_vehicle_classes_created_byToadm_members                   adm_tenant_vehicle_classes[]   @relation("adm_tenant_vehicle_classes_created_byToadm_members")
  adm_tenant_vehicle_classes_adm_tenant_vehicle_classes_deleted_byToadm_members                   adm_tenant_vehicle_classes[]   @relation("adm_tenant_vehicle_classes_deleted_byToadm_members")
  adm_tenant_vehicle_classes_adm_tenant_vehicle_classes_updated_byToadm_members                   adm_tenant_vehicle_classes[]   @relation("adm_tenant_vehicle_classes_updated_byToadm_members")
  crm_contracts_crm_contracts_created_byToadm_members                                             crm_contracts[]                @relation("crm_contracts_created_byToadm_members")
  crm_contracts_crm_contracts_deleted_byToadm_members                                             crm_contracts[]                @relation("crm_contracts_deleted_byToadm_members")
  crm_contracts_crm_contracts_updated_byToadm_members                                             crm_contracts[]                @relation("crm_contracts_updated_byToadm_members")
  crm_opportunities_crm_opportunities_assigned_toToadm_members                                    crm_opportunities[]            @relation("crm_opportunities_assigned_toToadm_members")
  crm_opportunities_crm_opportunities_created_byToadm_members                                     crm_opportunities[]            @relation("crm_opportunities_created_byToadm_members")
  crm_opportunities_crm_opportunities_deleted_byToadm_members                                     crm_opportunities[]            @relation("crm_opportunities_deleted_byToadm_members")
  crm_opportunities_crm_opportunities_updated_byToadm_members                                     crm_opportunities[]            @relation("crm_opportunities_updated_byToadm_members")
  doc_document_versions                                                                           doc_document_versions[]
  doc_documents_doc_documents_created_byToadm_members                                             doc_documents[]                @relation("doc_documents_created_byToadm_members")
  doc_documents_doc_documents_deleted_byToadm_members                                             doc_documents[]                @relation("doc_documents_deleted_byToadm_members")
  doc_documents_doc_documents_updated_byToadm_members                                             doc_documents[]                @relation("doc_documents_updated_byToadm_members")
  doc_documents_doc_documents_verified_byToadm_members                                            doc_documents[]                @relation("doc_documents_verified_byToadm_members")
  fin_accounts_fin_accounts_created_byToadm_members                                               fin_accounts[]                 @relation("fin_accounts_created_byToadm_members")
  fin_accounts_fin_accounts_deleted_byToadm_members                                               fin_accounts[]                 @relation("fin_accounts_deleted_byToadm_members")
  fin_accounts_fin_accounts_updated_byToadm_members                                               fin_accounts[]                 @relation("fin_accounts_updated_byToadm_members")
  fin_driver_payment_batches_fin_driver_payment_batches_created_byToadm_members                   fin_driver_payment_batches[]   @relation("fin_driver_payment_batches_created_byToadm_members")
  fin_driver_payment_batches_fin_driver_payment_batches_deleted_byToadm_members                   fin_driver_payment_batches[]   @relation("fin_driver_payment_batches_deleted_byToadm_members")
  fin_driver_payment_batches_fin_driver_payment_batches_updated_byToadm_members                   fin_driver_payment_batches[]   @relation("fin_driver_payment_batches_updated_byToadm_members")
  fin_driver_payments_fin_driver_payments_created_byToadm_members                                 fin_driver_payments[]          @relation("fin_driver_payments_created_byToadm_members")
  fin_driver_payments_fin_driver_payments_deleted_byToadm_members                                 fin_driver_payments[]          @relation("fin_driver_payments_deleted_byToadm_members")
  fin_driver_payments_fin_driver_payments_updated_byToadm_members                                 fin_driver_payments[]          @relation("fin_driver_payments_updated_byToadm_members")
  fin_toll_transactions_fin_toll_transactions_created_byToadm_members                             fin_toll_transactions[]        @relation("fin_toll_transactions_created_byToadm_members")
  fin_toll_transactions_fin_toll_transactions_deleted_byToadm_members                             fin_toll_transactions[]        @relation("fin_toll_transactions_deleted_byToadm_members")
  fin_toll_transactions_fin_toll_transactions_updated_byToadm_members                             fin_toll_transactions[]        @relation("fin_toll_transactions_updated_byToadm_members")
  fin_traffic_fine_disputes_fin_traffic_fine_disputes_reviewed_byToadm_members                    fin_traffic_fine_disputes[]    @relation("fin_traffic_fine_disputes_reviewed_byToadm_members")
  fin_traffic_fine_disputes_fin_traffic_fine_disputes_submitted_byToadm_members                   fin_traffic_fine_disputes[]    @relation("fin_traffic_fine_disputes_submitted_byToadm_members")
  fin_traffic_fines_fin_traffic_fines_created_byToadm_members                                     fin_traffic_fines[]            @relation("fin_traffic_fines_created_byToadm_members")
  fin_traffic_fines_fin_traffic_fines_deleted_byToadm_members                                     fin_traffic_fines[]            @relation("fin_traffic_fines_deleted_byToadm_members")
  fin_traffic_fines_fin_traffic_fines_updated_byToadm_members                                     fin_traffic_fines[]            @relation("fin_traffic_fines_updated_byToadm_members")
  fin_transactions_fin_transactions_created_byToadm_members                                       fin_transactions[]             @relation("fin_transactions_created_byToadm_members")
  fin_transactions_fin_transactions_deleted_byToadm_members                                       fin_transactions[]             @relation("fin_transactions_deleted_byToadm_members")
  fin_transactions_fin_transactions_updated_byToadm_members                                       fin_transactions[]             @relation("fin_transactions_updated_byToadm_members")
  fin_transactions_fin_transactions_validated_byToadm_members                                     fin_transactions[]             @relation("fin_transactions_validated_byToadm_members")
  flt_vehicle_assignments_flt_vehicle_assignments_created_byToadm_members                         flt_vehicle_assignments[]      @relation("flt_vehicle_assignments_created_byToadm_members")
  flt_vehicle_assignments_flt_vehicle_assignments_deleted_byToadm_members                         flt_vehicle_assignments[]      @relation("flt_vehicle_assignments_deleted_byToadm_members")
  flt_vehicle_assignments_flt_vehicle_assignments_updated_byToadm_members                         flt_vehicle_assignments[]      @relation("flt_vehicle_assignments_updated_byToadm_members")
  flt_vehicle_events_flt_vehicle_events_created_byToadm_members                                   flt_vehicle_events[]           @relation("flt_vehicle_events_created_byToadm_members")
  flt_vehicle_events_flt_vehicle_events_deleted_byToadm_members                                   flt_vehicle_events[]           @relation("flt_vehicle_events_deleted_byToadm_members")
  flt_vehicle_events_flt_vehicle_events_updated_byToadm_members                                   flt_vehicle_events[]           @relation("flt_vehicle_events_updated_byToadm_members")
  flt_vehicle_expenses_flt_vehicle_expenses_created_byToadm_members                               flt_vehicle_expenses[]         @relation("flt_vehicle_expenses_created_byToadm_members")
  flt_vehicle_expenses_flt_vehicle_expenses_deleted_byToadm_members                               flt_vehicle_expenses[]         @relation("flt_vehicle_expenses_deleted_byToadm_members")
  flt_vehicle_expenses_flt_vehicle_expenses_updated_byToadm_members                               flt_vehicle_expenses[]         @relation("flt_vehicle_expenses_updated_byToadm_members")
  flt_vehicle_insurances_flt_vehicle_insurances_created_byToadm_members                           flt_vehicle_insurances[]       @relation("flt_vehicle_insurances_created_byToadm_members")
  flt_vehicle_insurances_flt_vehicle_insurances_deleted_byToadm_members                           flt_vehicle_insurances[]       @relation("flt_vehicle_insurances_deleted_byToadm_members")
  flt_vehicle_insurances_flt_vehicle_insurances_updated_byToadm_members                           flt_vehicle_insurances[]       @relation("flt_vehicle_insurances_updated_byToadm_members")
  flt_vehicle_maintenance_flt_vehicle_maintenance_created_byToadm_members                         flt_vehicle_maintenance[]      @relation("flt_vehicle_maintenance_created_byToadm_members")
  flt_vehicle_maintenance_flt_vehicle_maintenance_updated_byToadm_members                         flt_vehicle_maintenance[]      @relation("flt_vehicle_maintenance_updated_byToadm_members")
  flt_vehicles_flt_vehicles_created_byToadm_members                                               flt_vehicles[]                 @relation("flt_vehicles_created_byToadm_members")
  flt_vehicles_flt_vehicles_deleted_byToadm_members                                               flt_vehicles[]                 @relation("flt_vehicles_deleted_byToadm_members")
  flt_vehicles_flt_vehicles_updated_byToadm_members                                               flt_vehicles[]                 @relation("flt_vehicles_updated_byToadm_members")
  rev_driver_revenues_rev_driver_revenues_created_byToadm_members                                 rev_driver_revenues[]          @relation("rev_driver_revenues_created_byToadm_members")
  rev_driver_revenues_rev_driver_revenues_deleted_byToadm_members                                 rev_driver_revenues[]          @relation("rev_driver_revenues_deleted_byToadm_members")
  rev_driver_revenues_rev_driver_revenues_updated_byToadm_members                                 rev_driver_revenues[]          @relation("rev_driver_revenues_updated_byToadm_members")
  rev_driver_revenues_rev_driver_revenues_validated_byToadm_members                               rev_driver_revenues[]          @relation("rev_driver_revenues_validated_byToadm_members")
  rev_reconciliations_rev_reconciliations_assigned_toToadm_members                                rev_reconciliations[]          @relation("rev_reconciliations_assigned_toToadm_members")
  rev_reconciliations_rev_reconciliations_created_byToadm_members                                 rev_reconciliations[]          @relation("rev_reconciliations_created_byToadm_members")
  rev_reconciliations_rev_reconciliations_deleted_byToadm_members                                 rev_reconciliations[]          @relation("rev_reconciliations_deleted_byToadm_members")
  rev_reconciliations_rev_reconciliations_resolved_byToadm_members                                rev_reconciliations[]          @relation("rev_reconciliations_resolved_byToadm_members")
  rev_reconciliations_rev_reconciliations_updated_byToadm_members                                 rev_reconciliations[]          @relation("rev_reconciliations_updated_byToadm_members")
  rev_revenue_imports_rev_revenue_imports_created_byToadm_members                                 rev_revenue_imports[]          @relation("rev_revenue_imports_created_byToadm_members")
  rev_revenue_imports_rev_revenue_imports_deleted_byToadm_members                                 rev_revenue_imports[]          @relation("rev_revenue_imports_deleted_byToadm_members")
  rev_revenue_imports_rev_revenue_imports_updated_byToadm_members                                 rev_revenue_imports[]          @relation("rev_revenue_imports_updated_byToadm_members")
  rid_driver_blacklists_rid_driver_blacklists_appeal_reviewed_byToadm_members                     rid_driver_blacklists[]        @relation("rid_driver_blacklists_appeal_reviewed_byToadm_members")
  rid_driver_blacklists_rid_driver_blacklists_created_byToadm_members                             rid_driver_blacklists[]        @relation("rid_driver_blacklists_created_byToadm_members")
  rid_driver_blacklists_rid_driver_blacklists_decided_byToadm_members                             rid_driver_blacklists[]        @relation("rid_driver_blacklists_decided_byToadm_members")
  rid_driver_blacklists_rid_driver_blacklists_reviewed_byToadm_members                            rid_driver_blacklists[]        @relation("rid_driver_blacklists_reviewed_byToadm_members")
  rid_driver_blacklists_rid_driver_blacklists_deleted_byToadm_members                             rid_driver_blacklists[]        @relation("rid_driver_blacklists_deleted_byToadm_members")
  rid_driver_blacklists_rid_driver_blacklists_legal_reviewed_byToadm_members                      rid_driver_blacklists[]        @relation("rid_driver_blacklists_legal_reviewed_byToadm_members")
  rid_driver_blacklists_rid_driver_blacklists_reinstated_byToadm_members                          rid_driver_blacklists[]        @relation("rid_driver_blacklists_reinstated_byToadm_members")
  rid_driver_blacklists_rid_driver_blacklists_updated_byToadm_members                             rid_driver_blacklists[]        @relation("rid_driver_blacklists_updated_byToadm_members")
  rid_driver_cooperation_terms_rid_driver_cooperation_terms_created_byToadm_members               rid_driver_cooperation_terms[] @relation("rid_driver_cooperation_terms_created_byToadm_members")
  rid_driver_cooperation_terms_rid_driver_cooperation_terms_deleted_byToadm_members               rid_driver_cooperation_terms[] @relation("rid_driver_cooperation_terms_deleted_byToadm_members")
  rid_driver_cooperation_terms_rid_driver_cooperation_terms_legal_reviewed_byToadm_members        rid_driver_cooperation_terms[] @relation("rid_driver_cooperation_terms_legal_reviewed_byToadm_members")
  rid_driver_cooperation_terms_rid_driver_cooperation_terms_termination_initiated_byToadm_members rid_driver_cooperation_terms[] @relation("rid_driver_cooperation_terms_termination_initiated_byToadm_members")
  rid_driver_cooperation_terms_rid_driver_cooperation_terms_updated_byToadm_members               rid_driver_cooperation_terms[] @relation("rid_driver_cooperation_terms_updated_byToadm_members")
  rid_driver_documents_rid_driver_documents_created_byToadm_members                               rid_driver_documents[]         @relation("rid_driver_documents_created_byToadm_members")
  rid_driver_documents_rid_driver_documents_deleted_byToadm_members                               rid_driver_documents[]         @relation("rid_driver_documents_deleted_byToadm_members")
  rid_driver_documents_rid_driver_documents_updated_byToadm_members                               rid_driver_documents[]         @relation("rid_driver_documents_updated_byToadm_members")
  rid_driver_documents_rid_driver_documents_verified_byToadm_members                              rid_driver_documents[]         @relation("rid_driver_documents_verified_byToadm_members")
  rid_driver_languages_rid_driver_languages_created_byToadm_members                               rid_driver_languages[]         @relation("rid_driver_languages_created_byToadm_members")
  rid_driver_languages_rid_driver_languages_deleted_byToadm_members                               rid_driver_languages[]         @relation("rid_driver_languages_deleted_byToadm_members")
  rid_driver_languages_rid_driver_languages_updated_byToadm_members                               rid_driver_languages[]         @relation("rid_driver_languages_updated_byToadm_members")
  rid_driver_performances_rid_driver_performances_created_byToadm_members                         rid_driver_performances[]      @relation("rid_driver_performances_created_byToadm_members")
  rid_driver_performances_rid_driver_performances_deleted_byToadm_members                         rid_driver_performances[]      @relation("rid_driver_performances_deleted_byToadm_members")
  rid_driver_performances_rid_driver_performances_updated_byToadm_members                         rid_driver_performances[]      @relation("rid_driver_performances_updated_byToadm_members")
  rid_driver_requests_rid_driver_requests_approved_byToadm_members                                rid_driver_requests[]          @relation("rid_driver_requests_approved_byToadm_members")
  rid_driver_requests_rid_driver_requests_assigned_toToadm_members                                rid_driver_requests[]          @relation("rid_driver_requests_assigned_toToadm_members")
  rid_driver_requests_rid_driver_requests_created_byToadm_members                                 rid_driver_requests[]          @relation("rid_driver_requests_created_byToadm_members")
  rid_driver_requests_rid_driver_requests_deleted_byToadm_members                                 rid_driver_requests[]          @relation("rid_driver_requests_deleted_byToadm_members")
  rid_driver_requests_rid_driver_requests_escalated_toToadm_members                               rid_driver_requests[]          @relation("rid_driver_requests_escalated_toToadm_members")
  rid_driver_requests_rid_driver_requests_hr_approved_byToadm_members                             rid_driver_requests[]          @relation("rid_driver_requests_hr_approved_byToadm_members")
  rid_driver_requests_rid_driver_requests_manager_approved_byToadm_members                        rid_driver_requests[]          @relation("rid_driver_requests_manager_approved_byToadm_members")
  rid_driver_requests_rid_driver_requests_rejected_byToadm_members                                rid_driver_requests[]          @relation("rid_driver_requests_rejected_byToadm_members")
  rid_driver_requests_rid_driver_requests_reviewed_byToadm_members                                rid_driver_requests[]          @relation("rid_driver_requests_reviewed_byToadm_members")
  rid_driver_requests_rid_driver_requests_updated_byToadm_members                                 rid_driver_requests[]          @relation("rid_driver_requests_updated_byToadm_members")
  rid_driver_training_rid_driver_training_created_byToadm_members                                 rid_driver_training[]          @relation("rid_driver_training_created_byToadm_members")
  rid_driver_training_rid_driver_training_deleted_byToadm_members                                 rid_driver_training[]          @relation("rid_driver_training_deleted_byToadm_members")
  rid_driver_training_rid_driver_training_evaluated_byToadm_members                               rid_driver_training[]          @relation("rid_driver_training_evaluated_byToadm_members")
  rid_driver_training_rid_driver_training_updated_byToadm_members                                 rid_driver_training[]          @relation("rid_driver_training_updated_byToadm_members")
  sch_goals_sch_goals_created_byToadm_members                                                     sch_goals[]                    @relation("sch_goals_created_byToadm_members")
  sch_goals_sch_goals_deleted_byToadm_members                                                     sch_goals[]                    @relation("sch_goals_deleted_byToadm_members")
  sch_goals_sch_goals_updated_byToadm_members                                                     sch_goals[]                    @relation("sch_goals_updated_byToadm_members")
  sch_maintenance_schedules_sch_maintenance_schedules_scheduled_byToadm_members                   sch_maintenance_schedules[]    @relation("sch_maintenance_schedules_scheduled_byToadm_members")
  sch_maintenance_schedules_sch_maintenance_schedules_created_byToadm_members                     sch_maintenance_schedules[]    @relation("sch_maintenance_schedules_created_byToadm_members")
  sch_maintenance_schedules_sch_maintenance_schedules_deleted_byToadm_members                     sch_maintenance_schedules[]    @relation("sch_maintenance_schedules_deleted_byToadm_members")
  sch_maintenance_schedules_sch_maintenance_schedules_updated_byToadm_members                     sch_maintenance_schedules[]    @relation("sch_maintenance_schedules_updated_byToadm_members")
  sch_shifts_sch_shifts_approved_byToadm_members                                                  sch_shifts[]                   @relation("sch_shifts_approved_byToadm_members")
  sch_shifts_sch_shifts_created_byToadm_members                                                   sch_shifts[]                   @relation("sch_shifts_created_byToadm_members")
  sch_shifts_sch_shifts_deleted_byToadm_members                                                   sch_shifts[]                   @relation("sch_shifts_deleted_byToadm_members")
  sch_shifts_sch_shifts_updated_byToadm_members                                                   sch_shifts[]                   @relation("sch_shifts_updated_byToadm_members")
  sch_task_comments                                                                               sch_task_comments[]
  sch_task_history                                                                                sch_task_history[]
  sch_tasks_sch_tasks_assigned_byToadm_members                                                    sch_tasks[]                    @relation("sch_tasks_assigned_byToadm_members")
  sch_tasks_sch_tasks_assigned_toToadm_members                                                    sch_tasks[]                    @relation("sch_tasks_assigned_toToadm_members")
  sch_tasks_sch_tasks_completed_byToadm_members                                                   sch_tasks[]                    @relation("sch_tasks_completed_byToadm_members")
  sch_tasks_sch_tasks_escalated_toToadm_members                                                   sch_tasks[]                    @relation("sch_tasks_escalated_toToadm_members")
  sch_tasks_sch_tasks_verified_byToadm_members                                                    sch_tasks[]                    @relation("sch_tasks_verified_byToadm_members")
  sch_tasks_sch_tasks_created_byToadm_members                                                     sch_tasks[]                    @relation("sch_tasks_created_byToadm_members")
  sch_tasks_sch_tasks_deleted_byToadm_members                                                     sch_tasks[]                    @relation("sch_tasks_deleted_byToadm_members")
  sch_tasks_sch_tasks_updated_byToadm_members                                                     sch_tasks[]                    @relation("sch_tasks_updated_byToadm_members")
  sup_ticket_messages_sup_ticket_messages_created_byToadm_members                                 sup_ticket_messages[]          @relation("sup_ticket_messages_created_byToadm_members")
  sup_ticket_messages_sup_ticket_messages_deleted_byToadm_members                                 sup_ticket_messages[]          @relation("sup_ticket_messages_deleted_byToadm_members")
  sup_ticket_messages_sup_ticket_messages_updated_byToadm_members                                 sup_ticket_messages[]          @relation("sup_ticket_messages_updated_byToadm_members")
  sup_tickets_sup_tickets_raised_byToadm_members                                                  sup_tickets[]                  @relation("sup_tickets_raised_byToadm_members")
  sup_tickets_sup_tickets_created_byToadm_members                                                 sup_tickets[]                  @relation("sup_tickets_created_byToadm_members")
  sup_tickets_sup_tickets_deleted_byToadm_members                                                 sup_tickets[]                  @relation("sup_tickets_deleted_byToadm_members")
  sup_tickets_sup_tickets_updated_byToadm_members                                                 sup_tickets[]                  @relation("sup_tickets_updated_byToadm_members")
  trp_client_invoices_trp_client_invoices_created_byToadm_members                                 trp_client_invoices[]          @relation("trp_client_invoices_created_byToadm_members")
  trp_client_invoices_trp_client_invoices_deleted_byToadm_members                                 trp_client_invoices[]          @relation("trp_client_invoices_deleted_byToadm_members")
  trp_client_invoices_trp_client_invoices_updated_byToadm_members                                 trp_client_invoices[]          @relation("trp_client_invoices_updated_byToadm_members")
  trp_platform_accounts_trp_platform_accounts_created_byToadm_members                             trp_platform_accounts[]        @relation("trp_platform_accounts_created_byToadm_members")
  trp_platform_accounts_trp_platform_accounts_deleted_byToadm_members                             trp_platform_accounts[]        @relation("trp_platform_accounts_deleted_byToadm_members")
  trp_platform_accounts_trp_platform_accounts_updated_byToadm_members                             trp_platform_accounts[]        @relation("trp_platform_accounts_updated_byToadm_members")
  trp_settlements_trp_settlements_created_byToadm_members                                         trp_settlements[]              @relation("trp_settlements_created_byToadm_members")
  trp_settlements_trp_settlements_deleted_byToadm_members                                         trp_settlements[]              @relation("trp_settlements_deleted_byToadm_members")
  trp_settlements_trp_settlements_updated_byToadm_members                                         trp_settlements[]              @relation("trp_settlements_updated_byToadm_members")

  @@index([clerk_user_id])
  @@index([created_by])
  @@index([deleted_at])
  @@index([email])
  @@index([last_login_at])
  @@index([metadata], map: "adm_members_metadata_gin", type: Gin)
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model adm_notification_logs {
  id                                                          String               @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_id                                                   String?              @db.Uuid
  recipient_id                                                String?              @db.Uuid
  recipient_email                                             String               @db.VarChar(255)
  recipient_phone                                             String?              @db.VarChar(20)
  template_code                                               String               @db.VarChar(100)
  channel                                                     notification_channel
  locale_used                                                 String               @db.VarChar(10)
  subject                                                     String?
  body                                                        String?
  variables_data                                              Json?
  status                                                      notification_status  @default(pending)
  sent_at                                                     DateTime?            @db.Timestamptz(6)
  delivered_at                                                DateTime?            @db.Timestamptz(6)
  opened_at                                                   DateTime?            @db.Timestamptz(6)
  clicked_at                                                  DateTime?            @db.Timestamptz(6)
  failed_at                                                   DateTime?            @db.Timestamptz(6)
  error_message                                               String?
  external_id                                                 String?              @db.VarChar(255)
  ip_address                                                  String?              @db.VarChar(45)
  user_agent                                                  String?
  session_id                                                  String?              @db.Uuid
  request_id                                                  String?              @db.Uuid
  created_at                                                  DateTime             @default(now()) @db.Timestamptz(6)
  created_by                                                  String?              @db.Uuid
  updated_at                                                  DateTime             @default(now()) @db.Timestamptz(6)
  updated_by                                                  String?              @db.Uuid
  deleted_at                                                  DateTime?            @db.Timestamptz(6)
  deleted_by                                                  String?              @db.Uuid
  deletion_reason                                             String?
  adm_members_adm_notification_logs_created_byToadm_members   adm_members?         @relation("adm_notification_logs_created_byToadm_members", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_adm_notification_logs_created_by")
  adm_members_adm_notification_logs_deleted_byToadm_members   adm_members?         @relation("adm_notification_logs_deleted_byToadm_members", fields: [deleted_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_adm_notification_logs_deleted_by")
  adm_members_adm_notification_logs_recipient_idToadm_members adm_members?         @relation("adm_notification_logs_recipient_idToadm_members", fields: [recipient_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_adm_notification_logs_recipient_id")
  adm_tenants                                                 adm_tenants?         @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_adm_notification_logs_tenant")
  adm_members_adm_notification_logs_updated_byToadm_members   adm_members?         @relation("adm_notification_logs_updated_byToadm_members", fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_adm_notification_logs_updated_by")

  @@index([channel], map: "idx_adm_notification_logs_channel")
  @@index([created_at], map: "idx_adm_notification_logs_created_at")
  @@index([deleted_at], map: "idx_adm_notification_logs_deleted_at")
  @@index([recipient_email], map: "idx_adm_notification_logs_recipient_email")
  @@index([recipient_id], map: "idx_adm_notification_logs_recipient_id")
  @@index([sent_at], map: "idx_adm_notification_logs_sent_at")
  @@index([status], map: "idx_adm_notification_logs_status")
  @@index([template_code], map: "idx_adm_notification_logs_template_code")
  @@index([tenant_id], map: "idx_adm_notification_logs_tenant")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model adm_notification_queue {
  id                String               @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  channel           notification_channel @default(email)
  template_code     String               @db.VarChar(100)
  locale            String               @default("en") @db.VarChar(10)
  recipient_email   String?              @db.VarChar(255)
  recipient_phone   String?              @db.VarChar(50)
  recipient_user_id String?              @db.Uuid
  variables         Json                 @default("{}")
  lead_id           String?              @db.Uuid
  member_id         String?              @db.Uuid
  tenant_id         String?              @db.Uuid
  country_code      String?              @db.Char(2)
  status            queue_status         @default(pending)
  attempts          Int                  @default(0)
  max_attempts      Int                  @default(3)
  next_retry_at     DateTime?            @db.Timestamptz(6)
  last_error        String?
  created_at        DateTime             @default(now()) @db.Timestamptz(6)
  processed_at      DateTime?            @db.Timestamptz(6)
  idempotency_key   String?              @unique @db.VarChar(255)
  deleted_at        DateTime?            @db.Timestamptz(6)
  deleted_by        String?              @db.Uuid
  deletion_reason   String?

  @@index([created_at(sort: Desc)], map: "idx_adm_notification_queue_created_at")
  @@index([status], map: "idx_adm_notification_queue_status")
  @@index([template_code], map: "idx_adm_notification_queue_template")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model adm_provider_employees {
  id                                                                                        String                        @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  clerk_user_id                                                                             String                        @db.VarChar(255)
  email                                                                                     String                        @db.VarChar(255)
  department                                                                                String?                       @db.VarChar(50)
  title                                                                                     String?                       @db.VarChar(50)
  permissions                                                                               Json?
  status                                                                                    String                        @default("active") @db.VarChar(50)
  created_at                                                                                DateTime                      @default(now()) @db.Timestamptz(6)
  created_by                                                                                String?                       @db.Uuid
  updated_at                                                                                DateTime                      @default(now()) @db.Timestamptz(6)
  updated_by                                                                                String?                       @db.Uuid
  deleted_at                                                                                DateTime?                     @db.Timestamptz(6)
  deleted_by                                                                                String?                       @db.Uuid
  deletion_reason                                                                           String?
  supervisor_id                                                                             String?                       @db.Uuid
  preferred_locale                                                                          String?                       @db.VarChar(10)
  first_name                                                                                String                        @db.VarChar(50)
  last_name                                                                                 String?                       @db.VarChar(50)
  adm_invitations                                                                           adm_invitations[]
  adm_provider_employees_adm_provider_employees_created_byToadm_provider_employees          adm_provider_employees?       @relation("adm_provider_employees_created_byToadm_provider_employees", fields: [created_by], references: [id])
  other_adm_provider_employees_adm_provider_employees_created_byToadm_provider_employees    adm_provider_employees[]      @relation("adm_provider_employees_created_byToadm_provider_employees")
  adm_provider_employees_adm_provider_employees_deleted_byToadm_provider_employees          adm_provider_employees?       @relation("adm_provider_employees_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id])
  other_adm_provider_employees_adm_provider_employees_deleted_byToadm_provider_employees    adm_provider_employees[]      @relation("adm_provider_employees_deleted_byToadm_provider_employees")
  adm_provider_employees_adm_provider_employees_updated_byToadm_provider_employees          adm_provider_employees?       @relation("adm_provider_employees_updated_byToadm_provider_employees", fields: [updated_by], references: [id])
  other_adm_provider_employees_adm_provider_employees_updated_byToadm_provider_employees    adm_provider_employees[]      @relation("adm_provider_employees_updated_byToadm_provider_employees")
  adm_provider_employees_adm_provider_employees_supervisor_idToadm_provider_employees       adm_provider_employees?       @relation("adm_provider_employees_supervisor_idToadm_provider_employees", fields: [supervisor_id], references: [id], map: "fk_adm_provider_employees_supervisor")
  other_adm_provider_employees_adm_provider_employees_supervisor_idToadm_provider_employees adm_provider_employees[]      @relation("adm_provider_employees_supervisor_idToadm_provider_employees")
  adm_tenant_lifecycle_events                                                               adm_tenant_lifecycle_events[]
  bil_billing_plans_bil_billing_plans_created_byToadm_provider_employees                    bil_billing_plans[]           @relation("bil_billing_plans_created_byToadm_provider_employees")
  bil_billing_plans_bil_billing_plans_deleted_byToadm_provider_employees                    bil_billing_plans[]           @relation("bil_billing_plans_deleted_byToadm_provider_employees")
  bil_billing_plans_bil_billing_plans_updated_byToadm_provider_employees                    bil_billing_plans[]           @relation("bil_billing_plans_updated_byToadm_provider_employees")
  bil_payment_methods_bil_payment_methods_created_byToadm_provider_employees                bil_payment_methods[]         @relation("bil_payment_methods_created_byToadm_provider_employees")
  bil_payment_methods_bil_payment_methods_deleted_byToadm_provider_employees                bil_payment_methods[]         @relation("bil_payment_methods_deleted_byToadm_provider_employees")
  bil_payment_methods_bil_payment_methods_updated_byToadm_provider_employees                bil_payment_methods[]         @relation("bil_payment_methods_updated_byToadm_provider_employees")
  bil_promotions                                                                            bil_promotions[]
  bil_tenant_invoice_lines_bil_tenant_invoice_lines_created_byToadm_provider_employees      bil_tenant_invoice_lines[]    @relation("bil_tenant_invoice_lines_created_byToadm_provider_employees")
  bil_tenant_invoice_lines_bil_tenant_invoice_lines_deleted_byToadm_provider_employees      bil_tenant_invoice_lines[]    @relation("bil_tenant_invoice_lines_deleted_byToadm_provider_employees")
  bil_tenant_invoice_lines_bil_tenant_invoice_lines_updated_byToadm_provider_employees      bil_tenant_invoice_lines[]    @relation("bil_tenant_invoice_lines_updated_byToadm_provider_employees")
  bil_tenant_invoices_bil_tenant_invoices_created_byToadm_provider_employees                bil_tenant_invoices[]         @relation("bil_tenant_invoices_created_byToadm_provider_employees")
  bil_tenant_invoices_bil_tenant_invoices_deleted_byToadm_provider_employees                bil_tenant_invoices[]         @relation("bil_tenant_invoices_deleted_byToadm_provider_employees")
  bil_tenant_invoices_bil_tenant_invoices_updated_byToadm_provider_employees                bil_tenant_invoices[]         @relation("bil_tenant_invoices_updated_byToadm_provider_employees")
  bil_tenant_subscriptions_bil_tenant_subscriptions_created_byToadm_provider_employees      bil_tenant_subscriptions[]    @relation("bil_tenant_subscriptions_created_byToadm_provider_employees")
  bil_tenant_subscriptions_bil_tenant_subscriptions_deleted_byToadm_provider_employees      bil_tenant_subscriptions[]    @relation("bil_tenant_subscriptions_deleted_byToadm_provider_employees")
  bil_tenant_subscriptions_bil_tenant_subscriptions_updated_byToadm_provider_employees      bil_tenant_subscriptions[]    @relation("bil_tenant_subscriptions_updated_byToadm_provider_employees")
  bil_tenant_usage_metrics_bil_tenant_usage_metrics_created_byToadm_provider_employees      bil_tenant_usage_metrics[]    @relation("bil_tenant_usage_metrics_created_byToadm_provider_employees")
  bil_tenant_usage_metrics_bil_tenant_usage_metrics_deleted_byToadm_provider_employees      bil_tenant_usage_metrics[]    @relation("bil_tenant_usage_metrics_deleted_byToadm_provider_employees")
  bil_tenant_usage_metrics_bil_tenant_usage_metrics_updated_byToadm_provider_employees      bil_tenant_usage_metrics[]    @relation("bil_tenant_usage_metrics_updated_byToadm_provider_employees")
  crm_contracts_crm_contracts_approved_byToadm_provider_employees                           crm_contracts[]               @relation("crm_contracts_approved_byToadm_provider_employees")
  crm_contracts_crm_contracts_created_byToadm_provider_employees                            crm_contracts[]               @relation("crm_contracts_created_byToadm_provider_employees")
  crm_contracts_crm_contracts_deleted_byToadm_provider_employees                            crm_contracts[]               @relation("crm_contracts_deleted_byToadm_provider_employees")
  crm_contracts_crm_contracts_updated_byToadm_provider_employees                            crm_contracts[]               @relation("crm_contracts_updated_byToadm_provider_employees")
  crm_leads_crm_leads_assigned_toToadm_provider_employees                                   crm_leads[]                   @relation("crm_leads_assigned_toToadm_provider_employees")
  crm_leads_crm_leads_created_byToadm_provider_employees                                    crm_leads[]                   @relation("crm_leads_created_byToadm_provider_employees")
  crm_leads_crm_leads_deleted_byToadm_provider_employees                                    crm_leads[]                   @relation("crm_leads_deleted_byToadm_provider_employees")
  crm_leads_crm_leads_updated_byToadm_provider_employees                                    crm_leads[]                   @relation("crm_leads_updated_byToadm_provider_employees")
  crm_opportunities_crm_opportunities_assigned_toToadm_provider_employees                   crm_opportunities[]           @relation("crm_opportunities_assigned_toToadm_provider_employees")
  crm_opportunities_crm_opportunities_created_byToadm_provider_employees                    crm_opportunities[]           @relation("crm_opportunities_created_byToadm_provider_employees")
  crm_opportunities_crm_opportunities_deleted_byToadm_provider_employees                    crm_opportunities[]           @relation("crm_opportunities_deleted_byToadm_provider_employees")
  crm_opportunities_crm_opportunities_owner_idToadm_provider_employees                      crm_opportunities[]           @relation("crm_opportunities_owner_idToadm_provider_employees")
  crm_opportunities_crm_opportunities_updated_byToadm_provider_employees                    crm_opportunities[]           @relation("crm_opportunities_updated_byToadm_provider_employees")
  crm_settings_crm_settings_created_byToadm_provider_employees                              crm_settings[]                @relation("crm_settings_created_byToadm_provider_employees")
  crm_settings_crm_settings_deleted_byToadm_provider_employees                              crm_settings[]                @relation("crm_settings_deleted_byToadm_provider_employees")
  crm_settings_crm_settings_updated_byToadm_provider_employees                              crm_settings[]                @relation("crm_settings_updated_byToadm_provider_employees")
  dir_car_makes_dir_car_makes_created_byToadm_provider_employees                            dir_car_makes[]               @relation("dir_car_makes_created_byToadm_provider_employees")
  dir_car_makes_dir_car_makes_deleted_byToadm_provider_employees                            dir_car_makes[]               @relation("dir_car_makes_deleted_byToadm_provider_employees")
  dir_car_makes_dir_car_makes_updated_byToadm_provider_employees                            dir_car_makes[]               @relation("dir_car_makes_updated_byToadm_provider_employees")
  dir_car_models_dir_car_models_created_byToadm_provider_employees                          dir_car_models[]              @relation("dir_car_models_created_byToadm_provider_employees")
  dir_car_models_dir_car_models_deleted_byToadm_provider_employees                          dir_car_models[]              @relation("dir_car_models_deleted_byToadm_provider_employees")
  dir_car_models_dir_car_models_updated_byToadm_provider_employees                          dir_car_models[]              @relation("dir_car_models_updated_byToadm_provider_employees")
  dir_country_locales_dir_country_locales_created_byToadm_provider_employees                dir_country_locales[]         @relation("dir_country_locales_created_byToadm_provider_employees")
  dir_country_locales_dir_country_locales_deleted_byToadm_provider_employees                dir_country_locales[]         @relation("dir_country_locales_deleted_byToadm_provider_employees")
  dir_country_locales_dir_country_locales_updated_byToadm_provider_employees                dir_country_locales[]         @relation("dir_country_locales_updated_byToadm_provider_employees")
  dir_country_regulations_dir_country_regulations_created_byToadm_provider_employees        dir_country_regulations[]     @relation("dir_country_regulations_created_byToadm_provider_employees")
  dir_country_regulations_dir_country_regulations_deleted_byToadm_provider_employees        dir_country_regulations[]     @relation("dir_country_regulations_deleted_byToadm_provider_employees")
  dir_country_regulations_dir_country_regulations_updated_byToadm_provider_employees        dir_country_regulations[]     @relation("dir_country_regulations_updated_byToadm_provider_employees")
  dir_notification_templates_dir_notification_templates_created_byToadm_provider_employees  dir_notification_templates[]  @relation("dir_notification_templates_created_byToadm_provider_employees")
  dir_notification_templates_dir_notification_templates_deleted_byToadm_provider_employees  dir_notification_templates[]  @relation("dir_notification_templates_deleted_byToadm_provider_employees")
  dir_notification_templates_dir_notification_templates_updated_byToadm_provider_employees  dir_notification_templates[]  @relation("dir_notification_templates_updated_byToadm_provider_employees")
  dir_ownership_types_dir_ownership_types_created_byToadm_provider_employees                dir_ownership_types[]         @relation("dir_ownership_types_created_byToadm_provider_employees")
  dir_ownership_types_dir_ownership_types_deleted_byToadm_provider_employees                dir_ownership_types[]         @relation("dir_ownership_types_deleted_byToadm_provider_employees")
  dir_ownership_types_dir_ownership_types_updated_byToadm_provider_employees                dir_ownership_types[]         @relation("dir_ownership_types_updated_byToadm_provider_employees")
  dir_platform_configs_dir_platform_configs_created_byToadm_provider_employees              dir_platform_configs[]        @relation("dir_platform_configs_created_byToadm_provider_employees")
  dir_platform_configs_dir_platform_configs_deleted_byToadm_provider_employees              dir_platform_configs[]        @relation("dir_platform_configs_deleted_byToadm_provider_employees")
  dir_platform_configs_dir_platform_configs_updated_byToadm_provider_employees              dir_platform_configs[]        @relation("dir_platform_configs_updated_byToadm_provider_employees")
  dir_platforms_dir_platforms_created_byToadm_provider_employees                            dir_platforms[]               @relation("dir_platforms_created_byToadm_provider_employees")
  dir_platforms_dir_platforms_deleted_byToadm_provider_employees                            dir_platforms[]               @relation("dir_platforms_deleted_byToadm_provider_employees")
  dir_platforms_dir_platforms_updated_byToadm_provider_employees                            dir_platforms[]               @relation("dir_platforms_updated_byToadm_provider_employees")
  dir_vehicle_classes_dir_vehicle_classes_created_byToadm_provider_employees                dir_vehicle_classes[]         @relation("dir_vehicle_classes_created_byToadm_provider_employees")
  dir_vehicle_classes_dir_vehicle_classes_deleted_byToadm_provider_employees                dir_vehicle_classes[]         @relation("dir_vehicle_classes_deleted_byToadm_provider_employees")
  dir_vehicle_classes_dir_vehicle_classes_updated_byToadm_provider_employees                dir_vehicle_classes[]         @relation("dir_vehicle_classes_updated_byToadm_provider_employees")
  dir_vehicle_statuses_dir_vehicle_statuses_created_byToadm_provider_employees              dir_vehicle_statuses[]        @relation("dir_vehicle_statuses_created_byToadm_provider_employees")
  dir_vehicle_statuses_dir_vehicle_statuses_deleted_byToadm_provider_employees              dir_vehicle_statuses[]        @relation("dir_vehicle_statuses_deleted_byToadm_provider_employees")
  dir_vehicle_statuses_dir_vehicle_statuses_updated_byToadm_provider_employees              dir_vehicle_statuses[]        @relation("dir_vehicle_statuses_updated_byToadm_provider_employees")
  doc_document_types_doc_document_types_created_byToadm_provider_employees                  doc_document_types[]          @relation("doc_document_types_created_byToadm_provider_employees")
  doc_document_types_doc_document_types_deleted_byToadm_provider_employees                  doc_document_types[]          @relation("doc_document_types_deleted_byToadm_provider_employees")
  doc_document_types_doc_document_types_updated_byToadm_provider_employees                  doc_document_types[]          @relation("doc_document_types_updated_byToadm_provider_employees")
  doc_entity_types_doc_entity_types_created_byToadm_provider_employees                      doc_entity_types[]            @relation("doc_entity_types_created_byToadm_provider_employees")
  doc_entity_types_doc_entity_types_deleted_byToadm_provider_employees                      doc_entity_types[]            @relation("doc_entity_types_deleted_byToadm_provider_employees")
  doc_entity_types_doc_entity_types_updated_byToadm_provider_employees                      doc_entity_types[]            @relation("doc_entity_types_updated_byToadm_provider_employees")
  fin_driver_payment_batches_fin_driver_payment_batches_created_byToadm_provider_employees  fin_driver_payment_batches[]  @relation("fin_driver_payment_batches_created_byToadm_provider_employees")
  fin_driver_payment_batches_fin_driver_payment_batches_deleted_byToadm_provider_employees  fin_driver_payment_batches[]  @relation("fin_driver_payment_batches_deleted_byToadm_provider_employees")
  fin_driver_payment_batches_fin_driver_payment_batches_updated_byToadm_provider_employees  fin_driver_payment_batches[]  @relation("fin_driver_payment_batches_updated_byToadm_provider_employees")
  fin_driver_payments_fin_driver_payments_created_byToadm_provider_employees                fin_driver_payments[]         @relation("fin_driver_payments_created_byToadm_provider_employees")
  fin_driver_payments_fin_driver_payments_deleted_byToadm_provider_employees                fin_driver_payments[]         @relation("fin_driver_payments_deleted_byToadm_provider_employees")
  fin_driver_payments_fin_driver_payments_updated_byToadm_provider_employees                fin_driver_payments[]         @relation("fin_driver_payments_updated_byToadm_provider_employees")
  flt_vehicle_assignments_flt_vehicle_assignments_created_byToadm_provider_employees        flt_vehicle_assignments[]     @relation("flt_vehicle_assignments_created_byToadm_provider_employees")
  flt_vehicle_assignments_flt_vehicle_assignments_deleted_byToadm_provider_employees        flt_vehicle_assignments[]     @relation("flt_vehicle_assignments_deleted_byToadm_provider_employees")
  flt_vehicle_assignments_flt_vehicle_assignments_updated_byToadm_provider_employees        flt_vehicle_assignments[]     @relation("flt_vehicle_assignments_updated_byToadm_provider_employees")
  flt_vehicle_equipments_flt_vehicle_equipments_created_byToadm_provider_employees          flt_vehicle_equipments[]      @relation("flt_vehicle_equipments_created_byToadm_provider_employees")
  flt_vehicle_equipments_flt_vehicle_equipments_deleted_byToadm_provider_employees          flt_vehicle_equipments[]      @relation("flt_vehicle_equipments_deleted_byToadm_provider_employees")
  flt_vehicle_equipments_flt_vehicle_equipments_updated_byToadm_provider_employees          flt_vehicle_equipments[]      @relation("flt_vehicle_equipments_updated_byToadm_provider_employees")
  flt_vehicle_events_flt_vehicle_events_created_byToadm_provider_employees                  flt_vehicle_events[]          @relation("flt_vehicle_events_created_byToadm_provider_employees")
  flt_vehicle_events_flt_vehicle_events_deleted_byToadm_provider_employees                  flt_vehicle_events[]          @relation("flt_vehicle_events_deleted_byToadm_provider_employees")
  flt_vehicle_events_flt_vehicle_events_updated_byToadm_provider_employees                  flt_vehicle_events[]          @relation("flt_vehicle_events_updated_byToadm_provider_employees")
  flt_vehicle_expenses_flt_vehicle_expenses_approved_byToadm_provider_employees             flt_vehicle_expenses[]        @relation("flt_vehicle_expenses_approved_byToadm_provider_employees")
  flt_vehicle_expenses_flt_vehicle_expenses_created_byToadm_provider_employees              flt_vehicle_expenses[]        @relation("flt_vehicle_expenses_created_byToadm_provider_employees")
  flt_vehicle_expenses_flt_vehicle_expenses_deleted_byToadm_provider_employees              flt_vehicle_expenses[]        @relation("flt_vehicle_expenses_deleted_byToadm_provider_employees")
  flt_vehicle_expenses_flt_vehicle_expenses_receipt_verified_byToadm_provider_employees     flt_vehicle_expenses[]        @relation("flt_vehicle_expenses_receipt_verified_byToadm_provider_employees")
  flt_vehicle_expenses_flt_vehicle_expenses_updated_byToadm_provider_employees              flt_vehicle_expenses[]        @relation("flt_vehicle_expenses_updated_byToadm_provider_employees")
  flt_vehicle_inspections_flt_vehicle_inspections_created_byToadm_provider_employees        flt_vehicle_inspections[]     @relation("flt_vehicle_inspections_created_byToadm_provider_employees")
  flt_vehicle_inspections_flt_vehicle_inspections_updated_byToadm_provider_employees        flt_vehicle_inspections[]     @relation("flt_vehicle_inspections_updated_byToadm_provider_employees")
  flt_vehicle_insurances_flt_vehicle_insurances_created_byToadm_provider_employees          flt_vehicle_insurances[]      @relation("flt_vehicle_insurances_created_byToadm_provider_employees")
  flt_vehicle_insurances_flt_vehicle_insurances_deleted_byToadm_provider_employees          flt_vehicle_insurances[]      @relation("flt_vehicle_insurances_deleted_byToadm_provider_employees")
  flt_vehicle_insurances_flt_vehicle_insurances_updated_byToadm_provider_employees          flt_vehicle_insurances[]      @relation("flt_vehicle_insurances_updated_byToadm_provider_employees")
  flt_vehicle_maintenance_flt_vehicle_maintenance_approved_byToadm_provider_employees       flt_vehicle_maintenance[]     @relation("flt_vehicle_maintenance_approved_byToadm_provider_employees")
  flt_vehicle_maintenance_flt_vehicle_maintenance_created_byToadm_provider_employees        flt_vehicle_maintenance[]     @relation("flt_vehicle_maintenance_created_byToadm_provider_employees")
  flt_vehicle_maintenance_flt_vehicle_maintenance_deleted_byToadm_provider_employees        flt_vehicle_maintenance[]     @relation("flt_vehicle_maintenance_deleted_byToadm_provider_employees")
  flt_vehicle_maintenance_flt_vehicle_maintenance_quality_check_byToadm_provider_employees  flt_vehicle_maintenance[]     @relation("flt_vehicle_maintenance_quality_check_byToadm_provider_employees")
  flt_vehicle_maintenance_flt_vehicle_maintenance_requested_byToadm_provider_employees      flt_vehicle_maintenance[]     @relation("flt_vehicle_maintenance_requested_byToadm_provider_employees")
  flt_vehicle_maintenance_flt_vehicle_maintenance_updated_byToadm_provider_employees        flt_vehicle_maintenance[]     @relation("flt_vehicle_maintenance_updated_byToadm_provider_employees")
  flt_vehicles_flt_vehicles_created_byToadm_provider_employees                              flt_vehicles[]                @relation("flt_vehicles_created_byToadm_provider_employees")
  flt_vehicles_flt_vehicles_deleted_byToadm_provider_employees                              flt_vehicles[]                @relation("flt_vehicles_deleted_byToadm_provider_employees")
  flt_vehicles_flt_vehicles_updated_byToadm_provider_employees                              flt_vehicles[]                @relation("flt_vehicles_updated_byToadm_provider_employees")
  rid_driver_training                                                                       rid_driver_training[]
  rid_drivers_rid_drivers_created_byToadm_provider_employees                                rid_drivers[]                 @relation("rid_drivers_created_byToadm_provider_employees")
  rid_drivers_rid_drivers_deleted_byToadm_provider_employees                                rid_drivers[]                 @relation("rid_drivers_deleted_byToadm_provider_employees")
  rid_drivers_rid_drivers_photo_verified_byToadm_provider_employees                         rid_drivers[]                 @relation("rid_drivers_photo_verified_byToadm_provider_employees")
  rid_drivers_rid_drivers_updated_byToadm_provider_employees                                rid_drivers[]                 @relation("rid_drivers_updated_byToadm_provider_employees")
  rid_drivers_rid_drivers_verified_byToadm_provider_employees                               rid_drivers[]                 @relation("rid_drivers_verified_byToadm_provider_employees")
  sup_canned_responses                                                                      sup_canned_responses[]
  sup_ticket_categories_sup_ticket_categories_created_byToadm_provider_employees            sup_ticket_categories[]       @relation("sup_ticket_categories_created_byToadm_provider_employees")
  sup_ticket_categories_sup_ticket_categories_updated_byToadm_provider_employees            sup_ticket_categories[]       @relation("sup_ticket_categories_updated_byToadm_provider_employees")
  sup_ticket_sla_rules_sup_ticket_sla_rules_created_byToadm_provider_employees              sup_ticket_sla_rules[]        @relation("sup_ticket_sla_rules_created_byToadm_provider_employees")
  sup_ticket_sla_rules_sup_ticket_sla_rules_updated_byToadm_provider_employees              sup_ticket_sla_rules[]        @relation("sup_ticket_sla_rules_updated_byToadm_provider_employees")
  sup_tickets                                                                               sup_tickets[]
  trp_platform_account_keys                                                                 trp_platform_account_keys[]

  @@index([created_by])
  @@index([deleted_at])
  @@index([first_name])
  @@index([last_name])
  @@index([permissions], map: "adm_provider_employees_permissions_gin", type: Gin)
  @@index([updated_by])
}

model adm_role_permissions {
  id         String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  role_id    String    @db.Uuid
  resource   String    @db.VarChar(100)
  action     String    @db.VarChar(50)
  conditions Json?
  created_at DateTime  @default(now()) @db.Timestamptz(6)
  adm_roles  adm_roles @relation(fields: [role_id], references: [id], onDelete: Cascade, map: "fk_adm_role_permissions_role")
}

model adm_role_versions {
  id                   String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  role_id              String       @db.Uuid
  version_number       Int
  permissions_snapshot Json
  changed_by           String?      @db.Uuid
  change_reason        String?
  created_at           DateTime     @default(now()) @db.Timestamptz(6)
  adm_members          adm_members? @relation(fields: [changed_by], references: [id], map: "fk_adm_role_versions_changed_by")
  adm_roles            adm_roles    @relation(fields: [role_id], references: [id], onDelete: Cascade, map: "fk_adm_role_versions_role")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model adm_roles {
  id                                                 String                 @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                          String                 @db.Uuid
  name                                               String                 @db.VarChar(100)
  description                                        String?
  permissions                                        Json                   @default("{}")
  status                                             String                 @default("active") @db.VarChar(50)
  created_at                                         DateTime               @default(now()) @db.Timestamptz(6)
  created_by                                         String?                @db.Uuid
  updated_at                                         DateTime               @default(now()) @db.Timestamptz(6)
  updated_by                                         String?                @db.Uuid
  deleted_at                                         DateTime?              @db.Timestamptz(6)
  deleted_by                                         String?                @db.Uuid
  deletion_reason                                    String?
  slug                                               String                 @unique @db.VarChar(100)
  parent_role_id                                     String?                @db.Uuid
  is_system                                          Boolean                @default(false)
  is_default                                         Boolean                @default(false)
  max_members                                        Int?
  valid_from                                         DateTime?              @db.Timestamptz(6)
  valid_until                                        DateTime?              @db.Timestamptz(6)
  approval_required                                  Boolean                @default(false)
  adm_member_roles                                   adm_member_roles[]
  adm_members_adm_members_default_role_idToadm_roles adm_members[]          @relation("adm_members_default_role_idToadm_roles")
  adm_role_permissions                               adm_role_permissions[]
  adm_role_versions                                  adm_role_versions[]
  adm_members_adm_roles_created_byToadm_members      adm_members?           @relation("adm_roles_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_adm_roles_deleted_byToadm_members      adm_members?           @relation("adm_roles_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_tenants                                        adm_tenants            @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_adm_roles_updated_byToadm_members      adm_members?           @relation("adm_roles_updated_byToadm_members", fields: [updated_by], references: [id])
  adm_roles                                          adm_roles?             @relation("adm_rolesToadm_roles", fields: [parent_role_id], references: [id], map: "fk_adm_roles_parent")
  other_adm_roles                                    adm_roles[]            @relation("adm_rolesToadm_roles")

  @@index([created_by])
  @@index([deleted_at])
  @@index([permissions], map: "adm_roles_permissions_gin", type: Gin)
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model adm_tenant_lifecycle_events {
  id                     String                  @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id              String                  @db.Uuid
  event_type             String                  @db.VarChar(50)
  performed_by           String?                 @db.Uuid
  effective_date         DateTime?               @db.Date
  description            String?
  created_at             DateTime                @default(now()) @db.Timestamptz(6)
  adm_provider_employees adm_provider_employees? @relation(fields: [performed_by], references: [id])
  adm_tenants            adm_tenants             @relation(fields: [tenant_id], references: [id], onDelete: Cascade)

  @@index([effective_date(sort: Desc)])
  @@index([event_type])
  @@index([tenant_id, event_type], map: "adm_tenant_lifecycle_events_tenant_event_idx")
  @@index([tenant_id])
}

model adm_tenant_settings {
  id            String      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_id     String      @db.Uuid
  setting_key   String      @db.VarChar(100)
  setting_value Json
  category      String?     @db.VarChar(50)
  is_encrypted  Boolean     @default(false)
  updated_at    DateTime    @default(now()) @db.Timestamptz(6)
  adm_tenants   adm_tenants @relation(fields: [tenant_id], references: [id], onDelete: Cascade, map: "fk_adm_tenant_settings_tenant")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model adm_tenant_vehicle_classes {
  id                                                             String               @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                      String               @db.Uuid
  code                                                           String               @db.VarChar(50)
  name                                                           String               @db.VarChar(100)
  description                                                    String?
  criteria                                                       Json?
  based_on_class_id                                              String?              @db.Uuid
  status                                                         lifecycle_status     @default(active)
  metadata                                                       Json?
  created_at                                                     DateTime             @default(now()) @db.Timestamptz(6)
  updated_at                                                     DateTime             @default(now()) @db.Timestamptz(6)
  created_by                                                     String               @db.Uuid
  updated_by                                                     String?              @db.Uuid
  deleted_at                                                     DateTime?            @db.Timestamptz(6)
  deleted_by                                                     String?              @db.Uuid
  deletion_reason                                                String?
  dir_vehicle_classes                                            dir_vehicle_classes? @relation(fields: [based_on_class_id], references: [id], onUpdate: NoAction, map: "fk_adm_tenant_vehicle_classes_based_on")
  adm_members_adm_tenant_vehicle_classes_created_byToadm_members adm_members          @relation("adm_tenant_vehicle_classes_created_byToadm_members", fields: [created_by], references: [id], onUpdate: NoAction, map: "fk_adm_tenant_vehicle_classes_created_by")
  adm_members_adm_tenant_vehicle_classes_deleted_byToadm_members adm_members?         @relation("adm_tenant_vehicle_classes_deleted_byToadm_members", fields: [deleted_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_adm_tenant_vehicle_classes_deleted_by")
  adm_tenants                                                    adm_tenants          @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_adm_tenant_vehicle_classes_tenant")
  adm_members_adm_tenant_vehicle_classes_updated_byToadm_members adm_members?         @relation("adm_tenant_vehicle_classes_updated_byToadm_members", fields: [updated_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_adm_tenant_vehicle_classes_updated_by")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model adm_tenants {
  id                           String                         @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  name                         String
  country_code                 String                         @db.VarChar(2)
  clerk_organization_id        String?                        @unique(map: "adm_tenants_clerk_org_unique")
  vat_rate                     Decimal?                       @db.Decimal(5, 2)
  default_currency             String                         @default("EUR") @db.Char(3)
  timezone                     String                         @default("Europe/Paris")
  created_at                   DateTime                       @default(now()) @db.Timestamptz(6)
  updated_at                   DateTime                       @default(now()) @db.Timestamptz(6)
  deleted_at                   DateTime?                      @db.Timestamptz(6)
  subdomain                    String?                        @unique @db.VarChar(100)
  status                       tenant_status                  @default(trialing)
  onboarding_completed_at      DateTime?                      @db.Timestamptz(6)
  trial_ends_at                DateTime?                      @db.Timestamptz(6)
  next_invoice_date            DateTime?                      @db.Date
  primary_contact_email        String?                        @db.VarChar(255)
  primary_contact_phone        String?                        @db.VarChar(50)
  billing_email                String?                        @db.VarChar(255)
  adm_audit_logs               adm_audit_logs[]
  adm_invitations              adm_invitations[]
  adm_member_roles             adm_member_roles[]
  adm_members                  adm_members[]
  adm_notification_logs        adm_notification_logs[]
  adm_roles                    adm_roles[]
  adm_tenant_lifecycle_events  adm_tenant_lifecycle_events[]
  adm_tenant_settings          adm_tenant_settings[]
  adm_tenant_vehicle_classes   adm_tenant_vehicle_classes[]
  bil_payment_methods          bil_payment_methods[]
  bil_promotion_usage          bil_promotion_usage[]
  bil_tenant_invoices          bil_tenant_invoices[]
  bil_tenant_subscriptions     bil_tenant_subscriptions[]
  bil_tenant_usage_metrics     bil_tenant_usage_metrics[]
  crm_contracts                crm_contracts[]
  dir_car_makes                dir_car_makes[]
  dir_car_models               dir_car_models[]
  dir_maintenance_types        dir_maintenance_types[]
  dir_platform_configs         dir_platform_configs[]
  doc_documents                doc_documents[]
  fin_accounts                 fin_accounts[]
  fin_driver_payment_batches   fin_driver_payment_batches[]
  fin_driver_payments          fin_driver_payments[]
  fin_toll_transactions        fin_toll_transactions[]
  fin_traffic_fines            fin_traffic_fines[]
  fin_transactions             fin_transactions[]
  flt_vehicle_assignments      flt_vehicle_assignments[]
  flt_vehicle_equipments       flt_vehicle_equipments[]
  flt_vehicle_events           flt_vehicle_events[]
  flt_vehicle_expenses         flt_vehicle_expenses[]
  flt_vehicle_inspections      flt_vehicle_inspections[]
  flt_vehicle_insurances       flt_vehicle_insurances[]
  flt_vehicle_maintenance      flt_vehicle_maintenance[]
  flt_vehicles                 flt_vehicles[]
  rev_driver_revenues          rev_driver_revenues[]
  rev_reconciliations          rev_reconciliations[]
  rev_revenue_imports          rev_revenue_imports[]
  rid_driver_blacklists        rid_driver_blacklists[]
  rid_driver_cooperation_terms rid_driver_cooperation_terms[]
  rid_driver_documents         rid_driver_documents[]
  rid_driver_languages         rid_driver_languages[]
  rid_driver_performances      rid_driver_performances[]
  rid_driver_requests          rid_driver_requests[]
  rid_driver_training          rid_driver_training[]
  rid_drivers                  rid_drivers[]
  sch_goal_types               sch_goal_types[]
  sch_goals                    sch_goals[]
  sch_locations                sch_locations[]
  sch_maintenance_schedules    sch_maintenance_schedules[]
  sch_shift_types              sch_shift_types[]
  sch_shifts                   sch_shifts[]
  sch_task_types               sch_task_types[]
  sch_tasks                    sch_tasks[]
  sup_canned_responses         sup_canned_responses[]
  sup_customer_feedback        sup_customer_feedback[]
  sup_ticket_categories        sup_ticket_categories[]
  sup_ticket_sla_rules         sup_ticket_sla_rules[]
  sup_tickets                  sup_tickets[]
  trp_client_invoices          trp_client_invoices[]
  trp_platform_accounts        trp_platform_accounts[]
  trp_settlements              trp_settlements[]
  trp_trips                    trp_trips[]

  @@index([clerk_organization_id])
  @@index([country_code])
  @@index([default_currency])
  @@index([deleted_at])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model bil_billing_plans {
  id                                                                                    String                     @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  plan_name                                                                             String
  description                                                                           String?
  monthly_fee                                                                           Decimal                    @default(0) @db.Decimal(14, 2)
  annual_fee                                                                            Decimal                    @default(0) @db.Decimal(14, 2)
  currency                                                                              String                     @db.VarChar(3)
  features                                                                              Json                       @default("{}")
  metadata                                                                              Json                       @default("{}")
  created_at                                                                            DateTime                   @default(now()) @db.Timestamptz(6)
  created_by                                                                            String?                    @db.Uuid
  updated_at                                                                            DateTime                   @default(now()) @db.Timestamptz(6)
  updated_by                                                                            String?                    @db.Uuid
  deleted_at                                                                            DateTime?                  @db.Timestamptz(6)
  deleted_by                                                                            String?                    @db.Uuid
  deletion_reason                                                                       String?
  plan_code                                                                             String?                    @db.VarChar(100)
  price_monthly                                                                         Decimal?                   @db.Decimal(18, 2)
  price_yearly                                                                          Decimal?                   @db.Decimal(18, 2)
  vat_rate                                                                              Decimal?                   @db.Decimal(5, 2)
  max_vehicles                                                                          Int?
  max_drivers                                                                           Int?
  max_users                                                                             Int?
  version                                                                               Int?                       @default(1)
  stripe_price_id_monthly                                                               String?
  stripe_price_id_yearly                                                                String?
  billing_interval                                                                      billing_interval?          @default(month)
  status                                                                                billing_plan_status?
  adm_provider_employees_bil_billing_plans_created_byToadm_provider_employees           adm_provider_employees?    @relation("bil_billing_plans_created_byToadm_provider_employees", fields: [created_by], references: [id])
  adm_provider_employees_bil_billing_plans_deleted_byToadm_provider_employees           adm_provider_employees?    @relation("bil_billing_plans_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id])
  adm_provider_employees_bil_billing_plans_updated_byToadm_provider_employees           adm_provider_employees?    @relation("bil_billing_plans_updated_byToadm_provider_employees", fields: [updated_by], references: [id])
  bil_promotions                                                                        bil_promotions[]
  bil_tenant_subscriptions_bil_tenant_subscriptions_plan_idTobil_billing_plans          bil_tenant_subscriptions[] @relation("bil_tenant_subscriptions_plan_idTobil_billing_plans")
  bil_tenant_subscriptions_bil_tenant_subscriptions_previous_plan_idTobil_billing_plans bil_tenant_subscriptions[] @relation("bil_tenant_subscriptions_previous_plan_idTobil_billing_plans")
  crm_contracts                                                                         crm_contracts[]
  crm_opportunities                                                                     crm_opportunities[]

  @@index([created_by])
  @@index([deleted_at])
  @@index([features], type: Gin)
  @@index([metadata], type: Gin)
  @@index([updated_by])
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model bil_payment_methods {
  id                                                                            String                     @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                                     String                     @db.Uuid
  provider_token                                                                String
  expires_at                                                                    DateTime?                  @db.Date
  metadata                                                                      Json                       @default("{}")
  created_at                                                                    DateTime                   @default(now()) @db.Timestamptz(6)
  created_by                                                                    String?                    @db.Uuid
  updated_at                                                                    DateTime                   @default(now()) @db.Timestamptz(6)
  updated_by                                                                    String?                    @db.Uuid
  deleted_at                                                                    DateTime?                  @db.Timestamptz(6)
  deleted_by                                                                    String?                    @db.Uuid
  deletion_reason                                                               String?
  provider                                                                      String?                    @db.VarChar(50)
  provider_payment_method_id                                                    String?
  payment_type                                                                  payment_type?
  card_brand                                                                    String?                    @db.VarChar(50)
  card_last4                                                                    String?                    @db.Char(4)
  card_exp_month                                                                Int?
  card_exp_year                                                                 Int?
  bank_name                                                                     String?                    @db.VarChar(100)
  bank_account_last4                                                            String?                    @db.Char(4)
  bank_country                                                                  String?                    @db.Char(2)
  status                                                                        payment_method_status?     @default(active)
  is_default                                                                    Boolean?                   @default(false)
  last_used_at                                                                  DateTime?                  @db.Timestamptz(6)
  adm_provider_employees_bil_payment_methods_created_byToadm_provider_employees adm_provider_employees?    @relation("bil_payment_methods_created_byToadm_provider_employees", fields: [created_by], references: [id])
  adm_provider_employees_bil_payment_methods_deleted_byToadm_provider_employees adm_provider_employees?    @relation("bil_payment_methods_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id])
  adm_tenants                                                                   adm_tenants                @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_provider_employees_bil_payment_methods_updated_byToadm_provider_employees adm_provider_employees?    @relation("bil_payment_methods_updated_byToadm_provider_employees", fields: [updated_by], references: [id])
  bil_tenant_subscriptions                                                      bil_tenant_subscriptions[]
  fin_traffic_fines                                                             fin_traffic_fines[]
  fin_transactions                                                              fin_transactions[]

  @@index([created_by])
  @@index([deleted_at])
  @@index([expires_at])
  @@index([metadata], type: Gin)
  @@index([tenant_id])
  @@index([updated_by])
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bil_promotion_usage {
  id                  String               @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  promotion_id        String               @db.Uuid
  tenant_id           String               @db.Uuid
  invoice_id          String?              @db.Uuid
  applied_at          DateTime             @default(now()) @db.Timestamptz(6)
  discount_amount     Decimal              @db.Decimal(18, 2)
  bil_tenant_invoices bil_tenant_invoices? @relation(fields: [invoice_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_bil_promotion_usage_invoice")
  bil_promotions      bil_promotions       @relation(fields: [promotion_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_bil_promotion_usage_promotion")
  adm_tenants         adm_tenants          @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_bil_promotion_usage_tenant")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bil_promotions {
  id                     String                  @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  code                   String                  @unique @db.VarChar(50)
  description            String?
  discount_type          promotion_discount_type
  discount_value         Decimal                 @db.Decimal(10, 2)
  currency               String?                 @db.Char(3)
  max_redemptions        Int?
  redemptions_count      Int                     @default(0)
  valid_from             DateTime                @db.Timestamptz(6)
  valid_until            DateTime                @db.Timestamptz(6)
  applies_to             promotion_applies_to
  plan_id                String?                 @db.Uuid
  status                 promotion_status        @default(active)
  metadata               Json?                   @default("{}")
  created_at             DateTime                @default(now()) @db.Timestamptz(6)
  created_by             String?                 @db.Uuid
  bil_promotion_usage    bil_promotion_usage[]
  adm_provider_employees adm_provider_employees? @relation(fields: [created_by], references: [id], onUpdate: NoAction, map: "fk_bil_promotions_created_by")
  bil_billing_plans      bil_billing_plans?      @relation(fields: [plan_id], references: [id], onUpdate: NoAction, map: "fk_bil_promotions_plan")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model bil_tenant_invoice_lines {
  id                                                                                 String                    @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  invoice_id                                                                         String                    @db.Uuid
  description                                                                        String
  amount                                                                             Decimal                   @default(0) @db.Decimal(18, 2)
  quantity                                                                           Decimal                   @default(1) @db.Decimal(10, 2)
  metadata                                                                           Json                      @default("{}")
  created_at                                                                         DateTime                  @default(now()) @db.Timestamptz(6)
  created_by                                                                         String?                   @db.Uuid
  updated_at                                                                         DateTime                  @default(now()) @db.Timestamptz(6)
  updated_by                                                                         String?                   @db.Uuid
  deleted_at                                                                         DateTime?                 @db.Timestamptz(6)
  deleted_by                                                                         String?                   @db.Uuid
  deletion_reason                                                                    String?
  line_type                                                                          invoice_line_type?
  unit_price                                                                         Decimal?                  @db.Decimal(18, 2)
  tax_rate                                                                           Decimal?                  @db.Decimal(5, 2)
  tax_amount                                                                         Decimal?                  @db.Decimal(18, 2)
  discount_amount                                                                    Decimal?                  @db.Decimal(18, 2)
  source_type                                                                        invoice_line_source_type?
  source_id                                                                          String?                   @db.Uuid
  adm_provider_employees_bil_tenant_invoice_lines_created_byToadm_provider_employees adm_provider_employees?   @relation("bil_tenant_invoice_lines_created_byToadm_provider_employees", fields: [created_by], references: [id])
  adm_provider_employees_bil_tenant_invoice_lines_deleted_byToadm_provider_employees adm_provider_employees?   @relation("bil_tenant_invoice_lines_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id])
  bil_tenant_invoices                                                                bil_tenant_invoices       @relation(fields: [invoice_id], references: [id], onDelete: Cascade)
  adm_provider_employees_bil_tenant_invoice_lines_updated_byToadm_provider_employees adm_provider_employees?   @relation("bil_tenant_invoice_lines_updated_byToadm_provider_employees", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([description])
  @@index([invoice_id])
  @@index([metadata], type: Gin)
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model bil_tenant_invoices {
  id                                                                            String                     @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                                     String                     @db.Uuid
  invoice_number                                                                String
  invoice_date                                                                  DateTime                   @db.Date
  due_date                                                                      DateTime                   @db.Date
  total_amount                                                                  Decimal                    @default(0) @db.Decimal(18, 2)
  currency                                                                      String                     @db.VarChar(3)
  metadata                                                                      Json                       @default("{}")
  created_at                                                                    DateTime                   @default(now()) @db.Timestamptz(6)
  created_by                                                                    String?                    @db.Uuid
  updated_at                                                                    DateTime                   @default(now()) @db.Timestamptz(6)
  updated_by                                                                    String?                    @db.Uuid
  deleted_at                                                                    DateTime?                  @db.Timestamptz(6)
  deleted_by                                                                    String?                    @db.Uuid
  deletion_reason                                                               String?
  subscription_id                                                               String?                    @db.Uuid
  period_start                                                                  DateTime?                  @db.Timestamptz(6)
  period_end                                                                    DateTime?                  @db.Timestamptz(6)
  paid_at                                                                       DateTime?                  @db.Timestamptz(6)
  subtotal                                                                      Decimal?                   @db.Decimal(18, 2)
  tax_rate                                                                      Decimal?                   @db.Decimal(5, 2)
  tax_amount                                                                    Decimal?                   @db.Decimal(18, 2)
  amount_paid                                                                   Decimal?                   @default(0) @db.Decimal(18, 2)
  amount_due                                                                    Decimal?                   @default(0) @db.Decimal(18, 2)
  status                                                                        invoice_status?
  stripe_invoice_id                                                             String?                    @db.VarChar(255)
  document_url                                                                  String?
  bil_promotion_usage                                                           bil_promotion_usage[]
  bil_tenant_invoice_lines                                                      bil_tenant_invoice_lines[]
  adm_provider_employees_bil_tenant_invoices_created_byToadm_provider_employees adm_provider_employees?    @relation("bil_tenant_invoices_created_byToadm_provider_employees", fields: [created_by], references: [id])
  adm_provider_employees_bil_tenant_invoices_deleted_byToadm_provider_employees adm_provider_employees?    @relation("bil_tenant_invoices_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id])
  adm_tenants                                                                   adm_tenants                @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_provider_employees_bil_tenant_invoices_updated_byToadm_provider_employees adm_provider_employees?    @relation("bil_tenant_invoices_updated_byToadm_provider_employees", fields: [updated_by], references: [id])
  bil_tenant_subscriptions                                                      bil_tenant_subscriptions?  @relation(fields: [subscription_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_bil_invoices_subscription")

  @@index([created_by])
  @@index([deleted_at])
  @@index([due_date])
  @@index([invoice_date])
  @@index([invoice_number])
  @@index([metadata], type: Gin)
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model bil_tenant_subscriptions {
  id                                                                                 String                     @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                                          String                     @db.Uuid
  plan_id                                                                            String                     @db.Uuid
  subscription_start                                                                 DateTime                   @db.Date
  subscription_end                                                                   DateTime?                  @db.Date
  metadata                                                                           Json                       @default("{}")
  created_at                                                                         DateTime                   @default(now()) @db.Timestamptz(6)
  created_by                                                                         String?                    @db.Uuid
  updated_at                                                                         DateTime                   @default(now()) @db.Timestamptz(6)
  updated_by                                                                         String?                    @db.Uuid
  deleted_at                                                                         DateTime?                  @db.Timestamptz(6)
  deleted_by                                                                         String?                    @db.Uuid
  deletion_reason                                                                    String?
  previous_plan_id                                                                   String?                    @db.Uuid
  plan_version                                                                       Int?
  payment_method_id                                                                  String?                    @db.Uuid
  billing_cycle                                                                      billing_interval?          @default(month)
  current_period_start                                                               DateTime?                  @db.Timestamptz(6)
  current_period_end                                                                 DateTime?                  @db.Timestamptz(6)
  trial_end                                                                          DateTime?                  @db.Timestamptz(6)
  status                                                                             subscription_status?
  cancel_at_period_end                                                               Boolean?                   @default(true)
  auto_renew                                                                         Boolean?                   @default(true)
  provider                                                                           String?                    @db.VarChar(50)
  provider_subscription_id                                                           String?
  provider_customer_id                                                               String?
  bil_tenant_invoices                                                                bil_tenant_invoices[]
  adm_provider_employees_bil_tenant_subscriptions_created_byToadm_provider_employees adm_provider_employees?    @relation("bil_tenant_subscriptions_created_byToadm_provider_employees", fields: [created_by], references: [id])
  adm_provider_employees_bil_tenant_subscriptions_deleted_byToadm_provider_employees adm_provider_employees?    @relation("bil_tenant_subscriptions_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id])
  bil_billing_plans_bil_tenant_subscriptions_plan_idTobil_billing_plans              bil_billing_plans          @relation("bil_tenant_subscriptions_plan_idTobil_billing_plans", fields: [plan_id], references: [id], onDelete: Cascade)
  adm_tenants                                                                        adm_tenants                @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_provider_employees_bil_tenant_subscriptions_updated_byToadm_provider_employees adm_provider_employees?    @relation("bil_tenant_subscriptions_updated_byToadm_provider_employees", fields: [updated_by], references: [id])
  bil_payment_methods                                                                bil_payment_methods?       @relation(fields: [payment_method_id], references: [id], onUpdate: NoAction, map: "fk_bil_subscriptions_payment_method")
  bil_billing_plans_bil_tenant_subscriptions_previous_plan_idTobil_billing_plans     bil_billing_plans?         @relation("bil_tenant_subscriptions_previous_plan_idTobil_billing_plans", fields: [previous_plan_id], references: [id], onUpdate: NoAction, map: "fk_bil_subscriptions_previous_plan")
  bil_tenant_usage_metrics                                                           bil_tenant_usage_metrics[]
  crm_contracts                                                                      crm_contracts[]

  @@index([created_by])
  @@index([deleted_at])
  @@index([metadata], type: Gin)
  @@index([plan_id])
  @@index([subscription_end])
  @@index([subscription_start])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model bil_tenant_usage_metrics {
  id                                                                                 String                    @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                                          String                    @db.Uuid
  metric_name                                                                        String                    @db.VarChar(50)
  metric_value                                                                       Decimal                   @default(0) @db.Decimal(18, 2)
  period_start                                                                       DateTime                  @db.Date
  period_end                                                                         DateTime                  @db.Date
  metadata                                                                           Json                      @default("{}")
  created_at                                                                         DateTime                  @default(now()) @db.Timestamptz(6)
  created_by                                                                         String?                   @db.Uuid
  updated_at                                                                         DateTime                  @default(now()) @db.Timestamptz(6)
  updated_by                                                                         String?                   @db.Uuid
  deleted_at                                                                         DateTime?                 @db.Timestamptz(6)
  deleted_by                                                                         String?                   @db.Uuid
  deletion_reason                                                                    String?
  metric_type_id                                                                     String?                   @db.Uuid
  subscription_id                                                                    String?                   @db.Uuid
  plan_version                                                                       Int?
  period_type                                                                        period_type?
  period_start_ts                                                                    DateTime?                 @db.Timestamptz(6)
  period_end_ts                                                                      DateTime?                 @db.Timestamptz(6)
  metric_source                                                                      metric_source?
  adm_provider_employees_bil_tenant_usage_metrics_created_byToadm_provider_employees adm_provider_employees?   @relation("bil_tenant_usage_metrics_created_byToadm_provider_employees", fields: [created_by], references: [id])
  adm_provider_employees_bil_tenant_usage_metrics_deleted_byToadm_provider_employees adm_provider_employees?   @relation("bil_tenant_usage_metrics_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id])
  adm_tenants                                                                        adm_tenants               @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_provider_employees_bil_tenant_usage_metrics_updated_byToadm_provider_employees adm_provider_employees?   @relation("bil_tenant_usage_metrics_updated_byToadm_provider_employees", fields: [updated_by], references: [id])
  bil_tenant_subscriptions                                                           bil_tenant_subscriptions? @relation(fields: [subscription_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_bil_usage_metrics_subscription")
  bil_usage_metric_types                                                             bil_usage_metric_types?   @relation(fields: [metric_type_id], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_bil_usage_metrics_type")

  @@index([created_by])
  @@index([deleted_at])
  @@index([metadata], type: Gin)
  @@index([metric_name])
  @@index([period_end])
  @@index([period_start])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model bil_usage_metric_types {
  id                       String                     @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  name                     String                     @unique @db.VarChar(50)
  unit                     String                     @db.VarChar(20)
  description              String?
  aggregation_method       aggregation_method
  created_at               DateTime                   @default(now()) @db.Timestamptz(6)
  bil_tenant_usage_metrics bil_tenant_usage_metrics[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model crm_addresses {
  id            String          @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  street_line1  String
  street_line2  String?
  city          String          @db.VarChar(100)
  state         String?         @db.VarChar(100)
  postal_code   String?         @db.VarChar(20)
  country_code  String          @db.Char(2)
  address_type  address_type?
  is_default    Boolean         @default(false)
  created_at    DateTime        @default(now()) @db.Timestamptz(6)
  crm_contracts crm_contracts[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model crm_contracts {
  id                                                                       String                    @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  lead_id                                                                  String                    @db.Uuid
  contract_reference                                                       String
  contract_date                                                            DateTime                  @db.Date
  effective_date                                                           DateTime                  @db.Date
  expiry_date                                                              DateTime?                 @db.Date
  total_value                                                              Decimal                   @db.Decimal(18, 2)
  currency                                                                 String                    @db.VarChar(3)
  status                                                                   String                    @default("active")
  metadata                                                                 Json                      @default("{}")
  created_at                                                               DateTime                  @default(now()) @db.Timestamptz(6)
  created_by                                                               String?                   @db.Uuid
  updated_at                                                               DateTime                  @default(now()) @db.Timestamptz(6)
  updated_by                                                               String?                   @db.Uuid
  deleted_at                                                               DateTime?                 @db.Timestamptz(6)
  deleted_by                                                               String?                   @db.Uuid
  deletion_reason                                                          String?
  opportunity_id                                                           String?                   @db.Uuid
  contract_code                                                            String?                   @unique
  signature_date                                                           DateTime?                 @db.Date
  expiration_date                                                          DateTime?                 @db.Date
  vat_rate                                                                 Decimal?                  @db.Decimal(5, 2)
  renewal_type                                                             renewal_type?
  auto_renew                                                               Boolean?                  @default(false)
  renewal_date                                                             DateTime?                 @db.Date
  notice_period_days                                                       Int?
  renewed_from_contract_id                                                 String?                   @db.Uuid
  tenant_id                                                                String                    @db.Uuid
  plan_id                                                                  String?                   @db.Uuid
  subscription_id                                                          String?                   @db.Uuid
  company_name                                                             String?
  contact_name                                                             String?
  contact_email                                                            String?                   @db.Citext
  contact_phone                                                            String?                   @db.VarChar(50)
  billing_address_id                                                       String?                   @db.Uuid
  version_number                                                           Int?                      @default(1)
  document_url                                                             String?
  notes                                                                    String?
  approved_by                                                              String?                   @db.Uuid
  adm_members_crm_contracts_created_byToadm_members                        adm_members?              @relation("crm_contracts_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_crm_contracts_deleted_byToadm_members                        adm_members?              @relation("crm_contracts_deleted_byToadm_members", fields: [deleted_by], references: [id])
  crm_opportunities_crm_contracts_opportunity_idTocrm_opportunities        crm_opportunities?        @relation("crm_contracts_opportunity_idTocrm_opportunities", fields: [opportunity_id], references: [id], onUpdate: NoAction)
  adm_members_crm_contracts_updated_byToadm_members                        adm_members?              @relation("crm_contracts_updated_byToadm_members", fields: [updated_by], references: [id])
  adm_provider_employees_crm_contracts_approved_byToadm_provider_employees adm_provider_employees?   @relation("crm_contracts_approved_byToadm_provider_employees", fields: [approved_by], references: [id], onUpdate: NoAction, map: "fk_crm_contracts_approved_by")
  crm_addresses                                                            crm_addresses?            @relation(fields: [billing_address_id], references: [id], onUpdate: NoAction, map: "fk_crm_contracts_billing_address")
  adm_provider_employees_crm_contracts_created_byToadm_provider_employees  adm_provider_employees?   @relation("crm_contracts_created_byToadm_provider_employees", fields: [created_by], references: [id], onUpdate: NoAction, map: "fk_crm_contracts_created_by")
  adm_provider_employees_crm_contracts_deleted_byToadm_provider_employees  adm_provider_employees?   @relation("crm_contracts_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onUpdate: NoAction, map: "fk_crm_contracts_deleted_by")
  crm_leads                                                                crm_leads                 @relation(fields: [lead_id], references: [id], onDelete: SetNull, map: "fk_crm_contracts_lead")
  bil_billing_plans                                                        bil_billing_plans?        @relation(fields: [plan_id], references: [id], onUpdate: NoAction, map: "fk_crm_contracts_plan")
  crm_contracts                                                            crm_contracts?            @relation("crm_contractsTocrm_contracts", fields: [renewed_from_contract_id], references: [id], onUpdate: NoAction, map: "fk_crm_contracts_renewed_from")
  other_crm_contracts                                                      crm_contracts[]           @relation("crm_contractsTocrm_contracts")
  bil_tenant_subscriptions                                                 bil_tenant_subscriptions? @relation(fields: [subscription_id], references: [id], onUpdate: NoAction, map: "fk_crm_contracts_subscription")
  adm_tenants                                                              adm_tenants               @relation(fields: [tenant_id], references: [id], onDelete: SetNull, onUpdate: NoAction, map: "fk_crm_contracts_tenant")
  adm_provider_employees_crm_contracts_updated_byToadm_provider_employees  adm_provider_employees?   @relation("crm_contracts_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onUpdate: NoAction, map: "fk_crm_contracts_updated_by")
  crm_opportunities_crm_opportunities_contract_idTocrm_contracts           crm_opportunities[]       @relation("crm_opportunities_contract_idTocrm_contracts")

  @@index([lead_id], map: "crm_contracts_client_id_idx")
  @@index([contract_date])
  @@index([created_by])
  @@index([deleted_at])
  @@index([effective_date])
  @@index([expiry_date])
  @@index([metadata], type: Gin)
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model crm_countries {
  id                     String      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  country_code           String      @unique @db.Char(2)
  country_name_en        String      @db.VarChar(100)
  country_name_fr        String      @db.VarChar(100)
  country_name_ar        String      @db.VarChar(100)
  flag_emoji             String      @db.VarChar(10)
  is_operational         Boolean     @default(false)
  is_visible             Boolean     @default(true)
  display_order          Int
  notification_locale    String      @default("en") @db.VarChar(5)
  created_at             DateTime    @default(now()) @db.Timestamptz(6)
  updated_at             DateTime    @default(now()) @db.Timestamptz(6)
  country_preposition_fr String?     @default("en") @db.VarChar(5)
  country_preposition_en String?     @default("in") @db.VarChar(10)
  country_gdpr           Boolean     @default(false)
  crm_leads              crm_leads[]

  @@index([country_code], map: "idx_crm_countries_code")
  @@index([country_gdpr], map: "idx_crm_countries_gdpr")
  @@index([is_operational], map: "idx_crm_countries_operational")
  @@index([is_visible], map: "idx_crm_countries_visible")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model crm_lead_activities {
  id                String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  lead_id           String    @db.Uuid
  activity_type     String    @db.VarChar(50)
  title             String?   @db.VarChar(255)
  description       String?
  metadata          Json?     @default("{}")
  scheduled_at      DateTime? @db.Timestamptz(6)
  completed_at      DateTime? @db.Timestamptz(6)
  is_completed      Boolean?  @default(false)
  performed_by      String?   @db.Uuid
  performed_by_name String?   @db.VarChar(255)
  created_at        DateTime? @default(now()) @db.Timestamptz(6)
  updated_at        DateTime? @default(now()) @db.Timestamptz(6)
  crm_leads         crm_leads @relation(fields: [lead_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([created_at(sort: Desc)], map: "idx_crm_lead_activities_created_at")
  @@index([lead_id], map: "idx_crm_lead_activities_lead_id")
  @@index([activity_type], map: "idx_crm_lead_activities_type")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model crm_lead_sources {
  id          String      @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  name        String      @unique @db.VarChar(50)
  description String?
  is_active   Boolean     @default(true)
  created_at  DateTime    @default(now()) @db.Timestamptz(6)
  crm_leads   crm_leads[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model crm_leads {
  id                                                                   String                  @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  email                                                                String
  phone                                                                String?
  source                                                               String?
  status                                                               String                  @default("new")
  message                                                              String?
  created_at                                                           DateTime                @default(now()) @db.Timestamptz(6)
  updated_at                                                           DateTime                @default(now()) @db.Timestamptz(6)
  country_code                                                         String?                 @db.Char(2)
  fleet_size                                                           String?                 @db.VarChar(50)
  current_software                                                     String?                 @db.VarChar(255)
  assigned_to                                                          String?                 @db.Uuid
  qualification_score                                                  Int?
  qualification_notes                                                  String?
  qualified_date                                                       DateTime?               @db.Timestamptz(6)
  converted_date                                                       DateTime?               @db.Timestamptz(6)
  utm_source                                                           String?                 @db.VarChar(255)
  utm_medium                                                           String?                 @db.VarChar(255)
  utm_campaign                                                         String?                 @db.VarChar(255)
  metadata                                                             Json?                   @default("{}")
  created_by                                                           String?                 @db.Uuid
  updated_by                                                           String?                 @db.Uuid
  deleted_at                                                           DateTime?               @db.Timestamptz(6)
  deleted_by                                                           String?                 @db.Uuid
  deletion_reason                                                      String?
  lead_code                                                            String?                 @unique @db.VarChar(50)
  first_name                                                           String
  last_name                                                            String
  company_name                                                         String?
  industry                                                             String?
  company_size                                                         Int?
  website_url                                                          String?
  linkedin_url                                                         String?
  city                                                                 String?
  lead_stage                                                           lead_stage?
  fit_score                                                            Decimal?                @db.Decimal(5, 2)
  engagement_score                                                     Decimal?                @db.Decimal(5, 2)
  scoring                                                              Json?
  gdpr_consent                                                         Boolean?
  consent_at                                                           DateTime?               @db.Timestamptz(6)
  source_id                                                            String?                 @db.Uuid
  opportunity_id                                                       String?                 @db.Uuid
  next_action_date                                                     DateTime?               @db.Timestamptz(6)
  priority                                                             String?                 @default("medium") @db.VarChar(20)
  consent_ip                                                           String?                 @db.VarChar(45)
  crm_contracts                                                        crm_contracts[]
  crm_lead_activities                                                  crm_lead_activities[]
  adm_provider_employees_crm_leads_assigned_toToadm_provider_employees adm_provider_employees? @relation("crm_leads_assigned_toToadm_provider_employees", fields: [assigned_to], references: [id], onUpdate: NoAction, map: "fk_crm_leads_assigned_to")
  crm_countries                                                        crm_countries?          @relation(fields: [country_code], references: [country_code], onDelete: Restrict, map: "fk_crm_leads_country")
  adm_provider_employees_crm_leads_created_byToadm_provider_employees  adm_provider_employees? @relation("crm_leads_created_byToadm_provider_employees", fields: [created_by], references: [id], onUpdate: NoAction, map: "fk_crm_leads_created_by")
  adm_provider_employees_crm_leads_deleted_byToadm_provider_employees  adm_provider_employees? @relation("crm_leads_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onUpdate: NoAction, map: "fk_crm_leads_deleted_by")
  crm_opportunities_crm_leads_opportunity_idTocrm_opportunities        crm_opportunities?      @relation("crm_leads_opportunity_idTocrm_opportunities", fields: [opportunity_id], references: [id], onUpdate: NoAction, map: "fk_crm_leads_opportunity")
  crm_lead_sources                                                     crm_lead_sources?       @relation(fields: [source_id], references: [id], onUpdate: NoAction, map: "fk_crm_leads_source")
  adm_provider_employees_crm_leads_updated_byToadm_provider_employees  adm_provider_employees? @relation("crm_leads_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onUpdate: NoAction, map: "fk_crm_leads_updated_by")
  crm_opportunities_crm_opportunities_lead_idTocrm_leads               crm_opportunities[]     @relation("crm_opportunities_lead_idTocrm_leads")

  @@index([created_at(sort: Desc)])
  @@index([deleted_at])
  @@index([status])
  @@index([assigned_to], map: "idx_crm_leads_assigned_to")
  @@index([country_code], map: "idx_crm_leads_country_code")
  @@index([lead_stage], map: "idx_crm_leads_lead_stage")
  @@index([metadata], map: "idx_crm_leads_metadata", type: Gin)
  @@index([qualification_score], map: "idx_crm_leads_qualification_score")
  @@index([deleted_at, status, lead_stage], map: "idx_crm_leads_status_stage_deleted")
  @@index([updated_at], map: "idx_crm_leads_updated_at")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model crm_opportunities {
  id                                                                           String                        @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  lead_id                                                                      String                        @db.Uuid
  stage                                                                        String                        @default("prospect")
  expected_value                                                               Decimal?                      @db.Decimal(18, 2)
  close_date                                                                   DateTime?                     @db.Date
  assigned_to                                                                  String?                       @db.Uuid
  metadata                                                                     Json                          @default("{}")
  created_at                                                                   DateTime                      @default(now()) @db.Timestamptz(6)
  created_by                                                                   String?                       @db.Uuid
  updated_at                                                                   DateTime                      @default(now()) @db.Timestamptz(6)
  updated_by                                                                   String?                       @db.Uuid
  deleted_at                                                                   DateTime?                     @db.Timestamptz(6)
  deleted_by                                                                   String?                       @db.Uuid
  deletion_reason                                                              String?
  probability                                                                  Int?
  status                                                                       opportunity_status            @default(open)
  currency                                                                     String?                       @default("EUR") @db.Char(3)
  discount_amount                                                              Decimal?                      @db.Decimal(15, 2)
  probability_percent                                                          Decimal?                      @default(0) @db.Decimal(5, 2)
  forecast_value                                                               Decimal?                      @db.Decimal(15, 2)
  won_value                                                                    Decimal?                      @db.Decimal(15, 2)
  expected_close_date                                                          DateTime?                     @db.Date
  won_date                                                                     DateTime?                     @db.Date
  lost_date                                                                    DateTime?                     @db.Date
  owner_id                                                                     String?                       @db.Uuid
  loss_reason                                                                  String?                       @db.VarChar(50)
  plan_id                                                                      String?                       @db.Uuid
  contract_id                                                                  String?                       @db.Uuid
  pipeline_id                                                                  String?                       @db.Uuid
  notes                                                                        String?
  stage_entered_at                                                             DateTime                      @default(now()) @db.Timestamptz(6)
  max_days_in_stage                                                            Int?                          @default(14)
  crm_contracts_crm_contracts_opportunity_idTocrm_opportunities                crm_contracts[]               @relation("crm_contracts_opportunity_idTocrm_opportunities")
  crm_leads_crm_leads_opportunity_idTocrm_opportunities                        crm_leads[]                   @relation("crm_leads_opportunity_idTocrm_opportunities")
  adm_members_crm_opportunities_assigned_toToadm_members                       adm_members?                  @relation("crm_opportunities_assigned_toToadm_members", fields: [assigned_to], references: [id])
  adm_members_crm_opportunities_created_byToadm_members                        adm_members?                  @relation("crm_opportunities_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_crm_opportunities_deleted_byToadm_members                        adm_members?                  @relation("crm_opportunities_deleted_byToadm_members", fields: [deleted_by], references: [id])
  crm_leads_crm_opportunities_lead_idTocrm_leads                               crm_leads                     @relation("crm_opportunities_lead_idTocrm_leads", fields: [lead_id], references: [id], onDelete: Cascade)
  adm_members_crm_opportunities_updated_byToadm_members                        adm_members?                  @relation("crm_opportunities_updated_byToadm_members", fields: [updated_by], references: [id])
  adm_provider_employees_crm_opportunities_assigned_toToadm_provider_employees adm_provider_employees?       @relation("crm_opportunities_assigned_toToadm_provider_employees", fields: [assigned_to], references: [id], onUpdate: NoAction, map: "fk_crm_opportunities_assigned_to")
  crm_contracts_crm_opportunities_contract_idTocrm_contracts                   crm_contracts?                @relation("crm_opportunities_contract_idTocrm_contracts", fields: [contract_id], references: [id], onUpdate: NoAction, map: "fk_crm_opportunities_contract")
  adm_provider_employees_crm_opportunities_created_byToadm_provider_employees  adm_provider_employees?       @relation("crm_opportunities_created_byToadm_provider_employees", fields: [created_by], references: [id], onUpdate: NoAction, map: "fk_crm_opportunities_created_by")
  adm_provider_employees_crm_opportunities_deleted_byToadm_provider_employees  adm_provider_employees?       @relation("crm_opportunities_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onUpdate: NoAction, map: "fk_crm_opportunities_deleted_by")
  adm_provider_employees_crm_opportunities_owner_idToadm_provider_employees    adm_provider_employees?       @relation("crm_opportunities_owner_idToadm_provider_employees", fields: [owner_id], references: [id], onUpdate: NoAction, map: "fk_crm_opportunities_owner")
  crm_pipelines                                                                crm_pipelines?                @relation(fields: [pipeline_id], references: [id], onUpdate: NoAction, map: "fk_crm_opportunities_pipeline")
  bil_billing_plans                                                            bil_billing_plans?            @relation(fields: [plan_id], references: [id], onUpdate: NoAction, map: "fk_crm_opportunities_plan")
  adm_provider_employees_crm_opportunities_updated_byToadm_provider_employees  adm_provider_employees?       @relation("crm_opportunities_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onUpdate: NoAction, map: "fk_crm_opportunities_updated_by")

  @@index([assigned_to])
  @@index([close_date])
  @@index([created_by])
  @@index([deleted_at])
  @@index([lead_id])
  @@index([metadata], type: Gin)
  @@index([updated_by])
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model crm_pipelines {
  id                  String              @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  name                String              @db.VarChar(100)
  description         String?
  stages              Json
  default_probability Json?
  is_default          Boolean             @default(false)
  is_active           Boolean             @default(true)
  created_at          DateTime            @default(now()) @db.Timestamptz(6)
  crm_opportunities   crm_opportunities[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model crm_settings {
  id                                                                     String                  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  setting_key                                                            String                  @unique @db.VarChar(100)
  setting_value                                                          Json
  description                                                            String?
  category                                                               String                  @db.VarChar(50)
  data_type                                                              String                  @db.VarChar(20)
  is_active                                                              Boolean                 @default(true)
  is_system                                                              Boolean                 @default(false)
  version                                                                Int                     @default(1)
  schema_version                                                         String?                 @db.VarChar(20)
  created_at                                                             DateTime                @default(now()) @db.Timestamptz(6)
  updated_at                                                             DateTime                @default(now()) @db.Timestamptz(6)
  created_by                                                             String?                 @db.Uuid
  updated_by                                                             String?                 @db.Uuid
  deleted_at                                                             DateTime?               @db.Timestamptz(6)
  deleted_by                                                             String?                 @db.Uuid
  deletion_reason                                                        String?
  display_label                                                          String?                 @db.VarChar(100)
  display_order                                                          Int?                    @default(0)
  ui_component                                                           String?                 @db.VarChar(50)
  help_text                                                              String?
  documentation_url                                                      String?                 @db.VarChar(255)
  default_value                                                          Json?
  adm_provider_employees_crm_settings_created_byToadm_provider_employees adm_provider_employees? @relation("crm_settings_created_byToadm_provider_employees", fields: [created_by], references: [id])
  adm_provider_employees_crm_settings_deleted_byToadm_provider_employees adm_provider_employees? @relation("crm_settings_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id])
  adm_provider_employees_crm_settings_updated_byToadm_provider_employees adm_provider_employees? @relation("crm_settings_updated_byToadm_provider_employees", fields: [updated_by], references: [id])

  @@index([created_by], map: "idx_crm_settings_created_by")
  @@index([deleted_at], map: "idx_crm_settings_deleted")
  @@index([updated_by], map: "idx_crm_settings_updated_by")
  @@index([setting_value], map: "idx_crm_settings_value", type: Gin)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model dir_car_makes {
  id                                                                      String                  @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                               String                  @db.Uuid
  name                                                                    String
  created_at                                                              DateTime                @default(now()) @db.Timestamptz(6)
  updated_at                                                              DateTime                @default(now()) @db.Timestamptz(6)
  code                                                                    String                  @unique(map: "idx_dir_car_makes_code") @db.VarChar(50)
  country_of_origin                                                       String?                 @db.Char(2)
  parent_company                                                          String?                 @db.VarChar(100)
  founded_year                                                            Int?
  logo_url                                                                String?
  status                                                                  lifecycle_status        @default(active)
  metadata                                                                Json?
  created_by                                                              String?                 @db.Uuid
  updated_by                                                              String?                 @db.Uuid
  deleted_at                                                              DateTime?               @db.Timestamptz(6)
  deleted_by                                                              String?                 @db.Uuid
  deletion_reason                                                         String?
  adm_tenants                                                             adm_tenants             @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_provider_employees_dir_car_makes_created_byToadm_provider_employees adm_provider_employees? @relation("dir_car_makes_created_byToadm_provider_employees", fields: [created_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_car_makes_created_by")
  adm_provider_employees_dir_car_makes_deleted_byToadm_provider_employees adm_provider_employees? @relation("dir_car_makes_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_car_makes_deleted_by")
  adm_provider_employees_dir_car_makes_updated_byToadm_provider_employees adm_provider_employees? @relation("dir_car_makes_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_car_makes_updated_by")
  dir_car_models                                                          dir_car_models[]
  flt_vehicles                                                            flt_vehicles[]

  @@index([created_at])
  @@index([tenant_id])
  @@index([updated_at])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model dir_car_models {
  id                                                                       String                  @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                                String                  @db.Uuid
  make_id                                                                  String                  @db.Uuid
  name                                                                     String
  created_at                                                               DateTime                @default(now()) @db.Timestamptz(6)
  updated_at                                                               DateTime                @default(now()) @db.Timestamptz(6)
  vehicle_class_id                                                         String?                 @db.Uuid
  code                                                                     String                  @db.VarChar(50)
  year_start                                                               Int?
  year_end                                                                 Int?
  body_type                                                                String?                 @db.VarChar(50)
  fuel_type                                                                String?                 @db.VarChar(50)
  transmission                                                             String?                 @db.VarChar(50)
  seats_min                                                                Int?
  seats_max                                                                Int?
  length_mm                                                                Int?
  width_mm                                                                 Int?
  height_mm                                                                Int?
  metadata                                                                 Json?
  status                                                                   car_model_status        @default(active)
  created_by                                                               String?                 @db.Uuid
  updated_by                                                               String?                 @db.Uuid
  deleted_at                                                               DateTime?               @db.Timestamptz(6)
  deleted_by                                                               String?                 @db.Uuid
  deletion_reason                                                          String?
  dir_car_makes                                                            dir_car_makes           @relation(fields: [make_id], references: [id], onDelete: Cascade)
  adm_tenants                                                              adm_tenants             @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  dir_vehicle_classes                                                      dir_vehicle_classes?    @relation(fields: [vehicle_class_id], references: [id])
  adm_provider_employees_dir_car_models_created_byToadm_provider_employees adm_provider_employees? @relation("dir_car_models_created_byToadm_provider_employees", fields: [created_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_car_models_created_by")
  adm_provider_employees_dir_car_models_deleted_byToadm_provider_employees adm_provider_employees? @relation("dir_car_models_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_car_models_deleted_by")
  adm_provider_employees_dir_car_models_updated_byToadm_provider_employees adm_provider_employees? @relation("dir_car_models_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_car_models_updated_by")
  flt_vehicles                                                             flt_vehicles[]

  @@unique([tenant_id, make_id, name], map: "dir_car_models_tenant_make_name_uq")
  @@unique([make_id, code], map: "idx_dir_car_models_make_code")
  @@index([created_at])
  @@index([make_id])
  @@index([tenant_id])
  @@index([updated_at])
  @@index([vehicle_class_id])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model dir_country_locales {
  id                                                                            String                  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  country_code                                                                  String                  @unique @db.Char(2)
  country_name                                                                  String                  @db.VarChar(100)
  primary_locale                                                                String                  @db.VarChar(10)
  fallback_locale                                                               String?                 @db.VarChar(10)
  supported_locales                                                             String[]                @default([])
  timezone                                                                      String                  @db.VarChar(50)
  currency                                                                      String                  @db.Char(3)
  currency_symbol                                                               String?                 @db.VarChar(10)
  currency_position                                                             String?                 @db.VarChar(10)
  number_format                                                                 String                  @default("1,234.56") @db.VarChar(20)
  date_format                                                                   String                  @db.VarChar(20)
  time_format                                                                   String                  @db.VarChar(20)
  first_day_of_week                                                             Int                     @default(1) @db.SmallInt
  rtl_enabled                                                                   Boolean                 @default(false)
  status                                                                        lifecycle_status        @default(active)
  created_at                                                                    DateTime                @default(now()) @db.Timestamptz(6)
  created_by                                                                    String?                 @db.Uuid
  updated_at                                                                    DateTime                @default(now()) @db.Timestamptz(6)
  updated_by                                                                    String?                 @db.Uuid
  deleted_at                                                                    DateTime?               @db.Timestamptz(6)
  deleted_by                                                                    String?                 @db.Uuid
  deletion_reason                                                               String?
  adm_provider_employees_dir_country_locales_created_byToadm_provider_employees adm_provider_employees? @relation("dir_country_locales_created_byToadm_provider_employees", fields: [created_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_country_locales_created_by")
  adm_provider_employees_dir_country_locales_deleted_byToadm_provider_employees adm_provider_employees? @relation("dir_country_locales_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_country_locales_deleted_by")
  adm_provider_employees_dir_country_locales_updated_byToadm_provider_employees adm_provider_employees? @relation("dir_country_locales_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_country_locales_updated_by")

  @@index([country_code], map: "idx_dir_country_locales_country")
  @@index([deleted_at], map: "idx_dir_country_locales_deleted_at")
  @@index([status], map: "idx_dir_country_locales_status")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model dir_country_regulations {
  country_code                                                                          String                  @id @db.Char(2)
  vehicle_max_age                                                                       Int?
  min_vehicle_class                                                                     String?
  min_fare_per_trip                                                                     Decimal?                @db.Decimal(10, 2)
  min_fare_per_km                                                                       Decimal?                @db.Decimal(10, 2)
  min_fare_per_hour                                                                     Decimal?                @db.Decimal(10, 2)
  vat_rate                                                                              Decimal?                @db.Decimal(5, 2)
  currency                                                                              String                  @db.Char(3)
  timezone                                                                              String
  created_at                                                                            DateTime                @default(now()) @db.Timestamptz(6)
  updated_at                                                                            DateTime                @default(now()) @db.Timestamptz(6)
  requires_vtc_card                                                                     Boolean                 @default(false)
  min_vehicle_class_id                                                                  String?                 @db.Uuid
  min_vehicle_length_cm                                                                 Int?
  min_vehicle_width_cm                                                                  Int?
  min_vehicle_height_cm                                                                 Int?
  max_vehicle_weight_kg                                                                 Int?
  max_vehicle_mileage_km                                                                Int?
  requires_professional_license                                                         Boolean?
  required_documents                                                                    Json?
  effective_date                                                                        DateTime?               @db.Date
  expiry_date                                                                           DateTime?               @db.Date
  status                                                                                regulation_status       @default(active)
  created_by                                                                            String?                 @db.Uuid
  updated_by                                                                            String?                 @db.Uuid
  deleted_at                                                                            DateTime?               @db.Timestamptz(6)
  deleted_by                                                                            String?                 @db.Uuid
  deletion_reason                                                                       String?
  adm_provider_employees_dir_country_regulations_created_byToadm_provider_employees     adm_provider_employees? @relation("dir_country_regulations_created_byToadm_provider_employees", fields: [created_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_country_regulations_created_by")
  adm_provider_employees_dir_country_regulations_deleted_byToadm_provider_employees     adm_provider_employees? @relation("dir_country_regulations_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_country_regulations_deleted_by")
  dir_vehicle_classes_dir_country_regulations_min_vehicle_class_idTodir_vehicle_classes dir_vehicle_classes?    @relation("dir_country_regulations_min_vehicle_class_idTodir_vehicle_classes", fields: [min_vehicle_class_id], references: [id], onUpdate: NoAction, map: "fk_dir_country_regulations_min_vehicle_class")
  adm_provider_employees_dir_country_regulations_updated_byToadm_provider_employees     adm_provider_employees? @relation("dir_country_regulations_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_country_regulations_updated_by")
  dir_toll_gates                                                                        dir_toll_gates[]
  dir_vehicle_classes_dir_vehicle_classes_country_codeTodir_country_regulations         dir_vehicle_classes[]   @relation("dir_vehicle_classes_country_codeTodir_country_regulations")
  flt_vehicles                                                                          flt_vehicles[]

  @@index([currency])
  @@index([timezone])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model dir_fine_types {
  id                String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  jurisdiction      String              @db.Char(2)
  code              String              @db.VarChar(50)
  description       String
  min_amount        Decimal             @db.Decimal(14, 2)
  max_amount        Decimal             @db.Decimal(14, 2)
  points            Int?
  is_criminal       Boolean             @default(false)
  active            Boolean             @default(true)
  metadata          Json                @default("{}")
  created_at        DateTime            @default(now()) @db.Timestamptz(6)
  updated_at        DateTime            @default(now()) @db.Timestamptz(6)
  fin_traffic_fines fin_traffic_fines[]

  @@unique([jurisdiction, code], map: "dir_fine_types_jurisdiction_code_uq")
}

model dir_maintenance_types {
  id                        String                      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_id                 String                      @db.Uuid
  code                      String                      @db.VarChar(50)
  label                     String                      @db.VarChar(255)
  category                  maintenance_category
  default_frequency_km      Int?
  default_frequency_months  Int?
  estimated_duration_hours  Decimal?                    @db.Decimal(5, 2)
  estimated_cost_range      Json?
  is_mandatory              Boolean?                    @default(false)
  requires_vehicle_stoppage Boolean?                    @default(true)
  description               String?
  metadata                  Json?
  created_at                DateTime                    @default(now()) @db.Timestamptz(6)
  updated_at                DateTime                    @default(now()) @db.Timestamptz(6)
  created_by                String                      @db.Uuid
  updated_by                String?                     @db.Uuid
  deleted_at                DateTime?                   @db.Timestamptz(6)
  deleted_by                String?                     @db.Uuid
  deletion_reason           String?
  adm_tenants               adm_tenants                 @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_maintenance_types_tenant")
  sch_maintenance_schedules sch_maintenance_schedules[]

  @@index([category, is_mandatory], map: "idx_maintenance_types_category_mandatory")
  @@index([deleted_at], map: "idx_maintenance_types_deleted")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model dir_notification_templates {
  id                                                                                   String                  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  template_code                                                                        String                  @db.VarChar(100)
  template_name                                                                        String                  @db.VarChar(200)
  channel                                                                              notification_channel
  supported_countries                                                                  String[]                @default([])
  supported_locales                                                                    String[]                @default([])
  subject_translations                                                                 Json
  body_translations                                                                    Json
  variables                                                                            Json?
  status                                                                               lifecycle_status        @default(active)
  created_at                                                                           DateTime                @default(now()) @db.Timestamptz(6)
  created_by                                                                           String?                 @db.Uuid
  updated_at                                                                           DateTime                @default(now()) @db.Timestamptz(6)
  updated_by                                                                           String?                 @db.Uuid
  deleted_at                                                                           DateTime?               @db.Timestamptz(6)
  deleted_by                                                                           String?                 @db.Uuid
  deletion_reason                                                                      String?
  adm_provider_employees_dir_notification_templates_created_byToadm_provider_employees adm_provider_employees? @relation("dir_notification_templates_created_byToadm_provider_employees", fields: [created_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_notification_templates_created_by")
  adm_provider_employees_dir_notification_templates_deleted_byToadm_provider_employees adm_provider_employees? @relation("dir_notification_templates_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_notification_templates_deleted_by")
  adm_provider_employees_dir_notification_templates_updated_byToadm_provider_employees adm_provider_employees? @relation("dir_notification_templates_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_notification_templates_updated_by")

  @@unique([template_code, channel], map: "uq_dir_notification_templates_code_channel")
  @@index([channel], map: "idx_dir_notification_templates_channel")
  @@index([template_code], map: "idx_dir_notification_templates_code")
  @@index([supported_countries], map: "idx_dir_notification_templates_countries_gin", type: Gin)
  @@index([deleted_at], map: "idx_dir_notification_templates_deleted_at")
  @@index([supported_locales], map: "idx_dir_notification_templates_locales_gin", type: Gin)
  @@index([status], map: "idx_dir_notification_templates_status")
}

model dir_ownership_types {
  id                                                                            String                  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  code                                                                          String                  @unique @db.VarChar(50)
  name                                                                          String                  @db.VarChar(100)
  description                                                                   String?
  requires_owner                                                                Boolean?                @default(false)
  allows_leasing                                                                Boolean?                @default(false)
  depreciation                                                                  Boolean?                @default(true)
  maintenance_responsibility                                                    String?                 @db.VarChar(20)
  insurance_responsibility                                                      String?                 @db.VarChar(20)
  display_order                                                                 Int?
  is_active                                                                     Boolean?                @default(true)
  metadata                                                                      Json?
  created_at                                                                    DateTime                @default(now()) @db.Timestamptz(6)
  updated_at                                                                    DateTime                @default(now()) @db.Timestamptz(6)
  created_by                                                                    String                  @db.Uuid
  updated_by                                                                    String?                 @db.Uuid
  deleted_at                                                                    DateTime?               @db.Timestamptz(6)
  deleted_by                                                                    String?                 @db.Uuid
  deletion_reason                                                               String?
  adm_provider_employees_dir_ownership_types_created_byToadm_provider_employees adm_provider_employees  @relation("dir_ownership_types_created_byToadm_provider_employees", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_dir_ownership_types_created_by")
  adm_provider_employees_dir_ownership_types_deleted_byToadm_provider_employees adm_provider_employees? @relation("dir_ownership_types_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_dir_ownership_types_deleted_by")
  adm_provider_employees_dir_ownership_types_updated_byToadm_provider_employees adm_provider_employees? @relation("dir_ownership_types_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_dir_ownership_types_updated_by")
  flt_vehicles                                                                  flt_vehicles[]

  @@index([code], map: "idx_dir_ownership_types_code")
  @@index([is_active], map: "idx_dir_ownership_types_is_active")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model dir_platform_configs {
  id                                                                             String                  @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  platform_id                                                                    String                  @db.Uuid
  tenant_id                                                                      String                  @db.Uuid
  api_base_url                                                                   String
  auth_method                                                                    String?                 @db.VarChar(50)
  api_version                                                                    String?                 @db.VarChar(20)
  refresh_frequency_minutes                                                      Int?                    @default(60)
  webhook_endpoints                                                              Json?
  supported_services                                                             Json?
  sandbox_config                                                                 Json?
  production_config                                                              Json?
  secrets_vault_ref                                                              String?                 @db.VarChar(100)
  is_active                                                                      Boolean?                @default(true)
  created_at                                                                     DateTime                @default(now()) @db.Timestamptz(6)
  updated_at                                                                     DateTime                @default(now()) @db.Timestamptz(6)
  created_by                                                                     String                  @db.Uuid
  updated_by                                                                     String?                 @db.Uuid
  deleted_at                                                                     DateTime?               @db.Timestamptz(6)
  deleted_by                                                                     String?                 @db.Uuid
  deletion_reason                                                                String?
  adm_provider_employees_dir_platform_configs_created_byToadm_provider_employees adm_provider_employees  @relation("dir_platform_configs_created_byToadm_provider_employees", fields: [created_by], references: [id], onUpdate: NoAction, map: "fk_dir_platform_configs_created_by")
  adm_provider_employees_dir_platform_configs_deleted_byToadm_provider_employees adm_provider_employees? @relation("dir_platform_configs_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_platform_configs_deleted_by")
  dir_platforms                                                                  dir_platforms           @relation(fields: [platform_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_dir_platform_configs_platform")
  adm_tenants                                                                    adm_tenants             @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_dir_platform_configs_tenant")
  adm_provider_employees_dir_platform_configs_updated_byToadm_provider_employees adm_provider_employees? @relation("dir_platform_configs_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_platform_configs_updated_by")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model dir_platforms {
  id                                                                      String                     @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  name                                                                    String                     @unique(map: "dir_platforms_name_uq")
  api_config                                                              Json?
  created_at                                                              DateTime                   @default(now()) @db.Timestamptz(6)
  updated_at                                                              DateTime                   @default(now()) @db.Timestamptz(6)
  code                                                                    String                     @db.VarChar(50)
  description                                                             String?
  logo_url                                                                String?
  provider_category                                                       String?                    @db.VarChar(50)
  supported_countries                                                     Json?
  status                                                                  lifecycle_status           @default(active)
  metadata                                                                Json?
  created_by                                                              String?                    @db.Uuid
  updated_by                                                              String?                    @db.Uuid
  deleted_at                                                              DateTime?                  @db.Timestamptz(6)
  deleted_by                                                              String?                    @db.Uuid
  deletion_reason                                                         String?
  dir_platform_configs                                                    dir_platform_configs[]
  adm_provider_employees_dir_platforms_created_byToadm_provider_employees adm_provider_employees?    @relation("dir_platforms_created_byToadm_provider_employees", fields: [created_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_platforms_created_by")
  adm_provider_employees_dir_platforms_deleted_byToadm_provider_employees adm_provider_employees?    @relation("dir_platforms_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_platforms_deleted_by")
  adm_provider_employees_dir_platforms_updated_byToadm_provider_employees adm_provider_employees?    @relation("dir_platforms_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_platforms_updated_by")
  rev_driver_revenues                                                     rev_driver_revenues[]
  rev_reconciliation_lines                                                rev_reconciliation_lines[]
  rev_revenue_imports                                                     rev_revenue_imports[]
  rid_driver_performances                                                 rid_driver_performances[]
  trp_platform_accounts                                                   trp_platform_accounts[]
  trp_trips                                                               trp_trips[]

  @@index([api_config], map: "dir_platforms_api_config_gin", type: Gin)
}

model dir_toll_gates {
  id                      String                  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  country_code            String                  @db.Char(2)
  gate_code               String                  @db.VarChar(50)
  gate_name               String
  location                Unsupported("point")?
  base_fee                Decimal                 @default(0) @db.Decimal(12, 2)
  currency                String                  @db.Char(3)
  rate_schedule           Json?                   @default("{}")
  status                  toll_gate_status        @default(active)
  active_from             DateTime?               @db.Date
  active_to               DateTime?               @db.Date
  operator                String?                 @db.VarChar(100)
  metadata                Json                    @default("{}")
  created_at              DateTime                @default(now()) @db.Timestamptz(6)
  updated_at              DateTime                @default(now()) @db.Timestamptz(6)
  dir_country_regulations dir_country_regulations @relation(fields: [country_code], references: [country_code], onDelete: Cascade, map: "fk_dir_toll_gates_country")
  fin_toll_transactions   fin_toll_transactions[]

  @@unique([country_code, gate_code], map: "dir_toll_gates_country_gate_code_uq")
}

model dir_transaction_statuses {
  code             String             @id @db.VarChar(30)
  description      String
  created_at       DateTime           @default(now()) @db.Timestamptz(6)
  fin_transactions fin_transactions[]
}

model dir_transaction_types {
  code             String             @id @db.VarChar(30)
  description      String
  created_at       DateTime           @default(now()) @db.Timestamptz(6)
  fin_transactions fin_transactions[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model dir_vehicle_classes {
  id                                                                                        String                       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  country_code                                                                              String                       @db.Char(2)
  name                                                                                      String
  description                                                                               String?
  max_age                                                                                   Int?
  created_at                                                                                DateTime                     @default(now()) @db.Timestamptz(6)
  updated_at                                                                                DateTime                     @default(now()) @db.Timestamptz(6)
  code                                                                                      String                       @db.VarChar(50)
  min_length_cm                                                                             Int?
  max_length_cm                                                                             Int?
  min_width_cm                                                                              Int?
  max_width_cm                                                                              Int?
  min_height_cm                                                                             Int?
  max_height_cm                                                                             Int?
  min_seats                                                                                 Int?
  max_seats                                                                                 Int?
  min_age                                                                                   Int?
  min_weight_kg                                                                             Int?
  max_weight_kg                                                                             Int?
  criteria                                                                                  Json?
  status                                                                                    lifecycle_status             @default(active)
  metadata                                                                                  Json?
  created_by                                                                                String?                      @db.Uuid
  updated_by                                                                                String?                      @db.Uuid
  deleted_at                                                                                DateTime?                    @db.Timestamptz(6)
  deleted_by                                                                                String?                      @db.Uuid
  deletion_reason                                                                           String?
  adm_tenant_vehicle_classes                                                                adm_tenant_vehicle_classes[]
  dir_car_models                                                                            dir_car_models[]
  dir_country_regulations_dir_country_regulations_min_vehicle_class_idTodir_vehicle_classes dir_country_regulations[]    @relation("dir_country_regulations_min_vehicle_class_idTodir_vehicle_classes")
  dir_country_regulations_dir_vehicle_classes_country_codeTodir_country_regulations         dir_country_regulations      @relation("dir_vehicle_classes_country_codeTodir_country_regulations", fields: [country_code], references: [country_code], onDelete: Cascade)
  adm_provider_employees_dir_vehicle_classes_created_byToadm_provider_employees             adm_provider_employees?      @relation("dir_vehicle_classes_created_byToadm_provider_employees", fields: [created_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_vehicle_classes_created_by")
  adm_provider_employees_dir_vehicle_classes_deleted_byToadm_provider_employees             adm_provider_employees?      @relation("dir_vehicle_classes_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_vehicle_classes_deleted_by")
  adm_provider_employees_dir_vehicle_classes_updated_byToadm_provider_employees             adm_provider_employees?      @relation("dir_vehicle_classes_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onDelete: Restrict, onUpdate: NoAction, map: "fk_dir_vehicle_classes_updated_by")
  flt_vehicles                                                                              flt_vehicles[]

  @@unique([country_code, name], map: "dir_vehicle_classes_country_name_uq")
  @@index([country_code])
  @@index([created_at])
  @@index([updated_at])
}

model dir_vehicle_statuses {
  id                                                                             String                  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  code                                                                           String                  @unique @db.VarChar(50)
  name                                                                           String                  @db.VarChar(100)
  description                                                                    String?
  color                                                                          String?                 @db.VarChar(7)
  allowed_transitions                                                            Json?
  requires_approval                                                              Boolean?                @default(false)
  blocking_status                                                                Boolean?                @default(false)
  automatic_actions                                                              Json?
  notification_rules                                                             Json?
  required_documents                                                             Json?
  validation_rules                                                               Json?
  display_order                                                                  Int?
  is_active                                                                      Boolean?                @default(true)
  metadata                                                                       Json?
  created_at                                                                     DateTime                @default(now()) @db.Timestamptz(6)
  updated_at                                                                     DateTime                @default(now()) @db.Timestamptz(6)
  created_by                                                                     String                  @db.Uuid
  updated_by                                                                     String?                 @db.Uuid
  deleted_at                                                                     DateTime?               @db.Timestamptz(6)
  deleted_by                                                                     String?                 @db.Uuid
  deletion_reason                                                                String?
  adm_provider_employees_dir_vehicle_statuses_created_byToadm_provider_employees adm_provider_employees  @relation("dir_vehicle_statuses_created_byToadm_provider_employees", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_dir_vehicle_statuses_created_by")
  adm_provider_employees_dir_vehicle_statuses_deleted_byToadm_provider_employees adm_provider_employees? @relation("dir_vehicle_statuses_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_dir_vehicle_statuses_deleted_by")
  adm_provider_employees_dir_vehicle_statuses_updated_byToadm_provider_employees adm_provider_employees? @relation("dir_vehicle_statuses_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_dir_vehicle_statuses_updated_by")
  flt_vehicles                                                                   flt_vehicles[]

  @@index([code], map: "idx_dir_vehicle_statuses_code")
  @@index([is_active], map: "idx_dir_vehicle_statuses_is_active")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model doc_document_types {
  code                                                                         String                  @id @db.VarChar(50)
  name                                                                         String
  description                                                                  String?
  requires_expiry                                                              Boolean                 @default(false)
  default_validity_days                                                        Int?
  requires_verification                                                        Boolean                 @default(true)
  allowed_mime_types                                                           String[]
  max_file_size_mb                                                             Int?                    @default(10)
  category                                                                     String?                 @db.VarChar(50)
  is_mandatory                                                                 Boolean                 @default(false)
  display_order                                                                Int                     @default(0)
  icon                                                                         String?                 @db.VarChar(50)
  created_at                                                                   DateTime                @default(now()) @db.Timestamptz(6)
  created_by                                                                   String?                 @db.Uuid
  updated_at                                                                   DateTime                @default(now()) @db.Timestamptz(6)
  updated_by                                                                   String?                 @db.Uuid
  deleted_at                                                                   DateTime?               @db.Timestamptz(6)
  deleted_by                                                                   String?                 @db.Uuid
  deletion_reason                                                              String?
  adm_provider_employees_doc_document_types_created_byToadm_provider_employees adm_provider_employees? @relation("doc_document_types_created_byToadm_provider_employees", fields: [created_by], references: [id], onUpdate: NoAction, map: "fk_doc_document_types_created_by")
  adm_provider_employees_doc_document_types_deleted_byToadm_provider_employees adm_provider_employees? @relation("doc_document_types_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onUpdate: NoAction, map: "fk_doc_document_types_deleted_by")
  adm_provider_employees_doc_document_types_updated_byToadm_provider_employees adm_provider_employees? @relation("doc_document_types_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onUpdate: NoAction, map: "fk_doc_document_types_updated_by")
  doc_documents                                                                doc_documents[]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model doc_document_versions {
  id                  String        @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  document_id         String        @db.Uuid
  version_number      Int
  storage_provider    String        @db.VarChar(50)
  storage_key         String
  file_name           String        @db.VarChar(255)
  file_size           Int
  mime_type           String        @db.VarChar(100)
  issue_date          DateTime?     @db.Date
  expiry_date         DateTime?     @db.Date
  verification_status String        @db.VarChar(20)
  verified_by         String?       @db.Uuid
  verified_at         DateTime?     @db.Timestamptz(6)
  rejection_reason    String?
  metadata            Json          @default("{}")
  created_at          DateTime      @default(now()) @db.Timestamptz(6)
  created_by          String        @db.Uuid
  change_reason       String?
  adm_members         adm_members   @relation(fields: [created_by], references: [id], onUpdate: NoAction, map: "fk_doc_document_versions_created_by")
  doc_documents       doc_documents @relation(fields: [document_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_doc_document_versions_document")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model doc_documents {
  id                                                 String                  @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                          String                  @db.Uuid
  entity_type                                        String
  entity_id                                          String                  @db.Uuid
  document_type                                      String
  file_url                                           String
  issue_date                                         DateTime?               @db.Date
  expiry_date                                        DateTime?               @db.Date
  verified                                           Boolean                 @default(false)
  created_at                                         DateTime                @default(now()) @db.Timestamptz(6)
  updated_at                                         DateTime                @default(now()) @db.Timestamptz(6)
  file_name                                          String?                 @db.VarChar(255)
  file_size                                          Int?
  mime_type                                          String?                 @db.VarChar(100)
  metadata                                           Json?                   @default("{}")
  storage_provider                                   storage_provider?       @default(supabase)
  storage_key                                        String?
  access_level                                       access_level?           @default(private)
  verification_status                                verification_status?    @default(pending)
  verified_by                                        String?                 @db.Uuid
  verified_at                                        DateTime?               @db.Timestamptz(6)
  rejection_reason                                   String?
  status                                             document_status         @default(active)
  expiry_notification_sent                           Boolean?                @default(false)
  created_by                                         String?                 @db.Uuid
  updated_by                                         String?                 @db.Uuid
  deleted_at                                         DateTime?               @db.Timestamptz(6)
  deleted_by                                         String?                 @db.Uuid
  deletion_reason                                    String?
  doc_document_versions                              doc_document_versions[]
  adm_tenants                                        adm_tenants             @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_doc_documents_created_byToadm_members  adm_members?            @relation("doc_documents_created_byToadm_members", fields: [created_by], references: [id], onUpdate: NoAction, map: "fk_doc_documents_created_by")
  adm_members_doc_documents_deleted_byToadm_members  adm_members?            @relation("doc_documents_deleted_byToadm_members", fields: [deleted_by], references: [id], onUpdate: NoAction, map: "fk_doc_documents_deleted_by")
  doc_document_types                                 doc_document_types      @relation(fields: [document_type], references: [code], onUpdate: NoAction, map: "fk_doc_documents_document_type")
  doc_entity_types                                   doc_entity_types        @relation(fields: [entity_type], references: [code], onUpdate: NoAction, map: "fk_doc_documents_entity_type")
  adm_members_doc_documents_updated_byToadm_members  adm_members?            @relation("doc_documents_updated_byToadm_members", fields: [updated_by], references: [id], onUpdate: NoAction, map: "fk_doc_documents_updated_by")
  adm_members_doc_documents_verified_byToadm_members adm_members?            @relation("doc_documents_verified_byToadm_members", fields: [verified_by], references: [id], onUpdate: NoAction, map: "fk_doc_documents_verified_by")
  rid_driver_documents                               rid_driver_documents[]

  @@index([created_at])
  @@index([document_type])
  @@index([entity_id])
  @@index([entity_type])
  @@index([expiry_date])
  @@index([tenant_id, document_type], map: "doc_documents_tenant_document_type_idx")
  @@index([tenant_id, entity_type, entity_id], map: "doc_documents_tenant_entity_idx")
  @@index([tenant_id])
  @@index([updated_at])
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model doc_entity_types {
  code                                                                       String                  @id @db.VarChar(50)
  description                                                                String
  table_name                                                                 String                  @db.VarChar(100)
  is_active                                                                  Boolean                 @default(true)
  display_order                                                              Int                     @default(0)
  metadata                                                                   Json                    @default("{}")
  created_at                                                                 DateTime                @default(now()) @db.Timestamptz(6)
  created_by                                                                 String?                 @db.Uuid
  updated_at                                                                 DateTime                @default(now()) @db.Timestamptz(6)
  updated_by                                                                 String?                 @db.Uuid
  deleted_at                                                                 DateTime?               @db.Timestamptz(6)
  deleted_by                                                                 String?                 @db.Uuid
  doc_documents                                                              doc_documents[]
  adm_provider_employees_doc_entity_types_created_byToadm_provider_employees adm_provider_employees? @relation("doc_entity_types_created_byToadm_provider_employees", fields: [created_by], references: [id], onUpdate: NoAction, map: "fk_doc_entity_types_created_by")
  adm_provider_employees_doc_entity_types_deleted_byToadm_provider_employees adm_provider_employees? @relation("doc_entity_types_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onUpdate: NoAction, map: "fk_doc_entity_types_deleted_by")
  adm_provider_employees_doc_entity_types_updated_byToadm_provider_employees adm_provider_employees? @relation("doc_entity_types_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onUpdate: NoAction, map: "fk_doc_entity_types_updated_by")
}

model fin_account_types {
  code         String         @id
  label        String
  description  String?
  created_at   DateTime       @default(now()) @db.Timestamptz(6)
  updated_at   DateTime       @default(now()) @db.Timestamptz(6)
  fin_accounts fin_accounts[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model fin_accounts {
  id                                                                      String                       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                               String                       @db.Uuid
  account_name                                                            String
  account_type                                                            String
  currency                                                                String                       @db.VarChar(3)
  balance                                                                 Decimal                      @default(0) @db.Decimal(18, 2)
  metadata                                                                Json                         @default("{}")
  created_at                                                              DateTime                     @default(now()) @db.Timestamptz(6)
  created_by                                                              String?                      @db.Uuid
  updated_at                                                              DateTime                     @default(now()) @db.Timestamptz(6)
  updated_by                                                              String?                      @db.Uuid
  deleted_at                                                              DateTime?                    @db.Timestamptz(6)
  deleted_by                                                              String?                      @db.Uuid
  deletion_reason                                                         String?
  provider                                                                String?
  provider_account_id                                                     String?
  status                                                                  account_status               @default(active)
  opened_at                                                               DateTime?                    @db.Timestamptz(6)
  closed_at                                                               DateTime?                    @db.Timestamptz(6)
  max_balance                                                             Decimal?                     @db.Decimal(18, 2)
  min_balance                                                             Decimal?                     @db.Decimal(18, 2)
  account_number_last4                                                    String?                      @db.Char(4)
  bank_name                                                               String?
  iban                                                                    String?
  swift_bic                                                               String?
  description                                                             String?
  adm_members_fin_accounts_created_byToadm_members                        adm_members?                 @relation("fin_accounts_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_fin_accounts_deleted_byToadm_members                        adm_members?                 @relation("fin_accounts_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_tenants                                                             adm_tenants                  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_fin_accounts_updated_byToadm_members                        adm_members?                 @relation("fin_accounts_updated_byToadm_members", fields: [updated_by], references: [id])
  fin_account_types                                                       fin_account_types            @relation(fields: [account_type], references: [code], map: "fk_fin_accounts_account_type")
  fin_driver_payment_batches                                              fin_driver_payment_batches[]
  fin_driver_payments                                                     fin_driver_payments[]
  fin_transactions_fin_transactions_account_idTofin_accounts              fin_transactions[]           @relation("fin_transactions_account_idTofin_accounts")
  fin_transactions_fin_transactions_counterparty_account_idTofin_accounts fin_transactions[]           @relation("fin_transactions_counterparty_account_idTofin_accounts")

  @@index([account_name], map: "idx_fin_accounts_account_name")
  @@index([account_type], map: "idx_fin_accounts_account_type")
  @@index([created_by], map: "idx_fin_accounts_created_by")
  @@index([currency], map: "idx_fin_accounts_currency")
  @@index([deleted_at], map: "idx_fin_accounts_deleted_at")
  @@index([metadata], map: "idx_fin_accounts_metadata", type: Gin)
  @@index([tenant_id], map: "idx_fin_accounts_tenant_id")
  @@index([updated_by], map: "idx_fin_accounts_updated_by")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model fin_driver_payment_batches {
  id                                                                                   String                     @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                                            String                     @db.Uuid
  batch_reference                                                                      String
  payment_date                                                                         DateTime                   @db.Date
  total_amount                                                                         Decimal                    @db.Decimal(18, 2)
  currency                                                                             String                     @db.VarChar(3)
  status                                                                               String                     @default("pending")
  metadata                                                                             Json                       @default("{}")
  created_at                                                                           DateTime                   @default(now()) @db.Timestamptz(6)
  created_by                                                                           String?                    @db.Uuid
  updated_at                                                                           DateTime                   @default(now()) @db.Timestamptz(6)
  updated_by                                                                           String?                    @db.Uuid
  deleted_at                                                                           DateTime?                  @db.Timestamptz(6)
  deleted_by                                                                           String?                    @db.Uuid
  deletion_reason                                                                      String?
  period_start                                                                         DateTime?                  @db.Date
  period_end                                                                           DateTime?                  @db.Date
  payroll_cycle                                                                        payroll_cycle?
  payment_method                                                                       finance_payment_method?
  batch_type                                                                           batch_type?
  payout_account_id                                                                    String?                    @db.Uuid
  status_reason                                                                        String?
  file_url                                                                             String?
  exported_at                                                                          DateTime?                  @db.Timestamptz(6)
  sent_at                                                                              DateTime?                  @db.Timestamptz(6)
  processed_at                                                                         DateTime?                  @db.Timestamptz(6)
  error_details                                                                        Json?
  adm_members_fin_driver_payment_batches_created_byToadm_members                       adm_members?               @relation("fin_driver_payment_batches_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_fin_driver_payment_batches_deleted_byToadm_members                       adm_members?               @relation("fin_driver_payment_batches_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_tenants                                                                          adm_tenants                @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_fin_driver_payment_batches_updated_byToadm_members                       adm_members?               @relation("fin_driver_payment_batches_updated_byToadm_members", fields: [updated_by], references: [id])
  adm_provider_employees_fin_driver_payment_batches_created_byToadm_provider_employees adm_provider_employees?    @relation("fin_driver_payment_batches_created_byToadm_provider_employees", fields: [created_by], references: [id], onDelete: Restrict, map: "fk_fin_driver_payment_batches_created_by")
  adm_provider_employees_fin_driver_payment_batches_deleted_byToadm_provider_employees adm_provider_employees?    @relation("fin_driver_payment_batches_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onDelete: Restrict, map: "fk_fin_driver_payment_batches_deleted_by")
  fin_accounts                                                                         fin_accounts?              @relation(fields: [payout_account_id], references: [id], onDelete: Restrict, map: "fk_fin_driver_payment_batches_payout_account")
  fin_payment_batch_statuses                                                           fin_payment_batch_statuses @relation(fields: [status], references: [code], map: "fk_fin_driver_payment_batches_status")
  adm_provider_employees_fin_driver_payment_batches_updated_byToadm_provider_employees adm_provider_employees?    @relation("fin_driver_payment_batches_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onDelete: Restrict, map: "fk_fin_driver_payment_batches_updated_by")
  fin_driver_payments                                                                  fin_driver_payments[]
  fin_toll_transactions                                                                fin_toll_transactions[]

  @@index([batch_reference])
  @@index([created_by])
  @@index([deleted_at])
  @@index([metadata], type: Gin)
  @@index([payment_date(sort: Desc)])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model fin_driver_payments {
  id                                                                            String                     @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                                     String                     @db.Uuid
  driver_id                                                                     String                     @db.Uuid
  payment_batch_id                                                              String                     @db.Uuid
  amount                                                                        Decimal                    @db.Decimal(18, 2)
  currency                                                                      String                     @db.VarChar(3)
  payment_date                                                                  DateTime                   @db.Date
  status                                                                        String                     @default("pending")
  metadata                                                                      Json                       @default("{}")
  created_at                                                                    DateTime                   @default(now()) @db.Timestamptz(6)
  created_by                                                                    String?                    @db.Uuid
  updated_at                                                                    DateTime                   @default(now()) @db.Timestamptz(6)
  updated_by                                                                    String?                    @db.Uuid
  deleted_at                                                                    DateTime?                  @db.Timestamptz(6)
  deleted_by                                                                    String?                    @db.Uuid
  deletion_reason                                                               String?
  period_start                                                                  DateTime?                  @db.Date
  period_end                                                                    DateTime?                  @db.Date
  amount_in_tenant_currency                                                     Decimal?                   @db.Decimal(18, 2)
  exchange_rate                                                                 Decimal?                   @db.Decimal(12, 6)
  payment_method                                                                finance_payment_method?
  payout_account_id                                                             String?                    @db.Uuid
  transaction_reference                                                         String?
  status_reason                                                                 String?
  error_details                                                                 Json?
  processed_at                                                                  DateTime?                  @db.Timestamptz(6)
  failed_at                                                                     DateTime?                  @db.Timestamptz(6)
  cancelled_at                                                                  DateTime?                  @db.Timestamptz(6)
  notes                                                                         String?
  adm_members_fin_driver_payments_created_byToadm_members                       adm_members?               @relation("fin_driver_payments_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_fin_driver_payments_deleted_byToadm_members                       adm_members?               @relation("fin_driver_payments_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                                                   rid_drivers                @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  fin_driver_payment_batches                                                    fin_driver_payment_batches @relation(fields: [payment_batch_id], references: [id], onDelete: Cascade)
  adm_tenants                                                                   adm_tenants                @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_fin_driver_payments_updated_byToadm_members                       adm_members?               @relation("fin_driver_payments_updated_byToadm_members", fields: [updated_by], references: [id])
  adm_provider_employees_fin_driver_payments_created_byToadm_provider_employees adm_provider_employees?    @relation("fin_driver_payments_created_byToadm_provider_employees", fields: [created_by], references: [id], onDelete: Restrict, map: "fk_fin_driver_payments_created_by")
  adm_provider_employees_fin_driver_payments_deleted_byToadm_provider_employees adm_provider_employees?    @relation("fin_driver_payments_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onDelete: Restrict, map: "fk_fin_driver_payments_deleted_by")
  fin_accounts                                                                  fin_accounts?              @relation(fields: [payout_account_id], references: [id], map: "fk_fin_driver_payments_payout_account")
  fin_payment_statuses                                                          fin_payment_statuses       @relation(fields: [status], references: [code], map: "fk_fin_driver_payments_status")
  adm_provider_employees_fin_driver_payments_updated_byToadm_provider_employees adm_provider_employees?    @relation("fin_driver_payments_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onDelete: Restrict, map: "fk_fin_driver_payments_updated_by")
  fin_toll_transactions                                                         fin_toll_transactions[]
  fin_traffic_fines                                                             fin_traffic_fines[]

  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([metadata], type: Gin)
  @@index([payment_batch_id])
  @@index([payment_date(sort: Desc)])
  @@index([tenant_id])
  @@index([updated_by])
}

model fin_payment_batch_statuses {
  code                       String                       @id
  label                      String
  description                String?
  created_at                 DateTime                     @default(now()) @db.Timestamptz(6)
  fin_driver_payment_batches fin_driver_payment_batches[]
}

model fin_payment_statuses {
  code                String                @id
  label               String
  description         String?
  created_at          DateTime              @default(now()) @db.Timestamptz(6)
  fin_driver_payments fin_driver_payments[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model fin_toll_transactions {
  id                                                        String                      @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                 String                      @db.Uuid
  driver_id                                                 String                      @db.Uuid
  vehicle_id                                                String                      @db.Uuid
  toll_gate                                                 String
  toll_date                                                 DateTime                    @db.Date
  amount                                                    Decimal                     @db.Decimal(14, 2)
  currency                                                  String                      @db.VarChar(3)
  metadata                                                  Json                        @default("{}")
  created_at                                                DateTime                    @default(now()) @db.Timestamptz(6)
  created_by                                                String?                     @db.Uuid
  updated_at                                                DateTime                    @default(now()) @db.Timestamptz(6)
  updated_by                                                String?                     @db.Uuid
  deleted_at                                                DateTime?                   @db.Timestamptz(6)
  deleted_by                                                String?                     @db.Uuid
  deletion_reason                                           String?
  toll_gate_id                                              String?                     @db.Uuid
  toll_timestamp                                            DateTime?                   @db.Timestamptz(6)
  source                                                    toll_transaction_source?
  status                                                    toll_transaction_status
  payment_batch_id                                          String?                     @db.Uuid
  driver_payment_id                                         String?                     @db.Uuid
  trip_id                                                   String?                     @db.Uuid
  adm_members_fin_toll_transactions_created_byToadm_members adm_members?                @relation("fin_toll_transactions_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_fin_toll_transactions_deleted_byToadm_members adm_members?                @relation("fin_toll_transactions_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                               rid_drivers                 @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  adm_tenants                                               adm_tenants                 @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_fin_toll_transactions_updated_byToadm_members adm_members?                @relation("fin_toll_transactions_updated_byToadm_members", fields: [updated_by], references: [id])
  flt_vehicles                                              flt_vehicles                @relation(fields: [vehicle_id], references: [id], onDelete: Cascade)
  fin_driver_payments                                       fin_driver_payments?        @relation(fields: [driver_payment_id], references: [id], map: "fk_fin_toll_transactions_driver_payment")
  fin_driver_payment_batches                                fin_driver_payment_batches? @relation(fields: [payment_batch_id], references: [id], map: "fk_fin_toll_transactions_payment_batch")
  dir_toll_gates                                            dir_toll_gates?             @relation(fields: [toll_gate_id], references: [id], onDelete: Restrict, map: "fk_fin_toll_transactions_toll_gate")
  trp_trips                                                 trp_trips?                  @relation(fields: [trip_id], references: [id], map: "fk_fin_toll_transactions_trip")

  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([metadata], type: Gin)
  @@index([tenant_id])
  @@index([toll_date(sort: Desc)])
  @@index([updated_by])
  @@index([vehicle_id])
}

model fin_traffic_fine_disputes {
  id                                                                        String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  fine_id                                                                   String              @db.Uuid
  submitted_by                                                              String              @db.Uuid
  submitted_at                                                              DateTime            @default(now()) @db.Timestamptz(6)
  reason                                                                    String
  supporting_documents                                                      Json?
  status                                                                    dispute_status      @default(pending)
  reviewed_by                                                               String?             @db.Uuid
  resolved_at                                                               DateTime?           @db.Timestamptz(6)
  resolution_notes                                                          String?
  metadata                                                                  Json                @default("{}")
  created_at                                                                DateTime            @default(now()) @db.Timestamptz(6)
  updated_at                                                                DateTime            @default(now()) @db.Timestamptz(6)
  fin_traffic_fines_fin_traffic_fine_disputes_fine_idTofin_traffic_fines    fin_traffic_fines   @relation("fin_traffic_fine_disputes_fine_idTofin_traffic_fines", fields: [fine_id], references: [id], onDelete: Cascade, map: "fk_fin_traffic_fine_disputes_fine")
  adm_members_fin_traffic_fine_disputes_reviewed_byToadm_members            adm_members?        @relation("fin_traffic_fine_disputes_reviewed_byToadm_members", fields: [reviewed_by], references: [id], map: "fk_fin_traffic_fine_disputes_reviewed_by")
  adm_members_fin_traffic_fine_disputes_submitted_byToadm_members           adm_members         @relation("fin_traffic_fine_disputes_submitted_byToadm_members", fields: [submitted_by], references: [id], onDelete: Cascade, map: "fk_fin_traffic_fine_disputes_submitted_by")
  fin_traffic_fines_fin_traffic_fines_dispute_idTofin_traffic_fine_disputes fin_traffic_fines[] @relation("fin_traffic_fines_dispute_idTofin_traffic_fine_disputes")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model fin_traffic_fines {
  id                                                                                String                      @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                                         String                      @db.Uuid
  driver_id                                                                         String                      @db.Uuid
  vehicle_id                                                                        String                      @db.Uuid
  fine_reference                                                                    String
  fine_date                                                                         DateTime                    @db.Date
  fine_type                                                                         String
  amount                                                                            Decimal                     @db.Decimal(14, 2)
  currency                                                                          String                      @db.VarChar(3)
  status                                                                            String                      @default("pending")
  metadata                                                                          Json                        @default("{}")
  created_at                                                                        DateTime                    @default(now()) @db.Timestamptz(6)
  created_by                                                                        String?                     @db.Uuid
  updated_at                                                                        DateTime                    @default(now()) @db.Timestamptz(6)
  updated_by                                                                        String?                     @db.Uuid
  deleted_at                                                                        DateTime?                   @db.Timestamptz(6)
  deleted_by                                                                        String?                     @db.Uuid
  deletion_reason                                                                   String?
  fine_timestamp                                                                    DateTime?                   @db.Timestamptz(6)
  fine_type_id                                                                      String?                     @db.Uuid
  location                                                                          Unsupported("point")?
  address                                                                           String?
  points_penalty                                                                    Int?
  issuing_authority                                                                 String?
  deadline_date                                                                     DateTime?                   @db.Date
  paid_at                                                                           DateTime?                   @db.Timestamptz(6)
  payment_method_id                                                                 String?                     @db.Uuid
  driver_payment_id                                                                 String?                     @db.Uuid
  dispute_id                                                                        String?                     @db.Uuid
  fin_traffic_fine_disputes_fin_traffic_fine_disputes_fine_idTofin_traffic_fines    fin_traffic_fine_disputes[] @relation("fin_traffic_fine_disputes_fine_idTofin_traffic_fines")
  adm_members_fin_traffic_fines_created_byToadm_members                             adm_members?                @relation("fin_traffic_fines_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_fin_traffic_fines_deleted_byToadm_members                             adm_members?                @relation("fin_traffic_fines_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                                                       rid_drivers                 @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  adm_tenants                                                                       adm_tenants                 @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_fin_traffic_fines_updated_byToadm_members                             adm_members?                @relation("fin_traffic_fines_updated_byToadm_members", fields: [updated_by], references: [id])
  flt_vehicles                                                                      flt_vehicles                @relation(fields: [vehicle_id], references: [id], onDelete: Cascade)
  fin_traffic_fine_disputes_fin_traffic_fines_dispute_idTofin_traffic_fine_disputes fin_traffic_fine_disputes?  @relation("fin_traffic_fines_dispute_idTofin_traffic_fine_disputes", fields: [dispute_id], references: [id], map: "fk_fin_traffic_fines_dispute")
  fin_driver_payments                                                               fin_driver_payments?        @relation(fields: [driver_payment_id], references: [id], map: "fk_fin_traffic_fines_driver_payment")
  dir_fine_types                                                                    dir_fine_types?             @relation(fields: [fine_type_id], references: [id], onDelete: Restrict, map: "fk_fin_traffic_fines_fine_type")
  bil_payment_methods                                                               bil_payment_methods?        @relation(fields: [payment_method_id], references: [id], map: "fk_fin_traffic_fines_payment_method")

  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([fine_date(sort: Desc)])
  @@index([metadata], type: Gin)
  @@index([tenant_id])
  @@index([updated_by])
  @@index([vehicle_id])
}

model fin_transaction_categories {
  id                               String                       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  code                             String                       @unique @db.VarChar(50)
  name                             String
  description                      String?
  category_type                    transaction_category_type
  parent_category_id               String?                      @db.Uuid
  is_active                        Boolean                      @default(true)
  created_at                       DateTime                     @default(now()) @db.Timestamptz(6)
  updated_at                       DateTime                     @default(now()) @db.Timestamptz(6)
  fin_transaction_categories       fin_transaction_categories?  @relation("fin_transaction_categoriesTofin_transaction_categories", fields: [parent_category_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_fin_transaction_categories_parent")
  other_fin_transaction_categories fin_transaction_categories[] @relation("fin_transaction_categoriesTofin_transaction_categories")
  fin_transactions                 fin_transactions[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model fin_transactions {
  id                                                                  String                      @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                           String                      @db.Uuid
  account_id                                                          String                      @db.Uuid
  transaction_type                                                    String
  amount                                                              Decimal                     @db.Decimal(18, 2)
  currency                                                            String                      @db.VarChar(3)
  reference                                                           String
  description                                                         String?
  transaction_date                                                    DateTime                    @db.Timestamptz(6)
  status                                                              String                      @default("pending")
  metadata                                                            Json                        @default("{}")
  created_at                                                          DateTime                    @default(now()) @db.Timestamptz(6)
  created_by                                                          String?                     @db.Uuid
  updated_at                                                          DateTime                    @default(now()) @db.Timestamptz(6)
  updated_by                                                          String?                     @db.Uuid
  deleted_at                                                          DateTime?                   @db.Timestamptz(6)
  deleted_by                                                          String?                     @db.Uuid
  deletion_reason                                                     String?
  counterparty_account_id                                             String?                     @db.Uuid
  net_amount                                                          Decimal?                    @db.Decimal(18, 2)
  tax_rate                                                            Decimal?                    @db.Decimal(5, 2)
  tax_amount                                                          Decimal?                    @db.Decimal(18, 2)
  exchange_rate                                                       Decimal?                    @db.Decimal(18, 6)
  category_id                                                         String?                     @db.Uuid
  entity_type                                                         String?                     @db.VarChar(50)
  entity_id                                                           String?                     @db.Uuid
  payment_method_id                                                   String?                     @db.Uuid
  source_system                                                       String?                     @db.VarChar(50)
  validated_by                                                        String?                     @db.Uuid
  validated_at                                                        DateTime?                   @db.Timestamptz(6)
  fin_accounts_fin_transactions_account_idTofin_accounts              fin_accounts                @relation("fin_transactions_account_idTofin_accounts", fields: [account_id], references: [id], onDelete: Cascade)
  adm_members_fin_transactions_created_byToadm_members                adm_members?                @relation("fin_transactions_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_fin_transactions_deleted_byToadm_members                adm_members?                @relation("fin_transactions_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_tenants                                                         adm_tenants                 @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_fin_transactions_updated_byToadm_members                adm_members?                @relation("fin_transactions_updated_byToadm_members", fields: [updated_by], references: [id])
  fin_transaction_categories                                          fin_transaction_categories? @relation(fields: [category_id], references: [id], map: "fk_fin_transactions_category")
  fin_accounts_fin_transactions_counterparty_account_idTofin_accounts fin_accounts?               @relation("fin_transactions_counterparty_account_idTofin_accounts", fields: [counterparty_account_id], references: [id], map: "fk_fin_transactions_counterparty")
  bil_payment_methods                                                 bil_payment_methods?        @relation(fields: [payment_method_id], references: [id], map: "fk_fin_transactions_payment_method")
  dir_transaction_statuses                                            dir_transaction_statuses    @relation(fields: [status], references: [code], map: "fk_fin_transactions_status")
  dir_transaction_types                                               dir_transaction_types       @relation(fields: [transaction_type], references: [code], map: "fk_fin_transactions_transaction_type")
  adm_members_fin_transactions_validated_byToadm_members              adm_members?                @relation("fin_transactions_validated_byToadm_members", fields: [validated_by], references: [id], map: "fk_fin_transactions_validated_by")

  @@index([account_id])
  @@index([created_by])
  @@index([deleted_at])
  @@index([metadata], type: Gin)
  @@index([tenant_id])
  @@index([transaction_date(sort: Desc)])
  @@index([updated_by])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model flt_vehicle_assignments {
  id                                                                                String                   @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                                         String                   @db.Uuid
  driver_id                                                                         String                   @db.Uuid
  vehicle_id                                                                        String                   @db.Uuid
  start_date                                                                        DateTime                 @db.Date
  end_date                                                                          DateTime?                @db.Date
  assignment_type                                                                   String                   @default("permanent") @db.VarChar(50)
  metadata                                                                          Json                     @default("{}")
  status                                                                            String                   @default("active") @db.VarChar(50)
  created_at                                                                        DateTime                 @default(now()) @db.Timestamptz(6)
  created_by                                                                        String?                  @db.Uuid
  updated_at                                                                        DateTime                 @default(now()) @db.Timestamptz(6)
  updated_by                                                                        String?                  @db.Uuid
  deleted_at                                                                        DateTime?                @db.Timestamptz(6)
  deleted_by                                                                        String?                  @db.Uuid
  deletion_reason                                                                   String?
  handover_date                                                                     DateTime?                @db.Timestamptz(6)
  handover_location                                                                 String?
  handover_type                                                                     String?                  @db.VarChar(20)
  initial_odometer                                                                  Int?
  initial_fuel_level                                                                Int?
  initial_condition                                                                 Json?
  handover_photos                                                                   Json?
  photos_metadata                                                                   Json?
  driver_signature                                                                  String?
  fleet_signature                                                                   String?
  handover_checklist                                                                Json?
  return_date                                                                       DateTime?                @db.Timestamptz(6)
  return_odometer                                                                   Int?
  return_fuel_level                                                                 Int?
  return_condition                                                                  Json?
  damages_reported                                                                  Json?
  penalty_amount                                                                    Decimal?                 @db.Decimal(18, 2)
  notes                                                                             String?
  adm_provider_employees_flt_vehicle_assignments_created_byToadm_provider_employees adm_provider_employees?  @relation("flt_vehicle_assignments_created_byToadm_provider_employees", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_assignments_created_by")
  adm_provider_employees_flt_vehicle_assignments_deleted_byToadm_provider_employees adm_provider_employees?  @relation("flt_vehicle_assignments_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_assignments_deleted_by")
  rid_drivers                                                                       rid_drivers              @relation(fields: [driver_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_assignments_driver_id")
  adm_tenants                                                                       adm_tenants              @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_flt_vehicle_assignments_tenant_id")
  adm_provider_employees_flt_vehicle_assignments_updated_byToadm_provider_employees adm_provider_employees?  @relation("flt_vehicle_assignments_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_assignments_updated_by")
  flt_vehicles                                                                      flt_vehicles             @relation(fields: [vehicle_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_assignments_vehicle_id")
  adm_members_flt_vehicle_assignments_created_byToadm_members                       adm_members?             @relation("flt_vehicle_assignments_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_flt_vehicle_assignments_deleted_byToadm_members                       adm_members?             @relation("flt_vehicle_assignments_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_members_flt_vehicle_assignments_updated_byToadm_members                       adm_members?             @relation("flt_vehicle_assignments_updated_byToadm_members", fields: [updated_by], references: [id])
  flt_vehicle_equipments                                                            flt_vehicle_equipments[]
  flt_vehicle_events                                                                flt_vehicle_events[]

  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([end_date])
  @@index([metadata], type: Gin)
  @@index([start_date])
  @@index([tenant_id])
  @@index([updated_by])
  @@index([vehicle_id])
}

model flt_vehicle_equipments {
  id                                                                               String                   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_id                                                                        String                   @db.Uuid
  vehicle_id                                                                       String                   @db.Uuid
  equipment_type                                                                   String                   @db.VarChar(50)
  name                                                                             String                   @db.VarChar(100)
  description                                                                      String?
  serial_number                                                                    String?                  @db.VarChar(100)
  provided_date                                                                    DateTime                 @db.Date
  return_date                                                                      DateTime?                @db.Date
  expiry_date                                                                      DateTime?                @db.Date
  purchase_price                                                                   Decimal?                 @db.Decimal(18, 2)
  current_value                                                                    Decimal?                 @db.Decimal(18, 2)
  currency                                                                         String?                  @db.Char(3)
  depreciation_rate                                                                Decimal?                 @db.Decimal(5, 2)
  condition_at_provision                                                           String?                  @db.VarChar(20)
  condition_at_return                                                              String?                  @db.VarChar(20)
  damage_notes                                                                     String?
  status                                                                           String                   @db.VarChar(20)
  current_assignment_id                                                            String?                  @db.Uuid
  warranty_expiry                                                                  DateTime?                @db.Date
  warranty_provider                                                                String?                  @db.VarChar(100)
  last_maintenance_date                                                            DateTime?                @db.Date
  next_maintenance_date                                                            DateTime?                @db.Date
  notes                                                                            String?
  metadata                                                                         Json?
  created_at                                                                       DateTime                 @default(now()) @db.Timestamptz(6)
  updated_at                                                                       DateTime                 @default(now()) @db.Timestamptz(6)
  created_by                                                                       String                   @db.Uuid
  updated_by                                                                       String?                  @db.Uuid
  deleted_at                                                                       DateTime?                @db.Timestamptz(6)
  deleted_by                                                                       String?                  @db.Uuid
  adm_provider_employees_flt_vehicle_equipments_created_byToadm_provider_employees adm_provider_employees   @relation("flt_vehicle_equipments_created_byToadm_provider_employees", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_equipments_created_by")
  flt_vehicle_assignments                                                          flt_vehicle_assignments? @relation(fields: [current_assignment_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_equipments_current_assignment_id")
  adm_provider_employees_flt_vehicle_equipments_deleted_byToadm_provider_employees adm_provider_employees?  @relation("flt_vehicle_equipments_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_equipments_deleted_by")
  adm_tenants                                                                      adm_tenants              @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_flt_vehicle_equipments_tenant_id")
  adm_provider_employees_flt_vehicle_equipments_updated_byToadm_provider_employees adm_provider_employees?  @relation("flt_vehicle_equipments_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_equipments_updated_by")
  flt_vehicles                                                                     flt_vehicles             @relation(fields: [vehicle_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_equipments_vehicle_id")

  @@index([current_assignment_id], map: "idx_flt_vehicle_equipments_current_assignment_id")
  @@index([status], map: "idx_flt_vehicle_equipments_status")
  @@index([tenant_id], map: "idx_flt_vehicle_equipments_tenant_id")
  @@index([vehicle_id], map: "idx_flt_vehicle_equipments_vehicle_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model flt_vehicle_events {
  id                                                                           String                   @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                                    String                   @db.Uuid
  vehicle_id                                                                   String                   @db.Uuid
  event_type                                                                   String
  event_date                                                                   DateTime                 @db.Timestamptz(6)
  severity                                                                     String?
  downtime_hours                                                               Int?
  cost_amount                                                                  Decimal?                 @db.Decimal(10, 2)
  currency                                                                     String                   @default("EUR") @db.Char(3)
  details                                                                      Json                     @default("{}")
  notes                                                                        String?
  created_at                                                                   DateTime                 @default(now()) @db.Timestamptz(6)
  created_by                                                                   String?                  @db.Uuid
  updated_at                                                                   DateTime                 @default(now()) @db.Timestamptz(6)
  updated_by                                                                   String?                  @db.Uuid
  deleted_at                                                                   DateTime?                @db.Timestamptz(6)
  deleted_by                                                                   String?                  @db.Uuid
  deletion_reason                                                              String?
  driver_id                                                                    String?                  @db.Uuid
  ride_id                                                                      String?                  @db.Uuid
  assignment_id                                                                String?                  @db.Uuid
  responsible_party                                                            String?                  @db.VarChar(20)
  fault_percentage                                                             Int?
  liability_assessment                                                         Json?
  police_report_number                                                         String?
  police_station                                                               String?
  insurance_claim_id                                                           String?                  @db.Uuid
  claim_status                                                                 String?                  @db.VarChar(20)
  repair_status                                                                String?                  @db.VarChar(20)
  repair_shop_id                                                               String?                  @db.Uuid
  estimated_repair_days                                                        Int?
  actual_repair_days                                                           Int?
  repair_invoice_id                                                            String?                  @db.Uuid
  photos                                                                       Json?
  flt_vehicle_assignments                                                      flt_vehicle_assignments? @relation(fields: [assignment_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_events_assignment_id")
  adm_provider_employees_flt_vehicle_events_created_byToadm_provider_employees adm_provider_employees?  @relation("flt_vehicle_events_created_byToadm_provider_employees", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_events_created_by")
  adm_provider_employees_flt_vehicle_events_deleted_byToadm_provider_employees adm_provider_employees?  @relation("flt_vehicle_events_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_events_deleted_by")
  rid_drivers                                                                  rid_drivers?             @relation(fields: [driver_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_events_driver_id")
  adm_tenants                                                                  adm_tenants              @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_flt_vehicle_events_tenant_id")
  adm_provider_employees_flt_vehicle_events_updated_byToadm_provider_employees adm_provider_employees?  @relation("flt_vehicle_events_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_events_updated_by")
  flt_vehicles                                                                 flt_vehicles             @relation(fields: [vehicle_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_events_vehicle_id")
  adm_members_flt_vehicle_events_created_byToadm_members                       adm_members?             @relation("flt_vehicle_events_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_flt_vehicle_events_deleted_byToadm_members                       adm_members?             @relation("flt_vehicle_events_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_members_flt_vehicle_events_updated_byToadm_members                       adm_members?             @relation("flt_vehicle_events_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_at(sort: Desc)])
  @@index([created_by])
  @@index([deleted_at])
  @@index([details], type: Gin)
  @@index([event_date])
  @@index([event_type])
  @@index([tenant_id])
  @@index([updated_by])
  @@index([vehicle_id])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model flt_vehicle_expenses {
  id                                                                                      String                  @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                                               String                  @db.Uuid
  vehicle_id                                                                              String                  @db.Uuid
  driver_id                                                                               String?                 @db.Uuid
  ride_id                                                                                 String?                 @db.Uuid
  expense_date                                                                            DateTime                @db.Date
  expense_category                                                                        String
  amount                                                                                  Decimal                 @db.Decimal(10, 2)
  currency                                                                                String                  @default("EUR") @db.Char(3)
  payment_method                                                                          String?
  receipt_url                                                                             String?
  odometer_reading                                                                        Int?
  quantity                                                                                Decimal?                @db.Decimal(10, 2)
  unit_price                                                                              Decimal?                @db.Decimal(10, 2)
  location                                                                                String?
  vendor                                                                                  String?
  description                                                                             String?
  reimbursed                                                                              Boolean                 @default(false)
  reimbursed_at                                                                           DateTime?               @db.Timestamptz(6)
  reimbursed_in_batch_id                                                                  String?                 @db.Uuid
  notes                                                                                   String?
  metadata                                                                                Json                    @default("{}")
  created_at                                                                              DateTime                @default(now()) @db.Timestamptz(6)
  created_by                                                                              String?                 @db.Uuid
  updated_at                                                                              DateTime                @default(now()) @db.Timestamptz(6)
  updated_by                                                                              String?                 @db.Uuid
  deleted_at                                                                              DateTime?               @db.Timestamptz(6)
  deleted_by                                                                              String?                 @db.Uuid
  deletion_reason                                                                         String?
  expense_subcategory                                                                     String?                 @db.VarChar(50)
  period_start                                                                            DateTime?               @db.Date
  period_end                                                                              DateTime?               @db.Date
  mileage_start                                                                           Int?
  mileage_end                                                                             Int?
  trip_ids                                                                                String[]                @db.Uuid
  requires_approval                                                                       Boolean?                @default(true)
  approval_threshold                                                                      Decimal?                @db.Decimal(18, 2)
  approval_status                                                                         String?                 @db.VarChar(20)
  approved_by                                                                             String?                 @db.Uuid
  approved_at                                                                             DateTime?               @db.Timestamptz(6)
  rejection_reason                                                                        String?
  receipt_status                                                                          String?                 @db.VarChar(20)
  receipt_verified_by                                                                     String?                 @db.Uuid
  receipt_verified_at                                                                     DateTime?               @db.Timestamptz(6)
  receipt_issues                                                                          Json?
  ocr_extracted_data                                                                      Json?
  allocation_rule                                                                         String?                 @db.VarChar(20)
  driver_share_percent                                                                    Int?
  fleet_share_percent                                                                     Int?
  client_share_percent                                                                    Int?
  cost_center_id                                                                          String?                 @db.Uuid
  payment_batch_id                                                                        String?                 @db.Uuid
  payment_status                                                                          String?                 @db.VarChar(20)
  payment_date                                                                            DateTime?               @db.Date
  payment_reference                                                                       String?
  adm_provider_employees_flt_vehicle_expenses_approved_byToadm_provider_employees         adm_provider_employees? @relation("flt_vehicle_expenses_approved_byToadm_provider_employees", fields: [approved_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_expenses_approved_by")
  adm_provider_employees_flt_vehicle_expenses_created_byToadm_provider_employees          adm_provider_employees? @relation("flt_vehicle_expenses_created_byToadm_provider_employees", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_expenses_created_by")
  adm_provider_employees_flt_vehicle_expenses_deleted_byToadm_provider_employees          adm_provider_employees? @relation("flt_vehicle_expenses_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_expenses_deleted_by")
  rid_drivers                                                                             rid_drivers?            @relation(fields: [driver_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_expenses_driver_id")
  adm_provider_employees_flt_vehicle_expenses_receipt_verified_byToadm_provider_employees adm_provider_employees? @relation("flt_vehicle_expenses_receipt_verified_byToadm_provider_employees", fields: [receipt_verified_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_expenses_receipt_verified_by")
  adm_tenants                                                                             adm_tenants             @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_flt_vehicle_expenses_tenant_id")
  adm_provider_employees_flt_vehicle_expenses_updated_byToadm_provider_employees          adm_provider_employees? @relation("flt_vehicle_expenses_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_expenses_updated_by")
  flt_vehicles                                                                            flt_vehicles            @relation(fields: [vehicle_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_expenses_vehicle_id")
  adm_members_flt_vehicle_expenses_created_byToadm_members                                adm_members?            @relation("flt_vehicle_expenses_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_flt_vehicle_expenses_deleted_byToadm_members                                adm_members?            @relation("flt_vehicle_expenses_deleted_byToadm_members", fields: [deleted_by], references: [id])
  trp_trips                                                                               trp_trips?              @relation(fields: [ride_id], references: [id], onUpdate: NoAction)
  adm_members_flt_vehicle_expenses_updated_byToadm_members                                adm_members?            @relation("flt_vehicle_expenses_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_at(sort: Desc)])
  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([expense_category])
  @@index([expense_date])
  @@index([metadata], type: Gin)
  @@index([ride_id])
  @@index([tenant_id])
  @@index([updated_by])
  @@index([vehicle_id])
}

model flt_vehicle_inspections {
  id                                                                                String                  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_id                                                                         String                  @db.Uuid
  vehicle_id                                                                        String                  @db.Uuid
  inspection_type                                                                   String                  @db.VarChar(50)
  scheduled_date                                                                    DateTime                @db.Date
  actual_date                                                                       DateTime?               @db.Date
  status                                                                            String                  @db.VarChar(20)
  passed                                                                            Boolean?                @default(false)
  score                                                                             Int?
  inspector_name                                                                    String?                 @db.VarChar(100)
  inspection_center                                                                 String?                 @db.VarChar(200)
  certificate_number                                                                String?                 @db.VarChar(100)
  expiry_date                                                                       DateTime?               @db.Date
  issues_found                                                                      Json?
  corrective_actions                                                                Json?
  report_url                                                                        String?
  certificate_url                                                                   String?
  photos_urls                                                                       Json?
  cost_amount                                                                       Decimal?                @db.Decimal(18, 2)
  currency                                                                          String?                 @db.Char(3)
  next_inspection_date                                                              DateTime?               @db.Date
  reminder_sent                                                                     Boolean?                @default(false)
  notes                                                                             String?
  metadata                                                                          Json?
  created_at                                                                        DateTime?               @default(now()) @db.Timestamptz(6)
  updated_at                                                                        DateTime?               @default(now()) @db.Timestamptz(6)
  created_by                                                                        String                  @db.Uuid
  updated_by                                                                        String?                 @db.Uuid
  adm_provider_employees_flt_vehicle_inspections_created_byToadm_provider_employees adm_provider_employees  @relation("flt_vehicle_inspections_created_byToadm_provider_employees", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_inspections_created_by")
  adm_tenants                                                                       adm_tenants             @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_flt_vehicle_inspections_tenant_id")
  adm_provider_employees_flt_vehicle_inspections_updated_byToadm_provider_employees adm_provider_employees? @relation("flt_vehicle_inspections_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_inspections_updated_by")
  flt_vehicles                                                                      flt_vehicles            @relation(fields: [vehicle_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_inspections_vehicle_id")

  @@index([scheduled_date], map: "idx_flt_vehicle_inspections_scheduled_date")
  @@index([status], map: "idx_flt_vehicle_inspections_status")
  @@index([tenant_id], map: "idx_flt_vehicle_inspections_tenant_id")
  @@index([vehicle_id], map: "idx_flt_vehicle_inspections_vehicle_id")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model flt_vehicle_insurances {
  id                                                                               String                   @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                                        String                   @db.Uuid
  vehicle_id                                                                       String                   @db.Uuid
  provider_name                                                                    String
  policy_number                                                                    String
  policy_type                                                                      String
  coverage_amount                                                                  Decimal?                 @db.Decimal(12, 2)
  currency                                                                         String                   @default("EUR") @db.Char(3)
  deductible_amount                                                                Decimal?                 @db.Decimal(10, 2)
  premium_amount                                                                   Decimal                  @db.Decimal(10, 2)
  premium_frequency                                                                String                   @default("annual")
  start_date                                                                       DateTime                 @db.Date
  end_date                                                                         DateTime                 @db.Date
  is_active                                                                        Boolean                  @default(true)
  auto_renew                                                                       Boolean                  @default(false)
  contact_name                                                                     String?
  contact_phone                                                                    String?
  contact_email                                                                    String?
  document_url                                                                     String?
  claim_count                                                                      Int                      @default(0)
  last_claim_date                                                                  DateTime?                @db.Date
  notes                                                                            String?
  metadata                                                                         Json                     @default("{}")
  created_at                                                                       DateTime                 @default(now()) @db.Timestamptz(6)
  created_by                                                                       String?                  @db.Uuid
  updated_at                                                                       DateTime                 @default(now()) @db.Timestamptz(6)
  updated_by                                                                       String?                  @db.Uuid
  deleted_at                                                                       DateTime?                @db.Timestamptz(6)
  deleted_by                                                                       String?                  @db.Uuid
  deletion_reason                                                                  String?
  policy_category                                                                  String?                  @db.VarChar(20)
  policy_priority                                                                  Int?
  parent_policy_id                                                                 String?                  @db.Uuid
  coverage_territories                                                             String[]
  coverage_drivers                                                                 String?                  @db.VarChar(20)
  driver_restrictions                                                              Json?
  vehicle_usage                                                                    String?                  @db.VarChar(20)
  base_premium                                                                     Decimal?                 @db.Decimal(18, 2)
  excess_details                                                                   Json?
  no_claims_years                                                                  Int?                     @default(0)
  no_claims_bonus                                                                  Int?                     @default(0)
  claims_loading                                                                   Int?                     @default(0)
  claims_count                                                                     Int?                     @default(0)
  claims_detail                                                                    Json?
  total_claims_amount                                                              Decimal?                 @db.Decimal(18, 2)
  claims_ratio                                                                     Decimal?                 @db.Decimal(8, 4)
  risk_rating                                                                      String?                  @db.VarChar(10)
  risk_factors                                                                     Json?
  special_conditions                                                               Json?
  exclusions                                                                       Json?
  broker_id                                                                        String?                  @db.Uuid
  broker_commission                                                                Decimal?                 @db.Decimal(5, 2)
  broker_reference                                                                 String?
  renewal_date                                                                     DateTime?                @db.Date
  renewal_notice_sent                                                              Boolean?                 @default(false)
  renewal_quote                                                                    Decimal?                 @db.Decimal(18, 2)
  competitor_quotes                                                                Json?
  payment_frequency                                                                String?                  @db.VarChar(20)
  payment_method                                                                   String?                  @db.VarChar(20)
  payment_schedule                                                                 Json?
  next_payment_date                                                                DateTime?                @db.Date
  outstanding_amount                                                               Decimal?                 @db.Decimal(18, 2)
  co_insurance                                                                     Boolean?                 @default(false)
  co_insurers                                                                      Json?
  lead_insurer                                                                     String?                  @db.VarChar(200)
  adm_provider_employees_flt_vehicle_insurances_created_byToadm_provider_employees adm_provider_employees?  @relation("flt_vehicle_insurances_created_byToadm_provider_employees", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_insurances_created_by")
  adm_provider_employees_flt_vehicle_insurances_deleted_byToadm_provider_employees adm_provider_employees?  @relation("flt_vehicle_insurances_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_insurances_deleted_by")
  flt_vehicle_insurances                                                           flt_vehicle_insurances?  @relation("flt_vehicle_insurancesToflt_vehicle_insurances", fields: [parent_policy_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_insurances_parent_policy_id")
  other_flt_vehicle_insurances                                                     flt_vehicle_insurances[] @relation("flt_vehicle_insurancesToflt_vehicle_insurances")
  adm_tenants                                                                      adm_tenants              @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_flt_vehicle_insurances_tenant_id")
  adm_provider_employees_flt_vehicle_insurances_updated_byToadm_provider_employees adm_provider_employees?  @relation("flt_vehicle_insurances_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_insurances_updated_by")
  flt_vehicles                                                                     flt_vehicles             @relation(fields: [vehicle_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_insurances_vehicle_id")
  adm_members_flt_vehicle_insurances_created_byToadm_members                       adm_members?             @relation("flt_vehicle_insurances_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_flt_vehicle_insurances_deleted_byToadm_members                       adm_members?             @relation("flt_vehicle_insurances_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_members_flt_vehicle_insurances_updated_byToadm_members                       adm_members?             @relation("flt_vehicle_insurances_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_at(sort: Desc)])
  @@index([metadata], type: Gin)
  @@index([policy_number])
  @@index([policy_type])
  @@index([tenant_id])
  @@index([vehicle_id])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model flt_vehicle_maintenance {
  id                                                                                      String                      @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                                               String                      @db.Uuid
  vehicle_id                                                                              String                      @db.Uuid
  maintenance_type                                                                        String
  scheduled_date                                                                          DateTime                    @db.Date
  completed_date                                                                          DateTime?                   @db.Date
  odometer_reading                                                                        Int?
  next_service_km                                                                         Int?
  next_service_date                                                                       DateTime?                   @db.Date
  provider_name                                                                           String?
  provider_contact                                                                        String?
  cost_amount                                                                             Decimal?                    @db.Decimal(10, 2)
  currency                                                                                String                      @default("EUR") @db.Char(3)
  invoice_reference                                                                       String?
  parts_replaced                                                                          String?
  notes                                                                                   String?
  status                                                                                  String                      @default("scheduled")
  metadata                                                                                Json                        @default("{}")
  created_at                                                                              DateTime                    @default(now()) @db.Timestamptz(6)
  created_by                                                                              String?                     @db.Uuid
  updated_at                                                                              DateTime                    @default(now()) @db.Timestamptz(6)
  updated_by                                                                              String?                     @db.Uuid
  actual_start                                                                            DateTime?                   @db.Timestamptz(6)
  actual_end                                                                              DateTime?                   @db.Timestamptz(6)
  maintenance_category                                                                    String?                     @db.VarChar(20)
  priority                                                                                String?                     @db.VarChar(20)
  regulatory_requirement                                                                  Boolean?                    @default(false)
  blocking_vehicle                                                                        Boolean?                    @default(false)
  warranty_covered                                                                        Boolean?                    @default(false)
  warranty_claim_number                                                                   String?
  warranty_amount                                                                         Decimal?                    @db.Decimal(18, 2)
  insurance_covered                                                                       Boolean?                    @default(false)
  insurance_claim_ref                                                                     String?
  requested_by                                                                            String?                     @db.Uuid
  requested_at                                                                            DateTime?                   @db.Timestamptz(6)
  approved_by                                                                             String?                     @db.Uuid
  approved_at                                                                             DateTime?                   @db.Timestamptz(6)
  approval_notes                                                                          String?
  labor_hours                                                                             Decimal?                    @db.Decimal(8, 2)
  labor_rate                                                                              Decimal?                    @db.Decimal(18, 2)
  labor_cost                                                                              Decimal?                    @db.Decimal(18, 2)
  parts_cost                                                                              Decimal?                    @db.Decimal(18, 2)
  other_costs                                                                             Decimal?                    @db.Decimal(18, 2)
  tax_amount                                                                              Decimal?                    @db.Decimal(18, 2)
  total_cost_excl_tax                                                                     Decimal?                    @db.Decimal(18, 2)
  total_cost_incl_tax                                                                     Decimal?                    @db.Decimal(18, 2)
  parts_detail                                                                            Json?
  garage_id                                                                               String?                     @db.Uuid
  work_order_number                                                                       String?
  mechanic_name                                                                           String?
  mechanic_certification                                                                  String?
  quality_check_by                                                                        String?                     @db.Uuid
  quality_check_at                                                                        DateTime?                   @db.Timestamptz(6)
  blocked_periods                                                                         Json?
  deleted_at                                                                              DateTime?                   @db.Timestamptz(6)
  deleted_by                                                                              String?                     @db.Uuid
  deletion_reason                                                                         String?
  adm_provider_employees_flt_vehicle_maintenance_approved_byToadm_provider_employees      adm_provider_employees?     @relation("flt_vehicle_maintenance_approved_byToadm_provider_employees", fields: [approved_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_maintenance_approved_by")
  adm_provider_employees_flt_vehicle_maintenance_created_byToadm_provider_employees       adm_provider_employees?     @relation("flt_vehicle_maintenance_created_byToadm_provider_employees", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_maintenance_created_by")
  adm_provider_employees_flt_vehicle_maintenance_deleted_byToadm_provider_employees       adm_provider_employees?     @relation("flt_vehicle_maintenance_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_maintenance_deleted_by")
  adm_provider_employees_flt_vehicle_maintenance_quality_check_byToadm_provider_employees adm_provider_employees?     @relation("flt_vehicle_maintenance_quality_check_byToadm_provider_employees", fields: [quality_check_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_maintenance_quality_check_by")
  adm_provider_employees_flt_vehicle_maintenance_requested_byToadm_provider_employees     adm_provider_employees?     @relation("flt_vehicle_maintenance_requested_byToadm_provider_employees", fields: [requested_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_maintenance_requested_by")
  adm_tenants                                                                             adm_tenants                 @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_flt_vehicle_maintenance_tenant_id")
  adm_provider_employees_flt_vehicle_maintenance_updated_byToadm_provider_employees       adm_provider_employees?     @relation("flt_vehicle_maintenance_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_maintenance_updated_by")
  flt_vehicles                                                                            flt_vehicles                @relation(fields: [vehicle_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicle_maintenance_vehicle_id")
  adm_members_flt_vehicle_maintenance_created_byToadm_members                             adm_members?                @relation("flt_vehicle_maintenance_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_flt_vehicle_maintenance_updated_byToadm_members                             adm_members?                @relation("flt_vehicle_maintenance_updated_byToadm_members", fields: [updated_by], references: [id])
  sch_maintenance_schedules                                                               sch_maintenance_schedules[]

  @@index([created_at(sort: Desc)])
  @@index([created_by])
  @@index([maintenance_type])
  @@index([metadata], type: Gin)
  @@index([scheduled_date], map: "flt_vehicle_maintenance_scheduled_date_active_idx")
  @@index([status], map: "flt_vehicle_maintenance_status_active_idx")
  @@index([tenant_id])
  @@index([updated_by])
  @@index([vehicle_id])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model flt_vehicles {
  id                                                                     String                      @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                              String                      @db.Uuid
  make_id                                                                String                      @db.Uuid
  model_id                                                               String                      @db.Uuid
  license_plate                                                          String
  vin                                                                    String?
  year                                                                   Int
  color                                                                  String?
  seats                                                                  Int                         @default(4)
  vehicle_class                                                          String?
  fuel_type                                                              String?
  transmission                                                           String?
  registration_date                                                      DateTime?                   @db.Date
  insurance_number                                                       String?
  insurance_expiry                                                       DateTime?                   @db.Date
  last_inspection                                                        DateTime?                   @db.Date
  next_inspection                                                        DateTime?                   @db.Date
  odometer                                                               Int?
  ownership_type                                                         String                      @default("owned")
  metadata                                                               Json                        @default("{}")
  status                                                                 String                      @default("pending")
  created_at                                                             DateTime                    @default(now()) @db.Timestamptz(6)
  created_by                                                             String?                     @db.Uuid
  updated_at                                                             DateTime                    @default(now()) @db.Timestamptz(6)
  updated_by                                                             String?                     @db.Uuid
  deleted_at                                                             DateTime?                   @db.Timestamptz(6)
  deleted_by                                                             String?                     @db.Uuid
  deletion_reason                                                        String?
  country_code                                                           String?                     @db.Char(2)
  requires_professional_license                                          Boolean?                    @default(false)
  documents_status                                                       Json?
  body_type                                                              String?                     @db.VarChar(20)
  passenger_capacity                                                     Int?
  car_length_cm                                                          Int?
  car_width_cm                                                           Int?
  car_height_cm                                                          Int?
  vehicle_class_id                                                       String?                     @db.Uuid
  first_registration_date                                                DateTime?                   @db.Date
  warranty_expiry                                                        DateTime?                   @db.Date
  service_interval_km                                                    Int?
  next_service_at_km                                                     Int?
  insurance_policy_number                                                String?
  insurance_coverage_type                                                String?
  insurance_amount                                                       Decimal?                    @db.Decimal(18, 2)
  insurance_issue_date                                                   DateTime?                   @db.Date
  ownership_type_id                                                      String?                     @db.Uuid
  owner_id                                                               String?                     @db.Uuid
  acquisition_date                                                       DateTime?                   @db.Date
  lease_end_date                                                         DateTime?                   @db.Date
  residual_value                                                         Decimal?                    @db.Decimal(18, 2)
  status_id                                                              String?                     @db.Uuid
  status_changed_at                                                      DateTime?                   @db.Timestamptz(6)
  fin_toll_transactions                                                  fin_toll_transactions[]
  fin_traffic_fines                                                      fin_traffic_fines[]
  flt_vehicle_assignments                                                flt_vehicle_assignments[]
  flt_vehicle_equipments                                                 flt_vehicle_equipments[]
  flt_vehicle_events                                                     flt_vehicle_events[]
  flt_vehicle_expenses                                                   flt_vehicle_expenses[]
  flt_vehicle_inspections                                                flt_vehicle_inspections[]
  flt_vehicle_insurances                                                 flt_vehicle_insurances[]
  flt_vehicle_maintenance                                                flt_vehicle_maintenance[]
  dir_country_regulations                                                dir_country_regulations?    @relation(fields: [country_code], references: [country_code], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicles_country_code")
  adm_provider_employees_flt_vehicles_created_byToadm_provider_employees adm_provider_employees?     @relation("flt_vehicles_created_byToadm_provider_employees", fields: [created_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicles_created_by")
  adm_provider_employees_flt_vehicles_deleted_byToadm_provider_employees adm_provider_employees?     @relation("flt_vehicles_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicles_deleted_by")
  dir_car_makes                                                          dir_car_makes               @relation(fields: [make_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicles_make_id")
  dir_car_models                                                         dir_car_models              @relation(fields: [model_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicles_model_id")
  dir_ownership_types                                                    dir_ownership_types?        @relation(fields: [ownership_type_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicles_ownership_type_id")
  dir_vehicle_statuses                                                   dir_vehicle_statuses?       @relation(fields: [status_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicles_status_id")
  adm_tenants                                                            adm_tenants                 @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_flt_vehicles_tenant_id")
  adm_provider_employees_flt_vehicles_updated_byToadm_provider_employees adm_provider_employees?     @relation("flt_vehicles_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicles_updated_by")
  dir_vehicle_classes                                                    dir_vehicle_classes?        @relation(fields: [vehicle_class_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_flt_vehicles_vehicle_class_id")
  adm_members_flt_vehicles_created_byToadm_members                       adm_members?                @relation("flt_vehicles_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_flt_vehicles_deleted_byToadm_members                       adm_members?                @relation("flt_vehicles_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_members_flt_vehicles_updated_byToadm_members                       adm_members?                @relation("flt_vehicles_updated_byToadm_members", fields: [updated_by], references: [id])
  sch_maintenance_schedules                                              sch_maintenance_schedules[]
  trp_trips                                                              trp_trips[]

  @@index([created_by])
  @@index([deleted_at])
  @@index([license_plate])
  @@index([make_id])
  @@index([metadata], type: Gin)
  @@index([model_id])
  @@index([next_inspection])
  @@index([tenant_id])
  @@index([updated_by])
  @@index([vin])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model rev_driver_revenues {
  id                                                        String                      @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                 String                      @db.Uuid
  driver_id                                                 String                      @db.Uuid
  period_start                                              DateTime                    @db.Date
  period_end                                                DateTime                    @db.Date
  total_revenue                                             Decimal                     @default(0) @db.Decimal(18, 2)
  commission_amount                                         Decimal                     @default(0) @db.Decimal(18, 2)
  net_revenue                                               Decimal                     @default(0) @db.Decimal(18, 2)
  metadata                                                  Json                        @default("{}")
  created_at                                                DateTime                    @default(now()) @db.Timestamptz(6)
  created_by                                                String?                     @db.Uuid
  updated_at                                                DateTime                    @default(now()) @db.Timestamptz(6)
  updated_by                                                String?                     @db.Uuid
  deleted_at                                                DateTime?                   @db.Timestamptz(6)
  deleted_by                                                String?                     @db.Uuid
  deletion_reason                                           String?
  platform_id                                               String?                     @db.Uuid
  period_type                                               driver_revenue_period_type?
  currency                                                  String?                     @db.Char(3)
  import_id                                                 String?                     @db.Uuid
  status                                                    driver_revenue_status       @default(pending)
  validated_by                                              String?                     @db.Uuid
  validated_at                                              DateTime?                   @db.Timestamptz(6)
  adjustment_reason                                         String?
  adm_members_rev_driver_revenues_created_byToadm_members   adm_members?                @relation("rev_driver_revenues_created_byToadm_members", fields: [created_by], references: [id], map: "fk_rev_driver_revenues_created_by")
  adm_members_rev_driver_revenues_deleted_byToadm_members   adm_members?                @relation("rev_driver_revenues_deleted_byToadm_members", fields: [deleted_by], references: [id], map: "fk_rev_driver_revenues_deleted_by")
  rid_drivers                                               rid_drivers                 @relation(fields: [driver_id], references: [id], map: "fk_rev_driver_revenues_driver")
  rev_revenue_imports                                       rev_revenue_imports?        @relation(fields: [import_id], references: [id], onDelete: Restrict, map: "fk_rev_driver_revenues_import")
  dir_platforms                                             dir_platforms?              @relation(fields: [platform_id], references: [id], onDelete: Restrict, map: "fk_rev_driver_revenues_platform")
  adm_tenants                                               adm_tenants                 @relation(fields: [tenant_id], references: [id], onDelete: Cascade, map: "fk_rev_driver_revenues_tenant")
  adm_members_rev_driver_revenues_updated_byToadm_members   adm_members?                @relation("rev_driver_revenues_updated_byToadm_members", fields: [updated_by], references: [id], map: "fk_rev_driver_revenues_updated_by")
  adm_members_rev_driver_revenues_validated_byToadm_members adm_members?                @relation("rev_driver_revenues_validated_byToadm_members", fields: [validated_by], references: [id], map: "fk_rev_driver_revenues_validated_by")

  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([metadata], type: Gin)
  @@index([period_end(sort: Desc)])
  @@index([period_start(sort: Desc)])
  @@index([tenant_id])
  @@index([updated_by])
}

model rev_reconciliation_lines {
  id                  String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  reconciliation_id   String              @db.Uuid
  driver_id           String?             @db.Uuid
  platform_id         String?             @db.Uuid
  expected_amount     Decimal             @db.Decimal(18, 2)
  received_amount     Decimal             @db.Decimal(18, 2)
  notes               String?
  metadata            Json?               @default("{}")
  rid_drivers         rid_drivers?        @relation(fields: [driver_id], references: [id], onDelete: Restrict, map: "fk_rev_reconciliation_lines_driver")
  dir_platforms       dir_platforms?      @relation(fields: [platform_id], references: [id], onDelete: Restrict, map: "fk_rev_reconciliation_lines_platform")
  rev_reconciliations rev_reconciliations @relation(fields: [reconciliation_id], references: [id], onDelete: Cascade, map: "fk_rev_reconciliation_lines_reconciliation")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model rev_reconciliations {
  id                                                       String                     @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                String                     @db.Uuid
  import_id                                                String                     @db.Uuid
  reconciliation_date                                      DateTime                   @db.Date
  status                                                   String                     @default("pending")
  notes                                                    String?
  metadata                                                 Json                       @default("{}")
  created_at                                               DateTime                   @default(now()) @db.Timestamptz(6)
  created_by                                               String?                    @db.Uuid
  updated_at                                               DateTime                   @default(now()) @db.Timestamptz(6)
  updated_by                                               String?                    @db.Uuid
  deleted_at                                               DateTime?                  @db.Timestamptz(6)
  deleted_by                                               String?                    @db.Uuid
  deletion_reason                                          String?
  reconciliation_type                                      reconciliation_type?
  expected_amount                                          Decimal?                   @db.Decimal(18, 2)
  received_amount                                          Decimal?                   @db.Decimal(18, 2)
  tolerance_amount                                         Decimal?                   @db.Decimal(18, 2)
  currency                                                 String?                    @db.Char(3)
  auto_matched                                             Boolean?                   @default(false)
  assigned_to                                              String?                    @db.Uuid
  resolved_at                                              DateTime?                  @db.Timestamptz(6)
  resolved_by                                              String?                    @db.Uuid
  resolution_notes                                         String?
  requires_action                                          Boolean?                   @default(false)
  driver_id                                                String?                    @db.Uuid
  rev_reconciliation_lines                                 rev_reconciliation_lines[]
  adm_members_rev_reconciliations_assigned_toToadm_members adm_members?               @relation("rev_reconciliations_assigned_toToadm_members", fields: [assigned_to], references: [id], map: "fk_rev_reconciliations_assigned_to")
  adm_members_rev_reconciliations_created_byToadm_members  adm_members?               @relation("rev_reconciliations_created_byToadm_members", fields: [created_by], references: [id], map: "fk_rev_reconciliations_created_by")
  adm_members_rev_reconciliations_deleted_byToadm_members  adm_members?               @relation("rev_reconciliations_deleted_byToadm_members", fields: [deleted_by], references: [id], map: "fk_rev_reconciliations_deleted_by")
  rid_drivers                                              rid_drivers?               @relation(fields: [driver_id], references: [id], onDelete: Restrict, map: "fk_rev_reconciliations_driver")
  rev_revenue_imports                                      rev_revenue_imports        @relation(fields: [import_id], references: [id], map: "fk_rev_reconciliations_import")
  adm_members_rev_reconciliations_resolved_byToadm_members adm_members?               @relation("rev_reconciliations_resolved_byToadm_members", fields: [resolved_by], references: [id], map: "fk_rev_reconciliations_resolved_by")
  adm_tenants                                              adm_tenants                @relation(fields: [tenant_id], references: [id], onDelete: Cascade, map: "fk_rev_reconciliations_tenant")
  adm_members_rev_reconciliations_updated_byToadm_members  adm_members?               @relation("rev_reconciliations_updated_byToadm_members", fields: [updated_by], references: [id], map: "fk_rev_reconciliations_updated_by")
  trp_settlements                                          trp_settlements[]

  @@index([created_by])
  @@index([deleted_at])
  @@index([import_id])
  @@index([metadata], type: Gin)
  @@index([reconciliation_date(sort: Desc)])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model rev_revenue_imports {
  id                                                      String                      @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                               String                      @db.Uuid
  import_reference                                        String
  import_date                                             DateTime                    @db.Date
  status                                                  String                      @default("pending")
  total_revenue                                           Decimal                     @default(0) @db.Decimal(18, 2)
  currency                                                String                      @db.VarChar(3)
  metadata                                                Json                        @default("{}")
  created_at                                              DateTime                    @default(now()) @db.Timestamptz(6)
  created_by                                              String?                     @db.Uuid
  updated_at                                              DateTime                    @default(now()) @db.Timestamptz(6)
  updated_by                                              String?                     @db.Uuid
  deleted_at                                              DateTime?                   @db.Timestamptz(6)
  deleted_by                                              String?                     @db.Uuid
  deletion_reason                                         String?
  platform_id                                             String?                     @db.Uuid
  source_type                                             revenue_import_source_type?
  file_url                                                String?
  source_currency                                         String?                     @db.Char(3)
  exchange_rate                                           Decimal?                    @db.Decimal(12, 6)
  converted_amount                                        Decimal?                    @db.Decimal(18, 2)
  rows_count                                              Int?                        @default(0)
  errors_count                                            Int?                        @default(0)
  warnings_count                                          Int?                        @default(0)
  processing_started_at                                   DateTime?                   @db.Timestamptz(6)
  processing_completed_at                                 DateTime?                   @db.Timestamptz(6)
  status_reason                                           String?
  retry_count                                             Int?                        @default(0)
  last_error                                              String?
  rev_driver_revenues                                     rev_driver_revenues[]
  rev_reconciliations                                     rev_reconciliations[]
  adm_members_rev_revenue_imports_created_byToadm_members adm_members?                @relation("rev_revenue_imports_created_byToadm_members", fields: [created_by], references: [id], map: "fk_rev_revenue_imports_created_by")
  adm_members_rev_revenue_imports_deleted_byToadm_members adm_members?                @relation("rev_revenue_imports_deleted_byToadm_members", fields: [deleted_by], references: [id], map: "fk_rev_revenue_imports_deleted_by")
  dir_platforms                                           dir_platforms?              @relation(fields: [platform_id], references: [id], onDelete: Restrict, map: "fk_rev_revenue_imports_platform")
  adm_tenants                                             adm_tenants                 @relation(fields: [tenant_id], references: [id], onDelete: Cascade, map: "fk_rev_revenue_imports_tenant")
  adm_members_rev_revenue_imports_updated_byToadm_members adm_members?                @relation("rev_revenue_imports_updated_byToadm_members", fields: [updated_by], references: [id], map: "fk_rev_revenue_imports_updated_by")

  @@index([created_by])
  @@index([deleted_at])
  @@index([import_date(sort: Desc)])
  @@index([metadata], type: Gin)
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model rid_driver_blacklists {
  id                                                                String              @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                         String              @db.Uuid
  driver_id                                                         String              @db.Uuid
  reason                                                            String
  start_date                                                        DateTime            @db.Timestamptz(6)
  end_date                                                          DateTime?           @db.Timestamptz(6)
  metadata                                                          Json                @default("{}")
  created_at                                                        DateTime            @default(now()) @db.Timestamptz(6)
  created_by                                                        String?             @db.Uuid
  updated_at                                                        DateTime            @default(now()) @db.Timestamptz(6)
  updated_by                                                        String?             @db.Uuid
  deleted_at                                                        DateTime?           @db.Timestamptz(6)
  deleted_by                                                        String?             @db.Uuid
  deletion_reason                                                   String?
  category                                                          blacklist_category?
  severity                                                          blacklist_severity?
  status                                                            blacklist_status?   @default(active)
  incident_date                                                     DateTime?           @db.Timestamptz(6)
  incident_location                                                 String?
  incident_description                                              String?
  evidence_documents                                                Json?               @default("[]")
  decided_by                                                        String?             @db.Uuid
  decided_at                                                        DateTime?           @db.Timestamptz(6)
  decision_notes                                                    String?
  decision_reviewed                                                 Boolean?            @default(false)
  reviewed_by                                                       String?             @db.Uuid
  reviewed_at                                                       DateTime?           @db.Timestamptz(6)
  appeal_status                                                     appeal_status?      @default(not_applicable)
  appeal_submitted_at                                               DateTime?           @db.Timestamptz(6)
  appeal_reason                                                     String?
  appeal_reviewed_at                                                DateTime?           @db.Timestamptz(6)
  appeal_reviewed_by                                                String?             @db.Uuid
  appeal_decision                                                   String?
  appeal_outcome                                                    String?             @db.VarChar(50)
  legal_review_required                                             Boolean?            @default(false)
  legal_reviewed_at                                                 DateTime?           @db.Timestamptz(6)
  legal_reviewed_by                                                 String?             @db.Uuid
  legal_case_number                                                 String?             @db.VarChar(100)
  legal_notes                                                       String?
  reinstatement_conditions                                          String?
  reinstatement_eligible_date                                       DateTime?           @db.Date
  reinstated_at                                                     DateTime?           @db.Timestamptz(6)
  reinstated_by                                                     String?             @db.Uuid
  driver_notified_at                                                DateTime?           @db.Timestamptz(6)
  notification_method                                               String?             @db.VarChar(50)
  acknowledgment_received                                           Boolean?            @default(false)
  acknowledgment_date                                               DateTime?           @db.Timestamptz(6)
  adm_members_rid_driver_blacklists_appeal_reviewed_byToadm_members adm_members?        @relation("rid_driver_blacklists_appeal_reviewed_byToadm_members", fields: [appeal_reviewed_by], references: [id], onUpdate: NoAction)
  adm_members_rid_driver_blacklists_created_byToadm_members         adm_members?        @relation("rid_driver_blacklists_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_rid_driver_blacklists_decided_byToadm_members         adm_members?        @relation("rid_driver_blacklists_decided_byToadm_members", fields: [decided_by], references: [id], onUpdate: NoAction)
  adm_members_rid_driver_blacklists_reviewed_byToadm_members        adm_members?        @relation("rid_driver_blacklists_reviewed_byToadm_members", fields: [reviewed_by], references: [id], onUpdate: NoAction, map: "rid_driver_blacklists_decision_reviewed_by_fkey")
  adm_members_rid_driver_blacklists_deleted_byToadm_members         adm_members?        @relation("rid_driver_blacklists_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                                       rid_drivers         @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  adm_members_rid_driver_blacklists_legal_reviewed_byToadm_members  adm_members?        @relation("rid_driver_blacklists_legal_reviewed_byToadm_members", fields: [legal_reviewed_by], references: [id], onUpdate: NoAction)
  adm_members_rid_driver_blacklists_reinstated_byToadm_members      adm_members?        @relation("rid_driver_blacklists_reinstated_byToadm_members", fields: [reinstated_by], references: [id], onUpdate: NoAction)
  adm_tenants                                                       adm_tenants         @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_rid_driver_blacklists_updated_byToadm_members         adm_members?        @relation("rid_driver_blacklists_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([end_date])
  @@index([metadata], map: "rid_driver_blacklists_metadata_gin", type: Gin)
  @@index([start_date])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model rid_driver_cooperation_terms {
  id                                                                             String                         @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                                      String                         @db.Uuid
  driver_id                                                                      String                         @db.Uuid
  terms_version                                                                  String
  accepted_at                                                                    DateTime?                      @db.Timestamptz(6)
  effective_date                                                                 DateTime?                      @db.Date
  expiry_date                                                                    DateTime?                      @db.Date
  metadata                                                                       Json                           @default("{}")
  created_at                                                                     DateTime                       @default(now()) @db.Timestamptz(6)
  created_by                                                                     String?                        @db.Uuid
  updated_at                                                                     DateTime                       @default(now()) @db.Timestamptz(6)
  updated_by                                                                     String?                        @db.Uuid
  deleted_at                                                                     DateTime?                      @db.Timestamptz(6)
  deleted_by                                                                     String?                        @db.Uuid
  deletion_reason                                                                String?
  status                                                                         cooperation_status?            @default(pending)
  compensation_model                                                             compensation_model?
  fixed_rental_amount                                                            Decimal?                       @db.Decimal(12, 2)
  percentage_split_company                                                       Decimal?                       @db.Decimal(5, 2)
  percentage_split_driver                                                        Decimal?                       @db.Decimal(5, 2)
  salary_amount                                                                  Decimal?                       @db.Decimal(12, 2)
  crew_rental_terms                                                              String?
  buyout_amount                                                                  Decimal?                       @db.Decimal(12, 2)
  custom_terms                                                                   String?
  signature_method                                                               signature_method?
  signature_data                                                                 Json?
  signature_ip                                                                   String?                        @db.VarChar(45)
  signature_timestamp                                                            DateTime?                      @db.Timestamptz(6)
  digital_signature_verified                                                     Boolean?                       @default(false)
  previous_version_id                                                            String?                        @db.Uuid
  version_change_reason                                                          String?
  legal_review_required                                                          Boolean?                       @default(false)
  legal_reviewed_at                                                              DateTime?                      @db.Timestamptz(6)
  legal_reviewed_by                                                              String?                        @db.Uuid
  legal_review_notes                                                             String?
  auto_renewal                                                                   Boolean?                       @default(false)
  auto_renewal_notice_days                                                       Int?                           @default(30)
  renewal_reminder_sent_at                                                       DateTime?                      @db.Timestamptz(6)
  termination_date                                                               DateTime?                      @db.Timestamptz(6)
  termination_reason                                                             String?
  termination_initiated_by                                                       String?                        @db.Uuid
  early_termination_penalty                                                      Decimal?                       @db.Decimal(12, 2)
  adm_members_rid_driver_cooperation_terms_created_byToadm_members               adm_members?                   @relation("rid_driver_cooperation_terms_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_rid_driver_cooperation_terms_deleted_byToadm_members               adm_members?                   @relation("rid_driver_cooperation_terms_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                                                    rid_drivers                    @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  adm_members_rid_driver_cooperation_terms_legal_reviewed_byToadm_members        adm_members?                   @relation("rid_driver_cooperation_terms_legal_reviewed_byToadm_members", fields: [legal_reviewed_by], references: [id], onUpdate: NoAction)
  rid_driver_cooperation_terms                                                   rid_driver_cooperation_terms?  @relation("rid_driver_cooperation_termsTorid_driver_cooperation_terms", fields: [previous_version_id], references: [id], onUpdate: NoAction, map: "rid_driver_cooperation_terms_previous_version_fkey")
  other_rid_driver_cooperation_terms                                             rid_driver_cooperation_terms[] @relation("rid_driver_cooperation_termsTorid_driver_cooperation_terms")
  adm_tenants                                                                    adm_tenants                    @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_rid_driver_cooperation_terms_termination_initiated_byToadm_members adm_members?                   @relation("rid_driver_cooperation_terms_termination_initiated_byToadm_members", fields: [termination_initiated_by], references: [id], onUpdate: NoAction, map: "rid_driver_cooperation_terms_termination_by_fkey")
  adm_members_rid_driver_cooperation_terms_updated_byToadm_members               adm_members?                   @relation("rid_driver_cooperation_terms_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([accepted_at])
  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([effective_date])
  @@index([expiry_date])
  @@index([metadata], map: "rid_driver_cooperation_terms_metadata_gin", type: Gin)
  @@index([tenant_id])
  @@index([terms_version])
  @@index([updated_by])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model rid_driver_documents {
  id                                                        String                        @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                 String                        @db.Uuid
  driver_id                                                 String                        @db.Uuid
  document_id                                               String                        @db.Uuid
  expiry_date                                               DateTime?                     @db.Date
  verified                                                  Boolean                       @default(false)
  verified_by                                               String?                       @db.Uuid
  verified_at                                               DateTime?                     @db.Timestamptz(6)
  created_at                                                DateTime                      @default(now()) @db.Timestamptz(6)
  created_by                                                String?                       @db.Uuid
  updated_at                                                DateTime                      @default(now()) @db.Timestamptz(6)
  updated_by                                                String?                       @db.Uuid
  deleted_at                                                DateTime?                     @db.Timestamptz(6)
  deleted_by                                                String?                       @db.Uuid
  deletion_reason                                           String?
  document_type                                             driver_document_type?
  requires_renewal                                          Boolean?                      @default(true)
  renewal_frequency_days                                    Int?
  reminder_sent_at                                          DateTime?                     @db.Timestamptz(6)
  reminder_days_before                                      Int?                          @default(30)
  verification_status                                       document_verification_status? @default(pending)
  rejection_reason                                          String?
  verification_method                                       String?                       @db.VarChar(50)
  document_number                                           String?                       @db.VarChar(100)
  issuing_authority                                         String?                       @db.VarChar(255)
  issuing_country                                           String?                       @db.Char(2)
  issue_date                                                DateTime?                     @db.Date
  replaced_document_id                                      String?                       @db.Uuid
  replacement_reason                                        String?
  ocr_data                                                  Json?
  confidence_score                                          Decimal?                      @db.Decimal(5, 2)
  adm_members_rid_driver_documents_created_byToadm_members  adm_members?                  @relation("rid_driver_documents_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_rid_driver_documents_deleted_byToadm_members  adm_members?                  @relation("rid_driver_documents_deleted_byToadm_members", fields: [deleted_by], references: [id])
  doc_documents                                             doc_documents                 @relation(fields: [document_id], references: [id], onDelete: Cascade)
  rid_drivers                                               rid_drivers                   @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  rid_driver_documents                                      rid_driver_documents?         @relation("rid_driver_documentsTorid_driver_documents", fields: [replaced_document_id], references: [id], onUpdate: NoAction, map: "rid_driver_documents_replaced_document_fkey")
  other_rid_driver_documents                                rid_driver_documents[]        @relation("rid_driver_documentsTorid_driver_documents")
  adm_tenants                                               adm_tenants                   @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_rid_driver_documents_updated_byToadm_members  adm_members?                  @relation("rid_driver_documents_updated_byToadm_members", fields: [updated_by], references: [id])
  adm_members_rid_driver_documents_verified_byToadm_members adm_members?                  @relation("rid_driver_documents_verified_byToadm_members", fields: [verified_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([document_id])
  @@index([driver_id])
  @@index([expiry_date])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model rid_driver_languages {
  id                                                       String       @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                String       @db.Uuid
  driver_id                                                String       @db.Uuid
  language_code                                            String       @db.Char(2)
  proficiency                                              String?
  created_at                                               DateTime     @default(now()) @db.Timestamptz(6)
  created_by                                               String?      @db.Uuid
  updated_at                                               DateTime     @default(now()) @db.Timestamptz(6)
  updated_by                                               String?      @db.Uuid
  deleted_at                                               DateTime?    @db.Timestamptz(6)
  deleted_by                                               String?      @db.Uuid
  deletion_reason                                          String?
  adm_members_rid_driver_languages_created_byToadm_members adm_members? @relation("rid_driver_languages_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_rid_driver_languages_deleted_byToadm_members adm_members? @relation("rid_driver_languages_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                              rid_drivers  @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  adm_tenants                                              adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_rid_driver_languages_updated_byToadm_members adm_members? @relation("rid_driver_languages_updated_byToadm_members", fields: [updated_by], references: [id])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model rid_driver_performances {
  id                                                          String         @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                   String         @db.Uuid
  driver_id                                                   String         @db.Uuid
  period_start                                                DateTime       @db.Date
  period_end                                                  DateTime       @db.Date
  trips_completed                                             Int            @default(0)
  trips_cancelled                                             Int            @default(0)
  on_time_rate                                                Decimal?       @db.Decimal(5, 2)
  avg_rating                                                  Decimal?       @db.Decimal(3, 2)
  incidents_count                                             Int            @default(0)
  earnings_total                                              Decimal        @default(0) @db.Decimal(12, 2)
  hours_online                                                Decimal?       @db.Decimal(7, 2)
  metadata                                                    Json           @default("{}")
  created_at                                                  DateTime       @default(now()) @db.Timestamptz(6)
  created_by                                                  String?        @db.Uuid
  updated_at                                                  DateTime       @default(now()) @db.Timestamptz(6)
  updated_by                                                  String?        @db.Uuid
  deleted_at                                                  DateTime?      @db.Timestamptz(6)
  deleted_by                                                  String?        @db.Uuid
  deletion_reason                                             String?
  platform_id                                                 String?        @db.Uuid
  platform_trips_completed                                    Int?           @default(0)
  platform_earnings                                           Decimal?       @default(0) @db.Decimal(12, 2)
  cash_trips                                                  Int?           @default(0)
  cash_earnings                                               Decimal?       @default(0) @db.Decimal(12, 2)
  card_trips                                                  Int?           @default(0)
  card_earnings                                               Decimal?       @default(0) @db.Decimal(12, 2)
  wallet_trips                                                Int?           @default(0)
  wallet_earnings                                             Decimal?       @default(0) @db.Decimal(12, 2)
  mixed_payment_trips                                         Int?           @default(0)
  rank_in_period                                              Int?
  tier                                                        String?        @db.VarChar(20)
  tier_change                                                 String?        @db.VarChar(10)
  acceptance_rate                                             Decimal?       @db.Decimal(5, 2)
  cancellation_rate                                           Decimal?       @db.Decimal(5, 2)
  completion_rate                                             Decimal?       @db.Decimal(5, 2)
  avg_trip_duration_minutes                                   Decimal?       @db.Decimal(7, 2)
  avg_earnings_per_trip                                       Decimal?       @db.Decimal(10, 2)
  avg_earnings_per_hour                                       Decimal?       @db.Decimal(10, 2)
  total_ratings_received                                      Int?           @default(0)
  five_star_ratings                                           Int?           @default(0)
  one_star_ratings                                            Int?           @default(0)
  compliments_received                                        Int?           @default(0)
  complaints_received                                         Int?           @default(0)
  total_fuel_cost                                             Decimal?       @default(0) @db.Decimal(12, 2)
  total_expenses                                              Decimal?       @default(0) @db.Decimal(12, 2)
  net_earnings                                                Decimal?       @default(0) @db.Decimal(12, 2)
  bonus_earned                                                Decimal?       @default(0) @db.Decimal(12, 2)
  incentives_earned                                           Decimal?       @default(0) @db.Decimal(12, 2)
  penalties_deducted                                          Decimal?       @default(0) @db.Decimal(12, 2)
  total_distance_km                                           Decimal?       @default(0) @db.Decimal(10, 2)
  hours_logged                                                Decimal?       @db.Decimal(7, 2)
  adm_members_rid_driver_performances_created_byToadm_members adm_members?   @relation("rid_driver_performances_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_rid_driver_performances_deleted_byToadm_members adm_members?   @relation("rid_driver_performances_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                                 rid_drivers    @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  dir_platforms                                               dir_platforms? @relation(fields: [platform_id], references: [id], onUpdate: NoAction)
  adm_tenants                                                 adm_tenants    @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_rid_driver_performances_updated_byToadm_members adm_members?   @relation("rid_driver_performances_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([metadata], map: "rid_driver_performances_metadata_gin", type: Gin)
  @@index([period_end])
  @@index([period_start])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model rid_driver_requests {
  id                                                               String               @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                        String               @db.Uuid
  driver_id                                                        String               @db.Uuid
  request_date                                                     DateTime             @db.Date
  details                                                          Json                 @default("{}")
  resolution_notes                                                 String?
  created_at                                                       DateTime             @default(now()) @db.Timestamptz(6)
  created_by                                                       String?              @db.Uuid
  updated_at                                                       DateTime             @default(now()) @db.Timestamptz(6)
  updated_by                                                       String?              @db.Uuid
  deleted_at                                                       DateTime?            @db.Timestamptz(6)
  deleted_by                                                       String?              @db.Uuid
  deletion_reason                                                  String?
  request_type                                                     driver_request_type?
  status                                                           request_status?      @default(pending)
  priority                                                         request_priority?    @default(normal)
  sla_deadline                                                     DateTime?            @db.Timestamptz(6)
  sla_breached                                                     Boolean?             @default(false)
  response_required_by                                             DateTime?            @db.Timestamptz(6)
  assigned_to                                                      String?              @db.Uuid
  assigned_at                                                      DateTime?            @db.Timestamptz(6)
  review_started_at                                                DateTime?            @db.Timestamptz(6)
  reviewed_by                                                      String?              @db.Uuid
  approved_at                                                      DateTime?            @db.Timestamptz(6)
  approved_by                                                      String?              @db.Uuid
  rejected_at                                                      DateTime?            @db.Timestamptz(6)
  rejected_by                                                      String?              @db.Uuid
  rejection_reason                                                 String?
  completed_at                                                     DateTime?            @db.Timestamptz(6)
  escalated                                                        Boolean?             @default(false)
  escalated_at                                                     DateTime?            @db.Timestamptz(6)
  escalated_to                                                     String?              @db.Uuid
  escalation_reason                                                String?
  requires_manager_approval                                        Boolean?             @default(false)
  manager_approved_at                                              DateTime?            @db.Timestamptz(6)
  manager_approved_by                                              String?              @db.Uuid
  requires_hr_approval                                             Boolean?             @default(false)
  hr_approved_at                                                   DateTime?            @db.Timestamptz(6)
  hr_approved_by                                                   String?              @db.Uuid
  driver_notified_at                                               DateTime?            @db.Timestamptz(6)
  manager_notified_at                                              DateTime?            @db.Timestamptz(6)
  notification_method                                              String?              @db.VarChar(50)
  attachments                                                      Json?                @default("[]")
  adm_members_rid_driver_requests_approved_byToadm_members         adm_members?         @relation("rid_driver_requests_approved_byToadm_members", fields: [approved_by], references: [id], onUpdate: NoAction)
  adm_members_rid_driver_requests_assigned_toToadm_members         adm_members?         @relation("rid_driver_requests_assigned_toToadm_members", fields: [assigned_to], references: [id], onUpdate: NoAction)
  adm_members_rid_driver_requests_created_byToadm_members          adm_members?         @relation("rid_driver_requests_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_rid_driver_requests_deleted_byToadm_members          adm_members?         @relation("rid_driver_requests_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                                      rid_drivers          @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  adm_members_rid_driver_requests_escalated_toToadm_members        adm_members?         @relation("rid_driver_requests_escalated_toToadm_members", fields: [escalated_to], references: [id], onUpdate: NoAction)
  adm_members_rid_driver_requests_hr_approved_byToadm_members      adm_members?         @relation("rid_driver_requests_hr_approved_byToadm_members", fields: [hr_approved_by], references: [id], onUpdate: NoAction)
  adm_members_rid_driver_requests_manager_approved_byToadm_members adm_members?         @relation("rid_driver_requests_manager_approved_byToadm_members", fields: [manager_approved_by], references: [id], onUpdate: NoAction)
  adm_members_rid_driver_requests_rejected_byToadm_members         adm_members?         @relation("rid_driver_requests_rejected_byToadm_members", fields: [rejected_by], references: [id], onUpdate: NoAction)
  adm_members_rid_driver_requests_reviewed_byToadm_members         adm_members?         @relation("rid_driver_requests_reviewed_byToadm_members", fields: [reviewed_by], references: [id], onUpdate: NoAction)
  adm_tenants                                                      adm_tenants          @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_rid_driver_requests_updated_byToadm_members          adm_members?         @relation("rid_driver_requests_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([details], map: "rid_driver_requests_details_gin", type: Gin)
  @@index([driver_id])
  @@index([request_date])
  @@index([tenant_id])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model rid_driver_training {
  id                                                        String                  @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                 String                  @db.Uuid
  driver_id                                                 String                  @db.Uuid
  training_name                                             String
  provider                                                  String?
  assigned_at                                               DateTime?               @db.Timestamptz(6)
  due_at                                                    DateTime?               @db.Timestamptz(6)
  completed_at                                              DateTime?               @db.Timestamptz(6)
  score                                                     Decimal?                @db.Decimal(5, 2)
  certificate_url                                           String?
  metadata                                                  Json                    @default("{}")
  created_at                                                DateTime                @default(now()) @db.Timestamptz(6)
  created_by                                                String?                 @db.Uuid
  updated_at                                                DateTime                @default(now()) @db.Timestamptz(6)
  updated_by                                                String?                 @db.Uuid
  deleted_at                                                DateTime?               @db.Timestamptz(6)
  deleted_by                                                String?                 @db.Uuid
  deletion_reason                                           String?
  training_type                                             training_type?
  status                                                    training_status?        @default(planned)
  provider_type                                             provider_type?
  provider_id                                               String?                 @db.Uuid
  provider_contact                                          String?                 @db.VarChar(255)
  provider_location                                         String?
  description                                               String?
  duration_hours                                            Decimal?                @db.Decimal(5, 2)
  total_sessions                                            Int?                    @default(1)
  sessions_completed                                        Int?                    @default(0)
  materials_url                                             String?
  prerequisites_met                                         Boolean?                @default(true)
  prerequisite_training_ids                                 Json?                   @default("[]")
  prerequisite_documents                                    Json?                   @default("[]")
  scheduled_start                                           DateTime?               @db.Timestamptz(6)
  scheduled_end                                             DateTime?               @db.Timestamptz(6)
  actual_start                                              DateTime?               @db.Timestamptz(6)
  actual_end                                                DateTime?               @db.Timestamptz(6)
  location                                                  String?
  online_meeting_url                                        String?
  attendance_percentage                                     Decimal?                @db.Decimal(5, 2)
  absences_count                                            Int?                    @default(0)
  late_arrivals_count                                       Int?                    @default(0)
  evaluation_method                                         String?                 @db.VarChar(100)
  passing_score                                             Decimal?                @db.Decimal(5, 2)
  max_score                                                 Decimal?                @db.Decimal(5, 2)
  pass_fail_status                                          String?                 @db.VarChar(20)
  evaluation_date                                           DateTime?               @db.Timestamptz(6)
  evaluated_by                                              String?                 @db.Uuid
  evaluation_notes                                          String?
  certificate_issued                                        Boolean?                @default(false)
  certificate_number                                        String?                 @db.VarChar(100)
  certificate_issued_date                                   DateTime?               @db.Date
  certificate_expiry_date                                   DateTime?               @db.Date
  recertification_required                                  Boolean?                @default(false)
  recertification_frequency_months                          Int?
  training_cost                                             Decimal?                @db.Decimal(12, 2)
  paid_by                                                   paid_by?
  budget_code                                               String?                 @db.VarChar(50)
  invoice_number                                            String?                 @db.VarChar(100)
  driver_feedback                                           String?
  driver_rating                                             Decimal?                @db.Decimal(3, 2)
  feedback_submitted_at                                     DateTime?               @db.Timestamptz(6)
  adm_members_rid_driver_training_created_byToadm_members   adm_members?            @relation("rid_driver_training_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_rid_driver_training_deleted_byToadm_members   adm_members?            @relation("rid_driver_training_deleted_byToadm_members", fields: [deleted_by], references: [id])
  rid_drivers                                               rid_drivers             @relation(fields: [driver_id], references: [id], onDelete: Cascade)
  adm_members_rid_driver_training_evaluated_byToadm_members adm_members?            @relation("rid_driver_training_evaluated_byToadm_members", fields: [evaluated_by], references: [id], onUpdate: NoAction)
  adm_provider_employees                                    adm_provider_employees? @relation(fields: [provider_id], references: [id], onUpdate: NoAction)
  adm_tenants                                               adm_tenants             @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_rid_driver_training_updated_byToadm_members   adm_members?            @relation("rid_driver_training_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([due_at])
  @@index([metadata], map: "rid_driver_training_metadata_gin", type: Gin)
  @@index([tenant_id])
  @@index([training_name])
  @@index([updated_by])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model rid_drivers {
  id                                                                           String                         @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                                    String                         @db.Uuid
  first_name                                                                   String
  last_name                                                                    String
  email                                                                        String
  phone                                                                        String
  license_number                                                               String
  license_issue_date                                                           DateTime?                      @db.Date
  license_expiry_date                                                          DateTime?                      @db.Date
  professional_card_no                                                         String?
  professional_expiry                                                          DateTime?                      @db.Date
  created_at                                                                   DateTime                       @default(now()) @db.Timestamptz(6)
  updated_at                                                                   DateTime                       @default(now()) @db.Timestamptz(6)
  deleted_at                                                                   DateTime?                      @db.Timestamptz(6)
  rating                                                                       Decimal?                       @db.Decimal
  notes                                                                        String?
  date_of_birth                                                                DateTime?                      @db.Date
  gender                                                                       String?
  nationality                                                                  String?                        @db.Char(2)
  hire_date                                                                    DateTime?                      @db.Date
  employment_status                                                            String                         @default("active")
  cooperation_type                                                             cooperation_type?
  emergency_contact_name                                                       String?
  emergency_contact_phone                                                      String?
  place_of_birth                                                               String?                        @db.VarChar(100)
  emirates_id                                                                  String?                        @db.VarChar(50)
  emirates_id_expiry                                                           DateTime?                      @db.Date
  preferred_name                                                               String?                        @db.VarChar(100)
  secondary_phone                                                              String?                        @db.VarChar(20)
  emergency_contact_relation                                                   String?                        @db.VarChar(50)
  address_line1                                                                String?
  address_line2                                                                String?
  city                                                                         String?                        @db.VarChar(100)
  state                                                                        String?                        @db.VarChar(100)
  postal_code                                                                  String?                        @db.VarChar(20)
  country_code                                                                 String?                        @db.Char(2)
  bank_name                                                                    String?                        @db.VarChar(100)
  bank_account_number                                                          String?                        @db.VarChar(50)
  bank_iban                                                                    String?                        @db.VarChar(34)
  bank_swift_code                                                              String?                        @db.VarChar(11)
  preferred_payment_method                                                     preferred_payment_method?
  wps_eligible                                                                 Boolean?                       @default(false)
  driver_status                                                                driver_status?                 @default(active)
  onboarded_at                                                                 DateTime?                      @db.Timestamptz(6)
  last_active_at                                                               DateTime?                      @db.Timestamptz(6)
  total_trips_completed                                                        Int?                           @default(0)
  lifetime_earnings                                                            Decimal?                       @default(0) @db.Decimal(18, 2)
  suspension_reason                                                            String?
  suspension_start_date                                                        DateTime?                      @db.Date
  suspension_end_date                                                          DateTime?                      @db.Date
  termination_reason                                                           String?
  termination_date                                                             DateTime?                      @db.Date
  rehire_eligible                                                              Boolean?                       @default(true)
  photo_url                                                                    String?
  photo_verified_at                                                            DateTime?                      @db.Timestamptz(6)
  photo_verified_by                                                            String?                        @db.Uuid
  average_rating                                                               Decimal?                       @db.Decimal(3, 2)
  metadata                                                                     Json?                          @default("{}")
  preferences                                                                  Json?                          @default("{}")
  created_by                                                                   String?                        @db.Uuid
  updated_by                                                                   String?                        @db.Uuid
  verified_by                                                                  String?                        @db.Uuid
  verified_at                                                                  DateTime?                      @db.Timestamptz(6)
  deleted_by                                                                   String?                        @db.Uuid
  deletion_reason                                                              String?
  fin_driver_payments                                                          fin_driver_payments[]
  fin_toll_transactions                                                        fin_toll_transactions[]
  fin_traffic_fines                                                            fin_traffic_fines[]
  flt_vehicle_assignments                                                      flt_vehicle_assignments[]
  flt_vehicle_events                                                           flt_vehicle_events[]
  flt_vehicle_expenses                                                         flt_vehicle_expenses[]
  rev_driver_revenues                                                          rev_driver_revenues[]
  rev_reconciliation_lines                                                     rev_reconciliation_lines[]
  rev_reconciliations                                                          rev_reconciliations[]
  rid_driver_blacklists                                                        rid_driver_blacklists[]
  rid_driver_cooperation_terms                                                 rid_driver_cooperation_terms[]
  rid_driver_documents                                                         rid_driver_documents[]
  rid_driver_languages                                                         rid_driver_languages[]
  rid_driver_performances                                                      rid_driver_performances[]
  rid_driver_requests                                                          rid_driver_requests[]
  rid_driver_training                                                          rid_driver_training[]
  adm_provider_employees_rid_drivers_created_byToadm_provider_employees        adm_provider_employees?        @relation("rid_drivers_created_byToadm_provider_employees", fields: [created_by], references: [id], onUpdate: NoAction, map: "rid_drivers_created_by_employee_fkey")
  adm_provider_employees_rid_drivers_deleted_byToadm_provider_employees        adm_provider_employees?        @relation("rid_drivers_deleted_byToadm_provider_employees", fields: [deleted_by], references: [id], onUpdate: NoAction, map: "rid_drivers_deleted_by_employee_fkey")
  adm_provider_employees_rid_drivers_photo_verified_byToadm_provider_employees adm_provider_employees?        @relation("rid_drivers_photo_verified_byToadm_provider_employees", fields: [photo_verified_by], references: [id], onUpdate: NoAction)
  adm_tenants                                                                  adm_tenants                    @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_provider_employees_rid_drivers_updated_byToadm_provider_employees        adm_provider_employees?        @relation("rid_drivers_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onUpdate: NoAction, map: "rid_drivers_updated_by_employee_fkey")
  adm_provider_employees_rid_drivers_verified_byToadm_provider_employees       adm_provider_employees?        @relation("rid_drivers_verified_byToadm_provider_employees", fields: [verified_by], references: [id], onUpdate: NoAction, map: "rid_drivers_verified_by_employee_fkey")
  sch_shifts_sch_shifts_driver_idTorid_drivers                                 sch_shifts[]                   @relation("sch_shifts_driver_idTorid_drivers")
  sch_shifts_sch_shifts_replacement_driver_idTorid_drivers                     sch_shifts[]                   @relation("sch_shifts_replacement_driver_idTorid_drivers")
  sup_customer_feedback                                                        sup_customer_feedback[]
  trp_trips                                                                    trp_trips[]

  @@index([metadata], map: "idx_rid_drivers_metadata", type: Gin)
  @@index([created_at(sort: Desc)])
  @@index([deleted_at])
  @@index([email])
  @@index([first_name])
  @@index([last_name])
  @@index([license_number])
  @@index([phone])
  @@index([tenant_id])
}

model sch_goal_achievements {
  id                String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  goal_id           String          @db.Uuid
  achievement_date  DateTime        @db.Timestamptz(6)
  final_value       Decimal         @db.Decimal(12, 2)
  threshold_reached goal_threshold?
  reward_granted    Boolean?        @default(false)
  reward_amount     Decimal?        @db.Decimal(10, 2)
  certificate_url   String?         @db.VarChar(500)
  notes             String?
  metadata          Json?
  created_at        DateTime?       @default(now()) @db.Timestamptz(6)
  created_by        String          @db.Uuid
  sch_goals         sch_goals       @relation(fields: [goal_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_goal_achievements_goal")

  @@index([achievement_date], map: "idx_goal_achievements_date")
  @@index([goal_id, achievement_date], map: "idx_goal_achievements_goal_date")
  @@index([reward_granted], map: "idx_goal_achievements_reward")
}

model sch_goal_types {
  id                 String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_id          String            @db.Uuid
  code               String            @db.VarChar(50)
  label              String            @db.VarChar(255)
  category           goal_category
  unit               String            @db.VarChar(50)
  calculation_method String?
  data_source_table  String?           @db.VarChar(100)
  data_source_field  String?           @db.VarChar(100)
  aggregation_type   aggregation_type?
  is_higher_better   Boolean?          @default(true)
  icon               String?           @db.VarChar(50)
  color              String?           @db.VarChar(20)
  metadata           Json?
  created_at         DateTime          @default(now()) @db.Timestamptz(6)
  updated_at         DateTime          @default(now()) @db.Timestamptz(6)
  created_by         String            @db.Uuid
  updated_by         String?           @db.Uuid
  deleted_at         DateTime?         @db.Timestamptz(6)
  deleted_by         String?           @db.Uuid
  deletion_reason    String?
  adm_tenants        adm_tenants       @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_goal_types_tenant")
  sch_goals          sch_goals[]

  @@index([category], map: "idx_goal_types_category")
  @@index([deleted_at], map: "idx_goal_types_deleted")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sch_goals {
  id                                            String                  @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                     String                  @db.Uuid
  goal_type                                     String
  target_value                                  Decimal                 @db.Decimal
  period_start                                  DateTime                @db.Date
  period_end                                    DateTime                @db.Date
  assigned_to                                   String                  @db.Uuid
  metadata                                      Json                    @default("{}")
  created_at                                    DateTime                @default(now()) @db.Timestamptz(6)
  created_by                                    String?                 @db.Uuid
  updated_at                                    DateTime                @default(now()) @db.Timestamptz(6)
  updated_by                                    String?                 @db.Uuid
  deleted_at                                    DateTime?               @db.Timestamptz(6)
  deleted_by                                    String?                 @db.Uuid
  deletion_reason                               String?
  goal_type_id                                  String?                 @db.Uuid
  goal_category                                 goal_category?
  target_type                                   goal_target_type?
  target_entity_type                            String?                 @db.VarChar(50)
  target_entity_id                              String?                 @db.Uuid
  period_type                                   goal_period_type?
  recurrence_pattern                            String?                 @db.VarChar(100)
  current_value                                 Decimal?                @default(0) @db.Decimal(12, 2)
  progress_percent                              Decimal?                @db.Decimal(5, 2)
  unit                                          String?                 @db.VarChar(50)
  weight                                        Decimal?                @default(1.0) @db.Decimal(5, 2)
  reward_type                                   goal_reward_type?
  reward_amount                                 Decimal?                @db.Decimal(10, 2)
  threshold_bronze                              Decimal?                @db.Decimal(12, 2)
  threshold_silver                              Decimal?                @db.Decimal(12, 2)
  threshold_gold                                Decimal?                @db.Decimal(12, 2)
  achievement_date                              DateTime?               @db.Timestamptz(6)
  last_calculated_at                            DateTime?               @db.Timestamptz(6)
  last_notified_at                              DateTime?               @db.Timestamptz(6)
  notification_frequency_days                   Int?
  status                                        goal_status?            @default(active)
  notes                                         String?
  sch_goal_achievements                         sch_goal_achievements[]
  sch_goal_types                                sch_goal_types?         @relation(fields: [goal_type_id], references: [id], onUpdate: NoAction, map: "fk_goals_goal_type")
  adm_tenants                                   adm_tenants             @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_goals_tenant")
  adm_members_sch_goals_created_byToadm_members adm_members?            @relation("sch_goals_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_sch_goals_deleted_byToadm_members adm_members?            @relation("sch_goals_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_members_sch_goals_updated_byToadm_members adm_members?            @relation("sch_goals_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([achievement_date], map: "idx_goals_achievement_date")
  @@index([progress_percent, status], map: "idx_goals_progress_status")
  @@index([status, deleted_at], map: "idx_goals_status_deleted")
  @@index([target_entity_type, target_entity_id, status], map: "idx_goals_target_entity_status")
  @@index([assigned_to])
  @@index([created_by])
  @@index([deleted_at])
  @@index([goal_type])
  @@index([metadata], map: "sch_goals_metadata_gin", type: Gin)
  @@index([period_end])
  @@index([period_start])
  @@index([tenant_id])
  @@index([updated_by])
}

model sch_locations {
  id              String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_id       String       @db.Uuid
  name            String       @db.VarChar(255)
  code            String       @db.VarChar(50)
  polygon         Json?
  city            String?      @db.VarChar(100)
  country         String?      @db.VarChar(100)
  description     String?
  is_active       Boolean?     @default(true)
  metadata        Json?
  created_at      DateTime     @default(now()) @db.Timestamptz(6)
  updated_at      DateTime     @default(now()) @db.Timestamptz(6)
  created_by      String       @db.Uuid
  updated_by      String?      @db.Uuid
  deleted_at      DateTime?    @db.Timestamptz(6)
  deleted_by      String?      @db.Uuid
  deletion_reason String?
  adm_tenants     adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_locations_tenant")
  sch_shifts      sch_shifts[]

  @@index([is_active, deleted_at], map: "idx_locations_active_deleted")
  @@index([city, country], map: "idx_locations_city_country")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sch_maintenance_schedules {
  id                                                              String                      @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                       String                      @db.Uuid
  vehicle_id                                                      String                      @db.Uuid
  scheduled_date                                                  DateTime                    @db.Date
  maintenance_type                                                String
  metadata                                                        Json                        @default("{}")
  created_at                                                      DateTime                    @default(now()) @db.Timestamptz(6)
  created_by                                                      String?                     @db.Uuid
  updated_at                                                      DateTime                    @default(now()) @db.Timestamptz(6)
  updated_by                                                      String?                     @db.Uuid
  deleted_at                                                      DateTime?                   @db.Timestamptz(6)
  deleted_by                                                      String?                     @db.Uuid
  deletion_reason                                                 String?
  maintenance_type_id                                             String?                     @db.Uuid
  scheduled_by                                                    String?                     @db.Uuid
  estimated_duration_hours                                        Decimal?                    @db.Decimal(5, 2)
  estimated_cost                                                  Decimal?                    @db.Decimal(10, 2)
  odometer_reading                                                Int?
  trigger_type                                                    maintenance_trigger_type?
  reminder_sent_at                                                DateTime?                   @db.Timestamptz(6)
  reminder_count                                                  Int?                        @default(0)
  completed_maintenance_id                                        String?                     @db.Uuid
  rescheduled_from                                                String?                     @db.Uuid
  rescheduled_reason                                              String?
  blocking_operations                                             Boolean?                    @default(false)
  required_parts                                                  Json?
  assigned_garage                                                 String?                     @db.VarChar(255)
  garage_contact                                                  String?                     @db.VarChar(255)
  notes                                                           String?
  status                                                          maintenance_status?         @default(scheduled)
  flt_vehicle_maintenance                                         flt_vehicle_maintenance?    @relation(fields: [completed_maintenance_id], references: [id], onUpdate: NoAction, map: "fk_maintenance_schedules_completed_maintenance")
  dir_maintenance_types                                           dir_maintenance_types?      @relation(fields: [maintenance_type_id], references: [id], onUpdate: NoAction, map: "fk_maintenance_schedules_maintenance_type")
  sch_maintenance_schedules                                       sch_maintenance_schedules?  @relation("sch_maintenance_schedulesTosch_maintenance_schedules", fields: [rescheduled_from], references: [id], onUpdate: NoAction, map: "fk_maintenance_schedules_rescheduled_from")
  other_sch_maintenance_schedules                                 sch_maintenance_schedules[] @relation("sch_maintenance_schedulesTosch_maintenance_schedules")
  adm_members_sch_maintenance_schedules_scheduled_byToadm_members adm_members?                @relation("sch_maintenance_schedules_scheduled_byToadm_members", fields: [scheduled_by], references: [id], onUpdate: NoAction, map: "fk_maintenance_schedules_scheduled_by")
  adm_tenants                                                     adm_tenants                 @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_maintenance_schedules_tenant")
  flt_vehicles                                                    flt_vehicles                @relation(fields: [vehicle_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_maintenance_schedules_vehicle")
  adm_members_sch_maintenance_schedules_created_byToadm_members   adm_members?                @relation("sch_maintenance_schedules_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_sch_maintenance_schedules_deleted_byToadm_members   adm_members?                @relation("sch_maintenance_schedules_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_members_sch_maintenance_schedules_updated_byToadm_members   adm_members?                @relation("sch_maintenance_schedules_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([odometer_reading], map: "idx_maintenance_schedules_odometer")
  @@index([reminder_sent_at], map: "idx_maintenance_schedules_reminder_sent")
  @@index([status, deleted_at], map: "idx_maintenance_schedules_status_deleted")
  @@index([vehicle_id, scheduled_date, status], map: "idx_maintenance_schedules_vehicle_date_status")
  @@index([created_by])
  @@index([deleted_at])
  @@index([maintenance_type])
  @@index([metadata], map: "sch_maintenance_schedules_metadata_gin", type: Gin)
  @@index([scheduled_date])
  @@index([tenant_id])
  @@index([updated_by])
  @@index([vehicle_id])
}

model sch_shift_types {
  id              String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_id       String       @db.Uuid
  code            String       @db.VarChar(50)
  label           String       @db.VarChar(255)
  pay_multiplier  Decimal      @db.Decimal(4, 2)
  color_code      String?      @db.VarChar(20)
  is_active       Boolean?     @default(true)
  metadata        Json?
  created_at      DateTime     @default(now()) @db.Timestamptz(6)
  updated_at      DateTime     @default(now()) @db.Timestamptz(6)
  created_by      String       @db.Uuid
  updated_by      String?      @db.Uuid
  deleted_at      DateTime?    @db.Timestamptz(6)
  deleted_by      String?      @db.Uuid
  deletion_reason String?
  adm_tenants     adm_tenants  @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_shift_types_tenant")
  sch_shifts      sch_shifts[]

  @@index([is_active, deleted_at], map: "idx_shift_types_active_deleted")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sch_shifts {
  id                                                        String           @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                 String           @db.Uuid
  driver_id                                                 String           @db.Uuid
  start_time                                                DateTime         @db.Timestamptz(6)
  end_time                                                  DateTime         @db.Timestamptz(6)
  metadata                                                  Json             @default("{}")
  created_at                                                DateTime         @default(now()) @db.Timestamptz(6)
  created_by                                                String?          @db.Uuid
  updated_at                                                DateTime         @default(now()) @db.Timestamptz(6)
  updated_by                                                String?          @db.Uuid
  deleted_at                                                DateTime?        @db.Timestamptz(6)
  deleted_by                                                String?          @db.Uuid
  deletion_reason                                           String?
  shift_type_id                                             String?          @db.Uuid
  shift_category                                            String?          @db.VarChar(50)
  location_id                                               String?          @db.Uuid
  zone_name                                                 String?          @db.VarChar(255)
  check_in_at                                               DateTime?        @db.Timestamptz(6)
  check_out_at                                              DateTime?        @db.Timestamptz(6)
  break_duration_minutes                                    Int?
  actual_work_minutes                                       Int?
  pay_multiplier                                            Decimal?         @db.Decimal(4, 2)
  status                                                    shift_status?
  approved_by                                               String?          @db.Uuid
  approved_at                                               DateTime?        @db.Timestamptz(6)
  cancellation_reason                                       String?          @db.VarChar(255)
  replacement_driver_id                                     String?          @db.Uuid
  adm_members_sch_shifts_approved_byToadm_members           adm_members?     @relation("sch_shifts_approved_byToadm_members", fields: [approved_by], references: [id], onUpdate: NoAction, map: "fk_shifts_approved_by")
  rid_drivers_sch_shifts_driver_idTorid_drivers             rid_drivers      @relation("sch_shifts_driver_idTorid_drivers", fields: [driver_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_shifts_driver")
  sch_locations                                             sch_locations?   @relation(fields: [location_id], references: [id], onUpdate: NoAction, map: "fk_shifts_location")
  rid_drivers_sch_shifts_replacement_driver_idTorid_drivers rid_drivers?     @relation("sch_shifts_replacement_driver_idTorid_drivers", fields: [replacement_driver_id], references: [id], onUpdate: NoAction, map: "fk_shifts_replacement_driver")
  sch_shift_types                                           sch_shift_types? @relation(fields: [shift_type_id], references: [id], onUpdate: NoAction, map: "fk_shifts_shift_type")
  adm_tenants                                               adm_tenants      @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_shifts_tenant")
  adm_members_sch_shifts_created_byToadm_members            adm_members?     @relation("sch_shifts_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_sch_shifts_deleted_byToadm_members            adm_members?     @relation("sch_shifts_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_members_sch_shifts_updated_byToadm_members            adm_members?     @relation("sch_shifts_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([start_time(sort: Desc)], map: "idx_sch_shifts_start_time")
  @@index([check_in_at], map: "idx_shifts_checkin")
  @@index([check_out_at], map: "idx_shifts_checkout")
  @@index([driver_id, check_in_at], map: "idx_shifts_driver_checkin")
  @@index([shift_type_id, location_id], map: "idx_shifts_shift_type_location")
  @@index([status, deleted_at], map: "idx_shifts_status_deleted")
  @@index([created_by])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([end_time])
  @@index([metadata], map: "sch_shifts_metadata_gin", type: Gin)
  @@index([start_time])
  @@index([tenant_id])
  @@index([updated_by])
}

model sch_task_comments {
  id           String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  task_id      String            @db.Uuid
  comment_type task_comment_type
  author_id    String            @db.Uuid
  comment_text String
  attachments  Json?
  is_internal  Boolean?          @default(false)
  metadata     Json?
  created_at   DateTime?         @default(now()) @db.Timestamptz(6)
  adm_members  adm_members       @relation(fields: [author_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_task_comments_author")
  sch_tasks    sch_tasks         @relation(fields: [task_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_task_comments_task")

  @@index([author_id], map: "idx_task_comments_author")
  @@index([task_id, created_at], map: "idx_task_comments_task_created")
  @@index([comment_type], map: "idx_task_comments_type")
}

model sch_task_history {
  id            String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  task_id       String           @db.Uuid
  changed_by    String           @db.Uuid
  change_type   task_change_type
  old_values    Json?
  new_values    Json?
  change_reason String?
  metadata      Json?
  created_at    DateTime?        @default(now()) @db.Timestamptz(6)
  adm_members   adm_members      @relation(fields: [changed_by], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_task_history_changed_by")
  sch_tasks     sch_tasks        @relation(fields: [task_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_task_history_task")

  @@index([change_type], map: "idx_task_history_change_type")
  @@index([changed_by], map: "idx_task_history_changed_by")
  @@index([task_id, created_at], map: "idx_task_history_task_created")
}

model sch_task_types {
  id                       String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_id                String         @db.Uuid
  code                     String         @db.VarChar(50)
  label                    String         @db.VarChar(255)
  category                 task_category
  default_priority         task_priority?
  default_duration_minutes Int?
  requires_verification    Boolean?       @default(false)
  default_checklist        Json?
  auto_assignment_rule     Json?
  sla_hours                Int?
  escalation_hours         Int?
  description_template     String?
  metadata                 Json?
  created_at               DateTime       @default(now()) @db.Timestamptz(6)
  updated_at               DateTime       @default(now()) @db.Timestamptz(6)
  created_by               String         @db.Uuid
  updated_by               String?        @db.Uuid
  deleted_at               DateTime?      @db.Timestamptz(6)
  deleted_by               String?        @db.Uuid
  deletion_reason          String?
  adm_tenants              adm_tenants    @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_task_types_tenant")
  sch_tasks                sch_tasks[]

  @@index([category, default_priority], map: "idx_task_types_category_priority")
  @@index([deleted_at], map: "idx_task_types_deleted")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sch_tasks {
  id                                              String              @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                       String              @db.Uuid
  task_type                                       String
  description                                     String
  target_id                                       String              @db.Uuid
  due_at                                          DateTime?           @db.Timestamptz(6)
  metadata                                        Json                @default("{}")
  created_at                                      DateTime            @default(now()) @db.Timestamptz(6)
  created_by                                      String?             @db.Uuid
  updated_at                                      DateTime            @default(now()) @db.Timestamptz(6)
  updated_by                                      String?             @db.Uuid
  deleted_at                                      DateTime?           @db.Timestamptz(6)
  deleted_by                                      String?             @db.Uuid
  deletion_reason                                 String?
  task_type_id                                    String?             @db.Uuid
  task_category                                   task_category?
  title                                           String?             @db.VarChar(255)
  priority                                        task_priority?      @default(normal)
  assigned_to                                     String?             @db.Uuid
  assigned_at                                     DateTime?           @db.Timestamptz(6)
  assigned_by                                     String?             @db.Uuid
  target_type                                     String?             @db.VarChar(50)
  related_entity_type                             String?             @db.VarChar(50)
  related_entity_id                               String?             @db.Uuid
  estimated_duration_minutes                      Int?
  actual_duration_minutes                         Int?
  start_date                                      DateTime?           @db.Date
  due_date                                        DateTime?           @db.Date
  completed_at                                    DateTime?           @db.Timestamptz(6)
  completed_by                                    String?             @db.Uuid
  verification_required                           Boolean?            @default(false)
  verified_by                                     String?             @db.Uuid
  verified_at                                     DateTime?           @db.Timestamptz(6)
  is_auto_generated                               Boolean?            @default(false)
  generation_trigger                              String?             @db.VarChar(100)
  recurrence_pattern                              String?             @db.VarChar(100)
  parent_task_id                                  String?             @db.Uuid
  blocking_tasks                                  String[]            @db.Uuid
  checklist                                       Json?
  attachments                                     Json?
  reminder_sent_at                                DateTime?           @db.Timestamptz(6)
  reminder_frequency_days                         Int?
  escalation_level                                Int?                @default(0)
  escalated_to                                    String?             @db.Uuid
  tags                                            String[]
  status                                          task_status?        @default(pending)
  sch_task_comments                               sch_task_comments[]
  sch_task_history                                sch_task_history[]
  adm_members_sch_tasks_assigned_byToadm_members  adm_members?        @relation("sch_tasks_assigned_byToadm_members", fields: [assigned_by], references: [id], onUpdate: NoAction, map: "fk_tasks_assigned_by")
  adm_members_sch_tasks_assigned_toToadm_members  adm_members?        @relation("sch_tasks_assigned_toToadm_members", fields: [assigned_to], references: [id], onUpdate: NoAction, map: "fk_tasks_assigned_to")
  adm_members_sch_tasks_completed_byToadm_members adm_members?        @relation("sch_tasks_completed_byToadm_members", fields: [completed_by], references: [id], onUpdate: NoAction, map: "fk_tasks_completed_by")
  adm_members_sch_tasks_escalated_toToadm_members adm_members?        @relation("sch_tasks_escalated_toToadm_members", fields: [escalated_to], references: [id], onUpdate: NoAction, map: "fk_tasks_escalated_to")
  sch_tasks                                       sch_tasks?          @relation("sch_tasksTosch_tasks", fields: [parent_task_id], references: [id], onUpdate: NoAction, map: "fk_tasks_parent_task")
  other_sch_tasks                                 sch_tasks[]         @relation("sch_tasksTosch_tasks")
  sch_task_types                                  sch_task_types?     @relation(fields: [task_type_id], references: [id], onUpdate: NoAction, map: "fk_tasks_task_type")
  adm_tenants                                     adm_tenants         @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_tasks_tenant")
  adm_members_sch_tasks_verified_byToadm_members  adm_members?        @relation("sch_tasks_verified_byToadm_members", fields: [verified_by], references: [id], onUpdate: NoAction, map: "fk_tasks_verified_by")
  adm_members_sch_tasks_created_byToadm_members   adm_members?        @relation("sch_tasks_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_sch_tasks_deleted_byToadm_members   adm_members?        @relation("sch_tasks_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_members_sch_tasks_updated_byToadm_members   adm_members?        @relation("sch_tasks_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_by], map: "idx_sch_tasks_created_by")
  @@index([deleted_at], map: "idx_sch_tasks_deleted_at")
  @@index([due_at], map: "idx_sch_tasks_due_at")
  @@index([metadata], map: "idx_sch_tasks_metadata", type: Gin)
  @@index([target_id], map: "idx_sch_tasks_target_id")
  @@index([tenant_id], map: "idx_sch_tasks_tenant_id")
  @@index([updated_by], map: "idx_sch_tasks_updated_by")
  @@index([assigned_to, status, due_date], map: "idx_tasks_assigned_status_due")
  @@index([is_auto_generated, generation_trigger], map: "idx_tasks_auto_generated")
  @@index([task_category, priority], map: "idx_tasks_category_priority")
  @@index([status, deleted_at], map: "idx_tasks_status_deleted")
  @@index([tags], map: "idx_tasks_tags", type: Gin)
  @@index([target_type, target_id, status], map: "idx_tasks_target")
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sup_canned_responses {
  id                     String                 @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_id              String                 @db.Uuid
  title                  String                 @db.VarChar(255)
  content                String
  category               String?                @db.VarChar(100)
  language               String                 @db.VarChar(10)
  usage_count            Int                    @default(0)
  last_used_at           DateTime?              @db.Timestamptz(6)
  is_active              Boolean                @default(true)
  created_at             DateTime               @default(now()) @db.Timestamptz(6)
  updated_at             DateTime               @default(now()) @db.Timestamptz(6)
  created_by             String                 @db.Uuid
  adm_provider_employees adm_provider_employees @relation(fields: [created_by], references: [id], onUpdate: NoAction, map: "fk_sup_responses_creator")
  adm_tenants            adm_tenants            @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_sup_responses_tenant")

  @@index([language], map: "idx_sup_responses_language")
  @@index([usage_count], map: "idx_sup_responses_popularity")
  @@index([tenant_id, category, is_active], map: "idx_sup_responses_tenant")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sup_customer_feedback {
  id                           String          @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                    String          @db.Uuid
  submitted_by                 String          @db.Uuid
  feedback_text                String
  rating                       Int
  metadata                     Json?           @default("{}")
  created_by                   String?         @db.Uuid
  created_at                   DateTime        @default(now()) @db.Timestamptz(6)
  updated_by                   String?         @db.Uuid
  updated_at                   DateTime        @default(now()) @db.Timestamptz(6)
  deleted_by                   String?         @db.Uuid
  deleted_at                   DateTime?       @db.Timestamptz(6)
  ticket_id                    String?         @db.Uuid
  driver_id                    String?         @db.Uuid
  service_type                 service_type?   @default(other)
  language                     String?         @db.VarChar(10)
  sentiment_score              Float?
  is_anonymous                 Boolean?        @default(false)
  category                     String?         @db.VarChar(100)
  tags                         String[]        @default([])
  overall_rating               Int?
  response_time_rating         Int?
  resolution_quality_rating    Int?
  agent_professionalism_rating Int?
  submitter_type               submitter_type?
  rid_drivers                  rid_drivers?    @relation(fields: [driver_id], references: [id], map: "fk_sup_feedback_driver")
  sup_tickets                  sup_tickets?    @relation(fields: [ticket_id], references: [id], onUpdate: NoAction, map: "fk_sup_feedback_ticket")
  adm_tenants                  adm_tenants     @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([metadata], type: Gin)
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sup_ticket_categories {
  id                                                                              String                  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_id                                                                       String                  @db.Uuid
  name                                                                            String                  @db.VarChar(100)
  slug                                                                            String                  @db.VarChar(100)
  description                                                                     String?
  parent_category_id                                                              String?                 @db.Uuid
  default_priority                                                                ticket_priority?
  default_assigned_team                                                           String?                 @db.VarChar(100)
  sla_hours                                                                       Int?
  is_active                                                                       Boolean                 @default(true)
  display_order                                                                   Int                     @default(0)
  created_at                                                                      DateTime                @default(now()) @db.Timestamptz(6)
  updated_at                                                                      DateTime                @default(now()) @db.Timestamptz(6)
  created_by                                                                      String                  @db.Uuid
  updated_by                                                                      String?                 @db.Uuid
  adm_provider_employees_sup_ticket_categories_created_byToadm_provider_employees adm_provider_employees  @relation("sup_ticket_categories_created_byToadm_provider_employees", fields: [created_by], references: [id], onUpdate: NoAction, map: "fk_sup_categories_creator")
  sup_ticket_categories                                                           sup_ticket_categories?  @relation("sup_ticket_categoriesTosup_ticket_categories", fields: [parent_category_id], references: [id], onUpdate: NoAction, map: "fk_sup_categories_parent")
  other_sup_ticket_categories                                                     sup_ticket_categories[] @relation("sup_ticket_categoriesTosup_ticket_categories")
  adm_tenants                                                                     adm_tenants             @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_sup_categories_tenant")
  adm_provider_employees_sup_ticket_categories_updated_byToadm_provider_employees adm_provider_employees? @relation("sup_ticket_categories_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onUpdate: NoAction, map: "fk_sup_categories_updater")
  sup_ticket_sla_rules                                                            sup_ticket_sla_rules[]

  @@unique([tenant_id, slug], map: "uq_sup_categories_tenant_slug")
  @@index([display_order], map: "idx_sup_categories_order")
  @@index([parent_category_id], map: "idx_sup_categories_parent")
  @@index([tenant_id, is_active], map: "idx_sup_categories_tenant")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sup_ticket_messages {
  id                                                      String                @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  ticket_id                                               String                @db.Uuid
  sender_id                                               String                @db.Uuid
  message_body                                            String
  sent_at                                                 DateTime              @default(now()) @db.Timestamptz(6)
  metadata                                                Json                  @default("{}")
  created_at                                              DateTime              @default(now()) @db.Timestamptz(6)
  created_by                                              String?               @db.Uuid
  updated_at                                              DateTime              @default(now()) @db.Timestamptz(6)
  updated_by                                              String?               @db.Uuid
  deleted_at                                              DateTime?             @db.Timestamptz(6)
  deleted_by                                              String?               @db.Uuid
  deletion_reason                                         String?
  message_type                                            message_type?         @default(public)
  parent_message_id                                       String?               @db.Uuid
  attachment_url                                          String?
  attachment_type                                         String?               @db.VarChar(50)
  language                                                String?               @db.VarChar(10)
  sentiment_score                                         Float?
  is_automated                                            Boolean?              @default(false)
  ai_suggestions                                          Json?
  translation                                             Json?
  sup_ticket_messages                                     sup_ticket_messages?  @relation("sup_ticket_messagesTosup_ticket_messages", fields: [parent_message_id], references: [id], onUpdate: NoAction, map: "fk_sup_messages_parent")
  other_sup_ticket_messages                               sup_ticket_messages[] @relation("sup_ticket_messagesTosup_ticket_messages")
  adm_members_sup_ticket_messages_created_byToadm_members adm_members?          @relation("sup_ticket_messages_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_sup_ticket_messages_deleted_byToadm_members adm_members?          @relation("sup_ticket_messages_deleted_byToadm_members", fields: [deleted_by], references: [id])
  sup_tickets                                             sup_tickets           @relation(fields: [ticket_id], references: [id], onDelete: Cascade)
  adm_members_sup_ticket_messages_updated_byToadm_members adm_members?          @relation("sup_ticket_messages_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([created_by])
  @@index([deleted_at])
  @@index([metadata], type: Gin)
  @@index([sent_at])
  @@index([ticket_id])
  @@index([updated_by])
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model sup_ticket_sla_rules {
  id                                                                             String                  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  tenant_id                                                                      String                  @db.Uuid
  category_id                                                                    String?                 @db.Uuid
  priority                                                                       ticket_priority
  response_time_hours                                                            Int
  resolution_time_hours                                                          Int
  escalation_rules                                                               Json?
  business_hours_only                                                            Boolean                 @default(false)
  is_active                                                                      Boolean                 @default(true)
  created_at                                                                     DateTime                @default(now()) @db.Timestamptz(6)
  updated_at                                                                     DateTime                @default(now()) @db.Timestamptz(6)
  created_by                                                                     String                  @db.Uuid
  updated_by                                                                     String?                 @db.Uuid
  sup_ticket_categories                                                          sup_ticket_categories?  @relation(fields: [category_id], references: [id], onUpdate: NoAction, map: "fk_sup_sla_category")
  adm_provider_employees_sup_ticket_sla_rules_created_byToadm_provider_employees adm_provider_employees  @relation("sup_ticket_sla_rules_created_byToadm_provider_employees", fields: [created_by], references: [id], onUpdate: NoAction, map: "fk_sup_sla_creator")
  adm_tenants                                                                    adm_tenants             @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_sup_sla_tenant")
  adm_provider_employees_sup_ticket_sla_rules_updated_byToadm_provider_employees adm_provider_employees? @relation("sup_ticket_sla_rules_updated_byToadm_provider_employees", fields: [updated_by], references: [id], onUpdate: NoAction, map: "fk_sup_sla_updater")

  @@unique([tenant_id, category_id, priority], map: "uq_sup_sla_tenant_category_priority")
  @@index([category_id], map: "idx_sup_sla_category")
  @@index([priority], map: "idx_sup_sla_priority")
  @@index([tenant_id, is_active], map: "idx_sup_sla_tenant")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sup_tickets {
  id                                              String                  @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                       String                  @db.Uuid
  raised_by                                       String                  @db.Uuid
  subject                                         String
  description                                     String
  assigned_to                                     String?                 @db.Uuid
  metadata                                        Json                    @default("{}")
  created_at                                      DateTime                @default(now()) @db.Timestamptz(6)
  created_by                                      String?                 @db.Uuid
  updated_at                                      DateTime                @default(now()) @db.Timestamptz(6)
  updated_by                                      String?                 @db.Uuid
  deleted_at                                      DateTime?               @db.Timestamptz(6)
  deleted_by                                      String?                 @db.Uuid
  deletion_reason                                 String?
  category                                        String?                 @db.VarChar(100)
  sub_category                                    String?                 @db.VarChar(100)
  language                                        String?                 @db.VarChar(10)
  source_platform                                 ticket_source_platform? @default(web)
  raised_by_type                                  ticket_raised_by_type?  @default(admin)
  attachments_url                                 String[]                @default([])
  resolution_notes                                String?
  sla_due_at                                      DateTime?               @db.Timestamptz(6)
  closed_at                                       DateTime?               @db.Timestamptz(6)
  status                                          ticket_status?          @default(new)
  priority                                        ticket_priority?        @default(medium)
  sup_customer_feedback                           sup_customer_feedback[]
  sup_ticket_messages                             sup_ticket_messages[]
  adm_members_sup_tickets_raised_byToadm_members  adm_members             @relation("sup_tickets_raised_byToadm_members", fields: [raised_by], references: [id], onUpdate: NoAction, map: "fk_sup_tickets_member")
  adm_provider_employees                          adm_provider_employees? @relation(fields: [assigned_to], references: [id])
  adm_members_sup_tickets_created_byToadm_members adm_members?            @relation("sup_tickets_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_sup_tickets_deleted_byToadm_members adm_members?            @relation("sup_tickets_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_tenants                                     adm_tenants             @relation(fields: [tenant_id], references: [id], onDelete: Cascade)
  adm_members_sup_tickets_updated_byToadm_members adm_members?            @relation("sup_tickets_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([assigned_to])
  @@index([created_at])
  @@index([created_by])
  @@index([deleted_at])
  @@index([metadata], type: Gin)
  @@index([raised_by])
  @@index([tenant_id])
  @@index([updated_by])
}

model trp_client_invoice_lines {
  id                  String              @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  invoice_id          String              @db.Uuid
  line_number         Int
  description         String
  trip_id             String?             @db.Uuid
  quantity            Decimal             @db.Decimal(10, 2)
  unit_price          Decimal             @db.Decimal(14, 2)
  tax_rate            Decimal?            @db.Decimal(5, 2)
  line_amount         Decimal             @db.Decimal(14, 2)
  metadata            Json?
  created_at          DateTime?           @default(now()) @db.Timestamptz(6)
  trp_client_invoices trp_client_invoices @relation(fields: [invoice_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_client_invoice_lines_invoice")
  trp_trips           trp_trips?          @relation(fields: [trip_id], references: [id], onUpdate: NoAction, map: "fk_client_invoice_lines_trip")

  @@index([invoice_id, line_number], map: "idx_client_invoice_lines_invoice_line")
  @@index([trip_id], map: "idx_client_invoice_lines_trip")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model trp_client_invoices {
  id                                                      String                     @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                               String                     @db.Uuid
  client_id                                               String                     @db.Uuid
  invoice_number                                          String
  invoice_date                                            DateTime                   @db.Date
  due_date                                                DateTime                   @db.Date
  total_amount                                            Decimal                    @db.Decimal(14, 2)
  currency                                                String                     @db.VarChar(3)
  metadata                                                Json                       @default("{}")
  created_at                                              DateTime                   @default(now()) @db.Timestamptz(6)
  created_by                                              String?                    @db.Uuid
  updated_at                                              DateTime                   @default(now()) @db.Timestamptz(6)
  updated_by                                              String?                    @db.Uuid
  deleted_at                                              DateTime?                  @db.Timestamptz(6)
  deleted_by                                              String?                    @db.Uuid
  deletion_reason                                         String?
  pricing_plan_id                                         String?                    @db.Uuid
  client_po_number                                        String?                    @db.VarChar(100)
  discount_amount                                         Decimal?                   @db.Decimal(14, 2)
  discount_reason                                         String?
  status                                                  trp_invoice_status?        @default(draft)
  paid_at                                                 DateTime?                  @db.Timestamptz(6)
  payment_reference                                       String?                    @db.VarChar(255)
  payment_method                                          trp_payment_method?
  trp_client_invoice_lines                                trp_client_invoice_lines[]
  adm_tenants                                             adm_tenants                @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_client_invoices_tenant")
  adm_members_trp_client_invoices_created_byToadm_members adm_members?               @relation("trp_client_invoices_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_trp_client_invoices_deleted_byToadm_members adm_members?               @relation("trp_client_invoices_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_members_trp_client_invoices_updated_byToadm_members adm_members?               @relation("trp_client_invoices_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([client_id, status, invoice_date], map: "idx_client_invoices_client_status_date")
  @@index([paid_at], map: "idx_client_invoices_paid_at")
  @@index([status, due_date], map: "idx_client_invoices_status_due")
  @@index([client_id], map: "idx_trp_client_invoices_client_id")
  @@index([created_by], map: "idx_trp_client_invoices_created_by")
  @@index([deleted_at], map: "idx_trp_client_invoices_deleted_at")
  @@index([due_date], map: "idx_trp_client_invoices_due_date")
  @@index([invoice_date], map: "idx_trp_client_invoices_invoice_date")
  @@index([metadata], map: "idx_trp_client_invoices_metadata", type: Gin)
  @@index([tenant_id], map: "idx_trp_client_invoices_tenant_id")
  @@index([updated_by], map: "idx_trp_client_invoices_updated_by")
}

model trp_platform_account_keys {
  id                     String                    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  account_id             String                    @db.Uuid
  key_value              String
  key_type               platform_account_key_type
  expires_at             DateTime?                 @db.Timestamptz(6)
  is_active              Boolean?                  @default(true)
  last_used_at           DateTime?                 @db.Timestamptz(6)
  created_at             DateTime?                 @default(now()) @db.Timestamptz(6)
  revoked_at             DateTime?                 @db.Timestamptz(6)
  revoked_by             String?                   @db.Uuid
  revoke_reason          String?
  trp_platform_accounts  trp_platform_accounts     @relation(fields: [account_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_platform_account_keys_account")
  adm_provider_employees adm_provider_employees?   @relation(fields: [revoked_by], references: [id], onUpdate: NoAction, map: "fk_platform_account_keys_revoked_by")

  @@index([account_id, is_active], map: "idx_platform_account_keys_account_active")
  @@index([expires_at], map: "idx_platform_account_keys_expires")
  @@index([key_type], map: "idx_platform_account_keys_type")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model trp_platform_accounts {
  id                                                        String                      @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                                 String                      @db.Uuid
  platform_id                                               String                      @db.Uuid
  account_identifier                                        String
  api_key                                                   String?
  metadata                                                  Json                        @default("{}")
  created_at                                                DateTime                    @default(now()) @db.Timestamptz(6)
  created_by                                                String?                     @db.Uuid
  updated_at                                                DateTime                    @default(now()) @db.Timestamptz(6)
  updated_by                                                String?                     @db.Uuid
  deleted_at                                                DateTime?                   @db.Timestamptz(6)
  deleted_by                                                String?                     @db.Uuid
  deletion_reason                                           String?
  account_name                                              String?                     @db.VarChar(255)
  status                                                    platform_account_status?    @default(active)
  connected_at                                              DateTime?                   @db.Timestamptz(6)
  last_sync_at                                              DateTime?                   @db.Timestamptz(6)
  last_error                                                String?
  error_count                                               Int?                        @default(0)
  sync_frequency                                            String?                     @db.VarChar(50)
  trp_platform_account_keys                                 trp_platform_account_keys[]
  dir_platforms                                             dir_platforms               @relation(fields: [platform_id], references: [id], onUpdate: NoAction, map: "fk_platform_accounts_platform")
  adm_tenants                                               adm_tenants                 @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_platform_accounts_tenant")
  adm_members_trp_platform_accounts_created_byToadm_members adm_members?                @relation("trp_platform_accounts_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_trp_platform_accounts_deleted_byToadm_members adm_members?                @relation("trp_platform_accounts_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_members_trp_platform_accounts_updated_byToadm_members adm_members?                @relation("trp_platform_accounts_updated_byToadm_members", fields: [updated_by], references: [id])
  trp_settlements                                           trp_settlements[]
  trp_trips                                                 trp_trips[]

  @@index([error_count], map: "idx_platform_accounts_error_count")
  @@index([status, last_sync_at], map: "idx_platform_accounts_status_sync")
  @@index([account_identifier], map: "idx_trp_platform_accounts_account_identifier")
  @@index([created_by], map: "idx_trp_platform_accounts_created_by")
  @@index([deleted_at], map: "idx_trp_platform_accounts_deleted_at")
  @@index([metadata], map: "idx_trp_platform_accounts_metadata", type: Gin)
  @@index([platform_id], map: "idx_trp_platform_accounts_platform_id")
  @@index([tenant_id], map: "idx_trp_platform_accounts_tenant_id")
  @@index([updated_by], map: "idx_trp_platform_accounts_updated_by")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model trp_settlements {
  id                                                  String                 @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                                           String                 @db.Uuid
  trip_id                                             String                 @db.Uuid
  settlement_reference                                String
  amount                                              Decimal                @db.Decimal(14, 2)
  currency                                            String                 @db.VarChar(3)
  platform_commission                                 Decimal                @db.Decimal(14, 2)
  net_amount                                          Decimal                @db.Decimal(14, 2)
  settlement_date                                     DateTime               @db.Date
  metadata                                            Json                   @default("{}")
  created_at                                          DateTime               @default(now()) @db.Timestamptz(6)
  created_by                                          String?                @db.Uuid
  updated_at                                          DateTime               @default(now()) @db.Timestamptz(6)
  updated_by                                          String?                @db.Uuid
  deleted_at                                          DateTime?              @db.Timestamptz(6)
  deleted_by                                          String?                @db.Uuid
  deletion_reason                                     String?
  platform_account_id                                 String?                @db.Uuid
  settlement_type                                     settlement_type?       @default(platform_payout)
  platform_settlement_id                              String?                @db.VarChar(255)
  commission                                          Decimal?               @db.Decimal(14, 2)
  tax_amount                                          Decimal?               @db.Decimal(14, 2)
  tax_rate                                            Decimal?               @db.Decimal(5, 2)
  exchange_rate                                       Decimal?               @db.Decimal(10, 6)
  original_currency                                   String?                @db.Char(3)
  original_amount                                     Decimal?               @db.Decimal(14, 2)
  status                                              settlement_status?     @default(pending)
  paid_at                                             DateTime?              @db.Timestamptz(6)
  cancelled_at                                        DateTime?              @db.Timestamptz(6)
  reconciled                                          Boolean?               @default(false)
  reconciliation_id                                   String?                @db.Uuid
  trp_platform_accounts                               trp_platform_accounts? @relation(fields: [platform_account_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_settlements_platform_account")
  adm_tenants                                         adm_tenants            @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_settlements_tenant")
  trp_trips                                           trp_trips              @relation(fields: [trip_id], references: [id], onDelete: SetNull, onUpdate: NoAction, map: "fk_settlements_trip")
  rev_reconciliations                                 rev_reconciliations?   @relation(fields: [reconciliation_id], references: [id], map: "fk_trp_settlements_reconciliation")
  adm_members_trp_settlements_created_byToadm_members adm_members?           @relation("trp_settlements_created_byToadm_members", fields: [created_by], references: [id])
  adm_members_trp_settlements_deleted_byToadm_members adm_members?           @relation("trp_settlements_deleted_byToadm_members", fields: [deleted_by], references: [id])
  adm_members_trp_settlements_updated_byToadm_members adm_members?           @relation("trp_settlements_updated_byToadm_members", fields: [updated_by], references: [id])

  @@index([reconciled], map: "idx_settlements_not_reconciled")
  @@index([platform_account_id, settlement_date], map: "idx_settlements_platform_account_date")
  @@index([platform_settlement_id], map: "idx_settlements_platform_settlement_id")
  @@index([status, paid_at], map: "idx_settlements_status_paid")
  @@index([created_by], map: "idx_trp_settlements_created_by")
  @@index([deleted_at], map: "idx_trp_settlements_deleted_at")
  @@index([metadata], map: "idx_trp_settlements_metadata", type: Gin)
  @@index([settlement_date], map: "idx_trp_settlements_settlement_date")
  @@index([tenant_id], map: "idx_trp_settlements_tenant_id")
  @@index([trip_id], map: "idx_trp_settlements_trip_id")
  @@index([updated_by], map: "idx_trp_settlements_updated_by")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model trp_trips {
  id                       String                     @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  tenant_id                String                     @db.Uuid
  driver_id                String                     @db.Uuid
  vehicle_id               String?                    @db.Uuid
  platform_id              String?                    @db.Uuid
  pickup_latitude          Decimal?                   @db.Decimal(10, 8)
  pickup_longitude         Decimal?                   @db.Decimal(11, 8)
  start_time               DateTime?                  @db.Timestamptz(6)
  dropoff_latitude         Decimal?                   @db.Decimal(10, 8)
  dropoff_longitude        Decimal?                   @db.Decimal(11, 8)
  end_time                 DateTime?                  @db.Timestamptz(6)
  distance_km              Decimal?                   @db.Decimal(10, 2)
  duration_minutes         Decimal?                   @db.Decimal
  payment_method           String?                    @db.VarChar(50)
  platform_commission      Decimal?                   @db.Decimal(10, 2)
  net_earnings             Decimal?                   @db.Decimal(10, 2)
  created_at               DateTime                   @default(now()) @db.Timestamptz(6)
  updated_at               DateTime                   @default(now()) @db.Timestamptz(6)
  deleted_at               DateTime?                  @db.Timestamptz(6)
  client_id                String?                    @db.Uuid
  trip_date                DateTime?                  @db.Date
  fare_base                Decimal?                   @db.Decimal
  fare_distance            Decimal?                   @db.Decimal
  fare_time                Decimal?                   @db.Decimal
  surge_multiplier         Decimal?                   @db.Decimal
  tip_amount               Decimal?                   @db.Decimal
  platform_account_id      String?                    @db.Uuid
  platform_trip_id         String?                    @db.VarChar(255)
  requested_at             DateTime?                  @db.Timestamptz(6)
  matched_at               DateTime?                  @db.Timestamptz(6)
  accepted_at              DateTime?                  @db.Timestamptz(6)
  arrived_at               DateTime?                  @db.Timestamptz(6)
  started_at               DateTime?                  @db.Timestamptz(6)
  finished_at              DateTime?                  @db.Timestamptz(6)
  pickup_lat               Decimal?                   @db.Decimal(10, 7)
  pickup_lng               Decimal?                   @db.Decimal(10, 7)
  dropoff_lat              Decimal?                   @db.Decimal(10, 7)
  dropoff_lng              Decimal?                   @db.Decimal(10, 7)
  distance                 Decimal?                   @db.Decimal(10, 2)
  duration                 Int?
  base_fare                Decimal?                   @db.Decimal(10, 2)
  distance_fare            Decimal?                   @db.Decimal(10, 2)
  time_fare                Decimal?                   @db.Decimal(10, 2)
  surge_amount             Decimal?                   @db.Decimal(10, 2)
  total_fare               Decimal?                   @db.Decimal(10, 2)
  currency                 String?                    @db.Char(3)
  status                   trip_status?
  metadata                 Json?
  created_by               String?                    @db.Uuid
  updated_by               String?                    @db.Uuid
  deleted_by               String?                    @db.Uuid
  deletion_reason          String?
  fin_toll_transactions    fin_toll_transactions[]
  flt_vehicle_expenses     flt_vehicle_expenses[]
  trp_client_invoice_lines trp_client_invoice_lines[]
  trp_settlements          trp_settlements[]
  rid_drivers              rid_drivers                @relation(fields: [driver_id], references: [id], onDelete: SetNull, onUpdate: NoAction, map: "fk_trips_driver")
  trp_platform_accounts    trp_platform_accounts?     @relation(fields: [platform_account_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_trips_platform_account")
  adm_tenants              adm_tenants                @relation(fields: [tenant_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_trips_tenant")
  flt_vehicles             flt_vehicles?              @relation(fields: [vehicle_id], references: [id], onUpdate: NoAction, map: "fk_trips_vehicle")
  dir_platforms            dir_platforms?             @relation(fields: [platform_id], references: [id], onDelete: Restrict)

  @@index([driver_id, status], map: "idx_trips_driver_status")
  @@index([requested_at, finished_at], map: "idx_trips_requested_finished")
  @@index([status, deleted_at], map: "idx_trips_status_deleted")
  @@index([tenant_id, status, started_at], map: "idx_trips_tenant_status_started")
  @@index([vehicle_id, started_at], map: "idx_trips_vehicle_started")
  @@index([metadata], map: "idx_trp_trips_metadata", type: Gin)
  @@index([client_id])
  @@index([created_at(sort: Desc)])
  @@index([deleted_at])
  @@index([driver_id])
  @@index([end_time])
  @@index([platform_id])
  @@index([start_time])
  @@index([tenant_id])
  @@index([trip_date])
  @@index([vehicle_id])
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model v_fk {
  count BigInt?

  @@ignore
}

enum access_level {
  private
  public
  signed
}

enum account_status {
  active
  suspended
  closed
}

enum address_type {
  billing
  shipping
}

enum aggregation_method {
  sum
  max
  avg
  last
}

enum aggregation_type {
  sum
  avg
  count
  min
  max
}

enum allocation_rule {
  driver
  fleet
  shared
  client
}

enum appeal_status {
  not_applicable
  pending
  under_review
  accepted
  rejected
}

enum approval_status {
  pending
  approved
  rejected
  cancelled
  auto_approved
}

enum assignment_status {
  active
  completed
  cancelled
}

enum assignment_type {
  permanent
  temporary
  trial
}

enum audit_category {
  security
  financial
  compliance
  operational
}

enum audit_severity {
  info
  warning
  error
  critical
}

enum batch_type {
  WPS
  SEPA
  local
}

enum billing_interval {
  month
  year
}

enum billing_plan_status {
  draft
  active
  deprecated
  archived
}

enum blacklist_category {
  disciplinary
  administrative
  legal
  safety
  financial
  performance
  contract_breach
  criminal
  voluntary
}

enum blacklist_severity {
  low
  medium
  high
  critical
}

enum blacklist_status {
  active
  expired
  revoked
  appealed_lifted
}

enum body_type {
  sedan
  hatchback
  suv
  van
  minivan
  pickup
  coupe
  wagon
  limousine
  other
}

enum car_model_status {
  active
  inactive
  discontinued
}

enum claim_status {
  filed
  processing
  approved
  rejected
  closed
}

enum compensation_model {
  fixed_rental
  percentage_split
  salary
  crew_rental
  buyout
  custom
}

enum contract_status {
  draft
  negotiation
  signed
  active
  future
  expired
  terminated
  renewal_in_progress
  cancelled
}

enum cooperation_status {
  pending
  active
  expired
  terminated
}

enum cooperation_type {
  employee
  contractor
  owner_operator
  partner_driver
}

enum coverage_drivers {
  named
  any
  professional
}

enum department {
  support
  tech
  finance
  sales
}

enum dispute_status {
  pending
  accepted
  rejected
}

enum document_status {
  active
  expired
  archived
}

enum document_verification_status {
  pending
  verified
  rejected
  expired
}

enum driver_document_type {
  driving_license
  professional_card
  national_id
  passport
  visa
  work_permit
  residence_permit
  proof_of_address
  criminal_record
  medical_certificate
  vehicle_registration
  insurance_policy
  contract_signed
  bank_statement
  other
}

enum driver_request_type {
  leave
  vehicle_change
  schedule_change
  expense_reimbursement
  advance_payment
  document_update
  complaint
  support
  contract_modification
  termination
  other
}

enum driver_revenue_period_type {
  week
  biweekly
  month
}

enum driver_revenue_status {
  pending
  validated
  adjusted
  disputed
}

enum driver_status {
  active
  inactive
  suspended
  terminated
}

enum employee_role {
  support_agent
  admin
  super_admin
}

enum equipment_condition {
  new_item
  excellent
  good
  fair
  poor
  damaged
}

enum equipment_status {
  provided
  returned
  lost
  damaged
  stolen
}

enum equipment_type {
  dashcam
  gps_tracker
  tablet
  phone_charger
  phone_mount
  spare_tire
  jack
  warning_triangle
  first_aid_kit
  fire_extinguisher
  reflective_vest
  other
}

enum event_severity {
  minor
  moderate
  major
  total_loss
}

enum expense_category {
  fuel
  toll
  parking
  wash
  repair
  fine
  insurance_deductible
  registration
  inspection
  permit
  other
}

enum finance_payment_method {
  bank_transfer
  mobile_money
  cash
}

enum fuel_type {
  gasoline
  diesel
  hybrid
  electric
  plugin_hybrid
  cng
  lpg
  hydrogen
}

enum goal_category {
  revenue
  trips
  quality
  efficiency
  safety
}

enum goal_period_type {
  daily
  weekly
  monthly
  quarterly
  yearly
}

enum goal_reward_type {
  bonus
  certificate
  badge
  promotion
}

enum goal_status {
  active
  in_progress
  completed
  cancelled
  expired
  on_track
  at_risk
  achieved
  exceeded
}

enum goal_target_type {
  individual
  team
  branch
  company
}

enum goal_threshold {
  bronze
  silver
  gold
  exceeded
}

enum handover_type {
  pickup
  return
  transfer
}

enum inspection_status {
  scheduled
  passed
  failed
  pending
  cancelled
}

enum inspection_type {
  annual
  pre_trip
  post_accident
  regulatory
  pre_sale
  custom
}

enum insurance_status {
  active
  expired
  cancelled
  suspended
}

enum invitation_status {
  pending
  accepted
  expired
  revoked
}

enum invitation_type {
  initial_admin
  additional_user
  role_change
  reactivation
}

enum invoice_line_source_type {
  billing_plan
  usage_metric
  manual
  promotion
}

enum invoice_line_type {
  plan_fee
  overage_fee
  tax
  discount
  other
}

enum invoice_status {
  draft
  sent
  paid
  overdue
  void
  uncollectible
}

enum lead_priority {
  low
  medium
  high
  urgent
}

enum lead_stage {
  top_of_funnel
  marketing_qualified
  sales_qualified
  opportunity
}

enum lead_status {
  new
  qualified
  converted
  lost
  working
}

enum lifecycle_event_type {
  created
  trial_started
  trial_extended
  activated
  plan_upgraded
  plan_downgraded
  suspended
  reactivated
  cancelled
  archived
  deleted
}

enum lifecycle_status {
  active
  inactive
  deprecated
}

enum maintenance_category {
  preventive
  corrective
  regulatory
  emergency
}

enum maintenance_priority {
  low
  medium
  high
  urgent
  emergency
}

enum maintenance_status {
  scheduled
  in_progress
  completed
  cancelled
  deferred
}

enum maintenance_trigger_type {
  mileage_based
  time_based
  condition_based
  manual
}

enum maintenance_type {
  oil_change
  tire_rotation
  brake_service
  engine_service
  transmission_service
  battery_replacement
  air_filter
  coolant_flush
  alignment
  inspection
  other
}

enum member_status {
  invited
  active
  suspended
  terminated
}

enum message_type {
  public
  internal
  note
}

enum metric_source {
  internal
  api
  import
  calculated
}

enum notification_channel {
  email
  sms
  slack
  webhook
  push
}

enum notification_status {
  pending
  sent
  delivered
  bounced
  opened
  clicked
  failed
}

enum opportunity_stage {
  prospect
  proposal
  negotiation
  closed
}

enum opportunity_status {
  open
  won
  lost
  on_hold
  cancelled
}

enum paid_by {
  company
  driver
  platform
  government
}

enum payment_frequency {
  annual
  semi_annual
  quarterly
  monthly
}

enum payment_method {
  direct_debit
  bank_transfer
  credit_card
  cash
  cheque
}

enum payment_method_status {
  active
  inactive
  expired
  failed
  pending_verification
}

enum payment_method_type {
  cash
  card
  wallet
  mixed
}

enum payment_status {
  pending
  processed
  failed
  refunded
}

enum payment_type {
  card
  bank_account
  paypal
  apple_pay
  google_pay
  other
}

enum payroll_cycle {
  monthly
  semi_monthly
  weekly
  custom
}

enum performed_by_type {
  system
  employee
  api
}

enum period_type {
  day
  week
  month
}

enum platform_account_key_type {
  read_only
  read_write
  admin
}

enum platform_account_status {
  active
  inactive
  suspended
}

enum policy_category {
  main
  supplementary
  temporary
  rider
}

enum preferred_payment_method {
  bank_transfer
  cash
  mobile_wallet
}

enum promotion_applies_to {
  first_invoice
  all_invoices
  specific_plan
}

enum promotion_discount_type {
  percentage
  fixed_amount
}

enum promotion_status {
  active
  expired
  exhausted
  disabled
}

enum provider_type {
  internal
  external
  online_platform
  government
}

enum queue_status {
  pending
  processing
  sent
  failed
  cancelled
}

enum receipt_status {
  pending
  verified
  invalid
  missing
}

enum reconciliation_status {
  pending
  matched
  mismatched
  adjusted
  cancelled
}

enum reconciliation_type {
  platform_payment
  cash_collection
  bank_statement
  adjustment
}

enum regulation_status {
  active
  inactive
}

enum renewal_type {
  automatic
  optional
  perpetual
  non_renewing
}

enum repair_status {
  pending
  approved
  in_progress
  completed
  cancelled
}

enum request_priority {
  low
  normal
  high
  urgent
}

enum request_status {
  pending
  under_review
  approved
  rejected
  cancelled
  completed
}

enum responsible_party {
  fleet
  driver
  third_party
}

enum revenue_import_source_type {
  api
  file_csv
  file_excel
  manual
}

enum revenue_import_status {
  pending
  processing
  completed
  partially_completed
  failed
  cancelled
}

enum risk_rating {
  A
  B
  C
  D
  E
}

enum scope_type {
  global
  branch
  team
}

enum service_type {
  ride
  support
  maintenance
  other
}

enum settlement_status {
  pending
  settled
  cancelled
}

enum settlement_type {
  platform_payout
  adjustment
  refund
  bonus
}

enum shift_status {
  scheduled
  completed
  cancelled
  no_show
  partial
}

enum shift_type {
  day
  night
  weekend
  peak_hour
  special_event
}

enum signature_method {
  digital
  wet_signature
  app
  email
}

enum storage_provider {
  supabase
  s3
  azure_blob
  gcs
}

enum submitter_type {
  driver
  client
  member
  guest
}

enum subscription_status {
  trialing
  active
  past_due
  suspended
  cancelling
  cancelled
  inactive
}

enum task_category {
  admin
  maintenance
  document
  training
  support
}

enum task_change_type {
  created
  assigned
  status_changed
  escalated
}

enum task_comment_type {
  note
  status_change
  escalation
}

enum task_priority {
  low
  normal
  high
  urgent
  critical
}

enum task_status {
  pending
  in_progress
  completed
  cancelled
  overdue
  blocked
  waiting_verification
  reopened
}

enum tenant_status {
  trialing
  active
  suspended
  past_due
  cancelled
}

enum ticket_priority {
  low
  medium
  high
  critical
}

enum ticket_raised_by_type {
  admin
  driver
  client
  guest
}

enum ticket_source_platform {
  web
  mobile
  api
  email
  phone
}

enum ticket_status {
  new
  open
  waiting_client
  waiting_internal
  resolved
  closed
}

enum toll_gate_status {
  active
  inactive
  maintenance
}

enum toll_transaction_source {
  automatic
  manual
  imported
}

enum toll_transaction_status {
  pending
  charged
  refunded
  disputed
}

enum traffic_fine_status {
  pending
  processing
  disputed
  cancelled
  paid
  refunded
}

enum training_status {
  planned
  in_progress
  completed
  expired
  cancelled
}

enum training_type {
  mandatory
  safety
  customer_service
  technical
  compliance
  platform_specific
  professional_development
  onboarding
  refresher
  specialized
}

enum transaction_category_type {
  revenue
  expense
  transfer
  other
}

enum transmission_type {
  manual
  automatic
  semi_automatic
  cvt
}

enum trip_status {
  completed
  cancelled
  rejected
  no_show
}

enum trp_invoice_status {
  draft
  sent
  viewed
  partially_paid
  paid
  disputed
  cancelled
  overdue
}

enum trp_payment_method {
  bank_transfer
  card
  check
  cash
}

enum vehicle_event_type {
  accident
  maintenance
  violation
  recovery
  impound
  theft
  breakdown
}

enum vehicle_usage {
  commercial
  private
  mixed
}

enum verification_status {
  pending
  verified
  rejected
}
